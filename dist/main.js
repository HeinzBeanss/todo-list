(()=>{"use strict";const e=(()=>{let e=[],d=1;document.querySelector(".sidebartop");const o=document.querySelector(".projectList"),s=document.querySelector(".todolists"),l=document.querySelector(".savebutton");l.disabled=!0;const i=document.querySelector(".addtodo"),c=document.querySelector(".deletetodo");c.disabled=!0;const n=document.querySelector(".edittodo");n.disabled=!0;const a=document.querySelector("#deleteproject"),r=(document.querySelector("#editproject"),()=>{document.querySelectorAll(".selected").forEach((e=>{e.classList.remove("selected")})),e.forEach((e=>{e.selected=!1}))}),u=()=>{e.forEach((e=>{!0===e.selected&&e.todolists.forEach((e=>{e.selected=!1}))})),document.querySelectorAll(".selectedtodo").forEach((e=>{e.classList.remove("selectedtodo")}))},m=()=>{e.forEach((e=>{!0===e.selected&&e.todolists.forEach((e=>{e.selected=!1}))}));let t=s.lastElementChild;for(;t;)s.removeChild(t),t=s.lastElementChild},p=()=>{};return localStorage.getItem("allprojects")?p():(localStorage.setItem("allprojects",e),p()),o.addEventListener("click",(t=>{r(),u(),t.target.classList.add("selected"),console.log(t.target),console.log(e);let d=t.target.getAttribute("id");console.log(d),e.forEach((t=>{t.id==d&&(t.selected=!0,m(),e.forEach((e=>{!0===e.selected&&!1===e.deleted&&(document.querySelector("#ptitle").textContent=e.name,e.todolists.forEach((e=>{if(!1===e.deleted){const t=document.createElement("div");t.classList.add("todocard"),t.setAttribute("id",e.id),s.appendChild(t);const d=document.createElement("h3");d.classList.add("todotitle"),d.setAttribute("contenteditable","false"),d.textContent=e.title,t.appendChild(d);const o=document.createElement("p");o.classList.add("tododesc"),o.setAttribute("contenteditable","false"),o.textContent=e.description,t.appendChild(o);const l=document.createElement("div");l.classList.add("radiobuttons"),t.appendChild(l);const i=document.createElement("p");i.classList.add("priotitle"),i.textContent="Priority:",l.appendChild(i);const c=document.createElement("input");c.classList.add("todopriolow"),c.setAttribute("id","prio"),c.setAttribute("name","prio"),c.setAttribute("type","radio"),c.setAttribute("value","low"),c.setAttribute("disabled",""),l.appendChild(c);const n=document.createElement("label");n.textContent="Low",n.setAttribute("for","low"),l.appendChild(n);const a=document.createElement("input");a.classList.add("todopriomedium"),a.setAttribute("id","prio"),a.setAttribute("name","prio"),a.setAttribute("type","radio"),a.setAttribute("value","medium"),a.setAttribute("disabled",""),l.appendChild(a);const r=document.createElement("label");r.textContent="Medium",r.setAttribute("for","medium"),l.appendChild(r);const u=document.createElement("input");u.classList.add("todopriohigh"),u.setAttribute("id","prio"),u.setAttribute("name","prio"),u.setAttribute("type","radio"),u.setAttribute("value","high"),u.setAttribute("disabled",""),l.appendChild(u);const m=document.createElement("label");m.textContent="High",m.setAttribute("for","high"),l.appendChild(m),"low"===e.priority?c.setAttribute("checked",""):"medium"===e.priority?a.setAttribute("checked",""):"high"===e.priority&&u.setAttribute("checked","");const p=document.createElement("div");p.classList.add("date"),t.appendChild(p);const b=document.createElement("label");b.classList.add("datelabel"),b.setAttribute("for","duedate"),b.textContent="Due: ",p.appendChild(b);const h=document.createElement("p");h.classList.add("duedate"),h.setAttribute("contenteditable","false"),h.textContent=e.duedate,p.appendChild(h)}})))})))}))})),s.addEventListener("click",(t=>{console.log(t.target),u();let d=t.target,o=d.getAttribute("class"),s=d.getAttribute("id"),l=t.target.parentNode,i=l.getAttribute("class"),a=l.getAttribute("id"),r=l.parentNode,m=(r.getAttribute("class"),r.getAttribute("id"));if(e.forEach((e=>{!0===e.selected&&e.todolists.forEach((e=>{e.id!=s&&e.id!=a&&e.id!=m||(e.selected=!0)}))})),console.log(e),"todolists"===o);else if("todocard"===o)console.log(o),t.target.classList.add("selectedtodo"),console.log("it's done via child.");else if("radiobuttons"===i)t.target.parentNode.parentNode.classList.add("selectedtodo"),console.log("a fucking annoying ass radio button element was pressed.");else if("date"===i)t.target.parentNode.parentNode.classList.add("selectedtodo"),console.log("a fucking annoying ass duedate shit element was pressed.");else{let e=t.target;console.log(t.target.parentNode),e.parentNode.classList.add("selectedtodo"),console.log("it's done via parent.")}n.disabled=!1,n.classList.add("online"),n.classList.remove("offline"),c.disabled=!1,c.classList.add("online"),c.classList.remove("offline")})),l.addEventListener("click",(()=>{e.forEach((e=>{if(!0===e.selected){const t=document.querySelector("#ptitle");e.name=t.textContent,document.querySelector(".selected").textContent=e.name,t.setAttribute("contenteditable","false"),e.todolists.forEach((e=>{if(!0===e.selected){document.querySelectorAll(".todotitle").forEach((e=>{e.setAttribute("contenteditable","false")})),document.querySelectorAll(".tododesc").forEach((e=>{e.setAttribute("contenteditable","false")})),document.querySelectorAll("input").forEach((e=>{e.setAttribute("disabled","")})),document.querySelectorAll(".date").forEach((e=>{e.setAttribute("contenteditable","false")}));const t=document.querySelector(".selectedtodo");e.title=t.firstChild.textContent,e.description=t.childNodes[1].textContent;for(let d=0;d<t.childNodes[2].childNodes.length;d++)t.childNodes[2].childNodes[d].checked&&(console.log(t.childNodes[2].childNodes[d]),e.priority=t.childNodes[2].childNodes[d].value,t.childNodes[2].childNodes[d].removeAttribute("disabled",""));e.duedate=t.childNodes[3].childNodes[1].textContent,console.log(e)}})),l.disabled=!0,l.classList.remove("online"),l.classList.add("offline"),i.disabled=!1,i.classList.add("online"),i.classList.remove("offline"),n.disabled=!1,n.classList.add("online"),n.classList.remove("offline")}}))})),c.addEventListener("click",(()=>{e.forEach((e=>{!0===e.selected&&e.todolists.forEach((e=>{!0===e.selected&&(document.querySelector(".selectedtodo").remove(),e.deleted=!0,console.log(e),i.disabled=!1,i.classList.add("online"),i.classList.remove("offline"),l.disabled=!1,l.classList.add("offline"),l.classList.remove("online"))}))})),c.disabled=!0,c.classList.add("offline"),c.classList.remove("online")})),n.addEventListener("click",(()=>{e.forEach((e=>{!0===e.selected&&(document.querySelector("#ptitle").setAttribute("contenteditable",!0),e.todolists.forEach((e=>{if(!0===e.selected){i.disabled=!0,i.classList.remove("online"),i.classList.add("offline"),l.disabled=!1,l.classList.add("online"),l.classList.remove("offline"),o.disabled=!0,s.disabled=!0;const e=document.querySelector(".selectedtodo");e.firstChild.setAttribute("contenteditable","true"),e.childNodes[1].setAttribute("contenteditable","true"),e.querySelectorAll("input").forEach((e=>{e.removeAttribute("disabled")})),e.querySelector(".duedate").setAttribute("contenteditable","true")}})))}))})),a.addEventListener("click",(()=>{e.forEach((t=>{if(!0===t.selected){const d=document.querySelector(".todolists");let s=d.lastElementChild;for(;s;)d.removeChild(s),s=d.lastElementChild;document.querySelector("#ptitle").textContent="";const l=document.querySelector(".projectList");let i=l.lastElementChild;for(;i;)l.removeChild(i),i=l.lastElementChild;t.selected=!1,t.deleted=!0,e.forEach((e=>{if(!1===e.deleted){const t=document.createElement("h2");t.textContent=e.name,t.classList.add("selector"),t.setAttribute("id",e.id),o.appendChild(t)}}))}}))})),{addProject:()=>{m(),r();let s=d++;e.forEach((e=>{e.selected=!1}));const i=t.projectFactory("New Project",!0,s);console.log(i),e.push(i);const a=document.createElement("h2");a.textContent="New Project",a.classList.add("selected"),a.classList.add("selector"),a.setAttribute("id",s),o.appendChild(a),console.log(e),document.querySelector("#ptitle").textContent="New Project",n.disabled=!0,n.classList.add("offline"),n.classList.remove("online"),c.disabled=!0,c.classList.add("offline"),c.classList.remove("online"),l.disabled=!0,l.classList.add("offline"),l.classList.remove("online")},designEmptyTodo:()=>{u(),i.disabled=!0,i.classList.remove("online"),i.classList.add("offline"),c.disabled=!1,c.classList.remove("offline"),c.classList.add("online"),l.disabled=!1,l.classList.remove("offline"),l.classList.add("online"),document.querySelector("#ptitle").setAttribute("contenteditable",!0);let o=d++;const n=document.createElement("div");n.classList.add("todocard"),n.classList.add("selectedtodo"),n.setAttribute("id",o),s.appendChild(n);const a=document.createElement("h3");a.classList.add("todotitle"),a.setAttribute("contenteditable","true"),a.textContent="Give your todo a title",n.appendChild(a);const r=document.createElement("p");r.classList.add("tododesc"),r.setAttribute("contenteditable","true"),n.appendChild(r);const m=document.createElement("div");m.classList.add("radiobuttons"),n.appendChild(m);const p=document.createElement("p");p.classList.add("priotitle"),p.textContent="Priority:",m.appendChild(p);const b=document.createElement("input");b.classList.add("todopriolow"),b.setAttribute("id","prio"),b.setAttribute("name","prio"),b.setAttribute("type","radio"),b.setAttribute("value","low"),m.appendChild(b);const h=document.createElement("label");h.textContent="Low",h.setAttribute("for","low"),m.appendChild(h);const f=document.createElement("input");f.classList.add("todopriomedium"),f.setAttribute("id","prio"),f.setAttribute("name","prio"),f.setAttribute("type","radio"),f.setAttribute("value","medium"),m.appendChild(f);const L=document.createElement("label");L.textContent="Medium",L.setAttribute("for","medium"),m.appendChild(L);const A=document.createElement("input");A.classList.add("todopriohigh"),A.setAttribute("id","prio"),A.setAttribute("name","prio"),A.setAttribute("type","radio"),A.setAttribute("value","high"),m.appendChild(A);const E=document.createElement("label");E.textContent="High",E.setAttribute("for","high"),m.appendChild(E);const C=document.createElement("div");C.classList.add("date"),n.appendChild(C);const g=document.createElement("label");g.classList.add("datelabel"),g.setAttribute("for","duedate"),g.textContent="Due: ",C.appendChild(g);const y=document.createElement("p");y.classList.add("duedate"),y.setAttribute("contenteditable","true"),C.appendChild(y);const v=t.todoFactory("","","","",!0,o);e.forEach((e=>{!0===e.selected&&(e.todolists.push(v),console.log(e.todolists))}))},allProjects:e}})(),t={projectFactory:(e,t,d)=>({name:e,selected:t,todolists:[],id:d,deleted:!1}),Projects:[],todoFactory:(e,t,d,o,s,l)=>({title:e,description:t,priority:d,duedate:o,selected:s,id:l,deleted:!1})};document.querySelector("#createproject").addEventListener("click",e.addProject),document.querySelector(".addtodo").addEventListener("click",e.designEmptyTodo);const d=t.projectFactory("General",!0,0);e.allProjects.push(d)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aUJBRXRELE1BQU1qRSxFQUFVOEQsRUFBY0MsZUFBZSxXQUFXLEVBQU0sR0FDOURoRyxFQUFjQyxZQUFZZ0csS0FBS2hFLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvZGVzaWduLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9sb2dpYy5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtjcmVhdGVQcm9qZWN0fSBmcm9tIFwiLi4vc3JjL2xvZ2ljXCJcblxuY29uc3QgZGVzaWduUHJvamVjdCA9ICgoKSA9PiB7XG5cbiAgICBsZXQgYWxsUHJvamVjdHMgPSBbXTtcbiAgICBsZXQgcHJvamVjdFRvZG9zID0gW107XG4gICAgbGV0IHggPSAxXG5cbiAgICBjb25zdCBzaWRlYmFydG9wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaWRlYmFydG9wXCIpO1xuICAgIGNvbnN0IHByb2plY3RMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0TGlzdFwiKVxuICAgIGNvbnN0IHRvZG9saXN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kb2xpc3RzXCIpO1xuICAgIGNvbnN0IHNhdmVidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNhdmVidXR0b25cIik7XG4gICAgc2F2ZWJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgY29uc3QgYWRkdG9kb2J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkdG9kb1wiKTtcbiAgICBjb25zdCBkZWxldGVidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRlbGV0ZXRvZG9cIik7XG4gICAgZGVsZXRlYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICBjb25zdCBlZGl0YnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0dG9kb1wiKTtcbiAgICBlZGl0YnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICBjb25zdCBkZWxwcm9qZWN0YnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZWxldGVwcm9qZWN0XCIpO1xuICAgIGNvbnN0IGVkaXRwcm9qZWN0YnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0cHJvamVjdFwiKTtcbiAgICAvLyBjb25zdCBzYXZlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNzYXZlXCIpO1xuICAgIC8vIGNvbnN0IHVwbG9hZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdXBsb2FkXCIpO1xuXG4gICAgLy8gUFJPSkVDVCBGVU5DVElPTlMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgIGNvbnN0IGRpc3BsYXlQcm9qZWN0cyA9ICgpID0+IHtcblxuICAgICAgICBhbGxQcm9qZWN0cy5mb3JFYWNoKHByb2plY3RudW1iZXIgPT4ge1xuXG4gICAgICAgICAgICBpZiAocHJvamVjdG51bWJlci5kZWxldGVkID09PSBmYWxzZSkge1xuXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3UHJvamVjdExhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgyXCIpO1xuICAgICAgICAgICAgICAgIG5ld1Byb2plY3RMYWJlbC50ZXh0Q29udGVudCA9IHByb2plY3RudW1iZXIubmFtZTtcbiAgICAgICAgICAgICAgICBuZXdQcm9qZWN0TGFiZWwuY2xhc3NMaXN0LmFkZChcInNlbGVjdG9yXCIpO1xuICAgICAgICAgICAgICAgIG5ld1Byb2plY3RMYWJlbC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBwcm9qZWN0bnVtYmVyLmlkKTtcbiAgICAgICAgICAgICAgICBwcm9qZWN0TGlzdC5hcHBlbmRDaGlsZChuZXdQcm9qZWN0TGFiZWwpO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pIFxuICAgIH1cblxuICAgIGNvbnN0IGRlbGV0ZVByb2plY3QgPSAoKSA9PiB7XG5cbiAgICAgICAgYWxsUHJvamVjdHMuZm9yRWFjaChwcm9qZWN0bnVtYmVyID0+IHtcbiAgICAgICAgICAgIGlmIChwcm9qZWN0bnVtYmVyLnNlbGVjdGVkID09PSB0cnVlKXtcbiAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IHRlbXB0b2RvbGlzdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG9saXN0c1wiKTtcbiAgICAgICAgICAgICAgICBsZXQgY2hpbGRyZW4gPSB0ZW1wdG9kb2xpc3RzLmxhc3RFbGVtZW50Q2hpbGQ7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXB0b2RvbGlzdHMucmVtb3ZlQ2hpbGQoY2hpbGRyZW4pO1xuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbiA9IHRlbXB0b2RvbGlzdHMubGFzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCB0ZW1wdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3B0aXRsZVwiKTtcbiAgICAgICAgICAgICAgICB0ZW1wdGl0bGUudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBwcm9qZWN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdExpc3RcIik7XG4gICAgICAgICAgICAgICAgbGV0IHByb2plY3RjaGlsZHJlbiA9IHRlbXBwcm9qZWN0cy5sYXN0RWxlbWVudENoaWxkO1xuICAgICAgICAgICAgICAgIHdoaWxlIChwcm9qZWN0Y2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcHByb2plY3RzLnJlbW92ZUNoaWxkKHByb2plY3RjaGlsZHJlbik7XG4gICAgICAgICAgICAgICAgICAgIHByb2plY3RjaGlsZHJlbiA9IHRlbXBwcm9qZWN0cy5sYXN0RWxlbWVudENoaWxkO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHByb2plY3RudW1iZXIuc2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBwcm9qZWN0bnVtYmVyLmRlbGV0ZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgZGlzcGxheVByb2plY3RzKCk7XG4gICAgICAgICAgICAgICAgLy8gZGlzcGxheSBwcm9qZWN0cy5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBjb25zdCBhZGRQcm9qZWN0ID0gKCkgPT4ge1xuXG4gICAgICAgIGNsZWFyQWxsVG9kb3MoKTtcbiAgICAgICAgY2xlYXJBbGxTZWxlY3RvcnMoKTtcblxuICAgICAgICBsZXQgaSA9IHgrK1xuXG4gICAgICAgIGFsbFByb2plY3RzLmZvckVhY2gocHJvamVjdG51bWJlciA9PiB7XG4gICAgICAgICAgICBwcm9qZWN0bnVtYmVyLnNlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgIH0pXG5cbiAgICAgICAgY29uc3QgcHJvamVjdCA9IGNyZWF0ZVByb2plY3QucHJvamVjdEZhY3RvcnkoXCJOZXcgUHJvamVjdFwiLCB0cnVlLCBpKTtcbiAgICAgICAgY29uc29sZS5sb2cocHJvamVjdCk7XG4gICAgICAgIFxuICAgICAgICBhbGxQcm9qZWN0cy5wdXNoKHByb2plY3QpO1xuXG4gICAgICAgIGNvbnN0IG5ld1Byb2plY3RMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMlwiKTtcbiAgICAgICAgbmV3UHJvamVjdExhYmVsLnRleHRDb250ZW50ID0gXCJOZXcgUHJvamVjdFwiO1xuICAgICAgICBuZXdQcm9qZWN0TGFiZWwuY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkXCIpO1xuICAgICAgICBuZXdQcm9qZWN0TGFiZWwuY2xhc3NMaXN0LmFkZChcInNlbGVjdG9yXCIpO1xuICAgICAgICBuZXdQcm9qZWN0TGFiZWwuc2V0QXR0cmlidXRlKFwiaWRcIiwgaSk7XG4gICAgICAgIHByb2plY3RMaXN0LmFwcGVuZENoaWxkKG5ld1Byb2plY3RMYWJlbCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGFsbFByb2plY3RzKTtcblxuICAgICAgICBjb25zdCB0ZW1wdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3B0aXRsZVwiKTtcbiAgICAgICAgdGVtcHRpdGxlLnRleHRDb250ZW50ID0gXCJOZXcgUHJvamVjdFwiO1xuXG4gICAgICAgIGVkaXRidXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICBlZGl0YnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJvZmZsaW5lXCIpO1xuICAgICAgICBlZGl0YnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJvbmxpbmVcIik7XG4gICAgICAgIGRlbGV0ZWJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIGRlbGV0ZWJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwib2ZmbGluZVwiKTtcbiAgICAgICAgZGVsZXRlYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJvbmxpbmVcIik7XG4gICAgICAgIHNhdmVidXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICBzYXZlYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJvZmZsaW5lXCIpO1xuICAgICAgICBzYXZlYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJvbmxpbmVcIik7XG5cblxuICAgIH1cblxuICAgIGNvbnN0IHNlbGVjdFByb2plY3QgPSAocHJvamVjdCkgPT4ge1xuXG4gICAgICAgIGNsZWFyQWxsU2VsZWN0b3JzKCk7XG4gICAgICAgIGNsZWFyQWxsVG9kb1NlbGVjdG9ycygpO1xuICAgICAgICBwcm9qZWN0LnRhcmdldC5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWRcIik7XG5cbiAgICAgICAgY29uc29sZS5sb2cocHJvamVjdC50YXJnZXQpXG4gICAgICAgIGNvbnNvbGUubG9nKGFsbFByb2plY3RzKTtcblxuICAgICAgICBsZXQgcHJvamVjdGlkID0gcHJvamVjdC50YXJnZXQuZ2V0QXR0cmlidXRlKFwiaWRcIik7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0aWQpO1xuXG4gICAgICAgIGFsbFByb2plY3RzLmZvckVhY2gocHJvamVjdG51bWJlciA9PiB7XG4gICAgICAgICAgICBpZiAocHJvamVjdG51bWJlci5pZCA9PSBwcm9qZWN0aWQpIHtcbiAgICAgICAgICAgICAgICBwcm9qZWN0bnVtYmVyLnNlbGVjdGVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIGRpc3BsYXlQcm9qZWN0c1RvZG9zKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICB9XG5cbiAgICBjb25zdCBjbGVhckFsbFNlbGVjdG9ycyA9ICgpID0+IHtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNlbGVjdGVkXCIpO1xuICAgICAgICBzZWxlY3RlZC5mb3JFYWNoKHNlbGVjdG9yID0+IHtcbiAgICAgICAgICAgIHNlbGVjdG9yLmNsYXNzTGlzdC5yZW1vdmUoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgfSlcblxuICAgICAgICBhbGxQcm9qZWN0cy5mb3JFYWNoKHByb2plY3RudW1iZXIgPT4ge1xuICAgICAgICAgICAgcHJvamVjdG51bWJlci5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8vIFRPRE8gRlVOQ1RJT05TIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICBjb25zdCBlZGl0VG9kbyA9ICgpID0+IHtcblxuICAgICAgICBhbGxQcm9qZWN0cy5mb3JFYWNoKHByb2plY3RudW1iZXIgPT4ge1xuICAgICAgICAgICAgaWYgKHByb2plY3RudW1iZXIuc2VsZWN0ZWQgPT09IHRydWUpIHtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBwcm9qZWN0dGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3B0aXRsZVwiKTtcbiAgICAgICAgICAgICAgICB0ZW1wcHJvamVjdHRpdGxlLnNldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiLCB0cnVlKTtcblxuICAgICAgICAgICAgICAgIHByb2plY3RudW1iZXIudG9kb2xpc3RzLmZvckVhY2godG9kb251bWJlciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0b2RvbnVtYmVyLnNlbGVjdGVkID09PSB0cnVlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHRvZG9idXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkdG9kb2J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwib25saW5lXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkdG9kb2J1dHRvbi5jbGFzc0xpc3QuYWRkKFwib2ZmbGluZVwiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZWJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZWJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwib25saW5lXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZWJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwib2ZmbGluZVwiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvamVjdExpc3QuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9kb2xpc3RzLmRpc2FibGVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcHRvZG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlbGVjdGVkdG9kb1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXB0b2RvLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXB0b2RvLmNoaWxkTm9kZXNbMV0uc2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXByYWRpb2J1dHRvbnMgPSB0ZW1wdG9kby5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wcmFkaW9idXR0b25zLmZvckVhY2gocmFkaW9idXR0b24gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmFkaW9idXR0b24ucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBkdWVkYXRlID0gdGVtcHRvZG8ucXVlcnlTZWxlY3RvcihcIi5kdWVkYXRlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGR1ZWRhdGUuc2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgfVxuXG4gICAgY29uc3Qgc2F2ZVRvZG8gPSAoKSA9PiB7XG4gICAgICAgIGFsbFByb2plY3RzLmZvckVhY2gocHJvamVjdG51bWJlciA9PiB7XG4gICAgICAgICAgICBpZiAocHJvamVjdG51bWJlci5zZWxlY3RlZCA9PT0gdHJ1ZSkge1xuXG5cbiAgICAgICAgICAgICAgICBjb25zdCB0ZW1wcHJvamVjdHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwdGl0bGVcIik7XG4gICAgICAgICAgICAgICAgcHJvamVjdG51bWJlci5uYW1lID0gdGVtcHByb2plY3R0aXRsZS50ZXh0Q29udGVudDtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZW1wcHJvamVjdHNpZGViYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgIHRlbXBwcm9qZWN0c2lkZWJhci50ZXh0Q29udGVudCA9IHByb2plY3RudW1iZXIubmFtZTtcbiAgICAgICAgICAgICAgICB0ZW1wcHJvamVjdHRpdGxlLnNldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiLCBcImZhbHNlXCIpO1xuXG4gICAgICAgICAgICAgICAgcHJvamVjdG51bWJlci50b2RvbGlzdHMuZm9yRWFjaCh0b2RvbnVtYmVyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvZG9udW1iZXIuc2VsZWN0ZWQgPT09IHRydWUpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcHRpdGxlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudG9kb3RpdGxlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcHRpdGxlcy5mb3JFYWNoKHRlbXB0aXRsZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcHRpdGxlLnNldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiLCBcImZhbHNlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBkZXNjcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudG9kb2Rlc2NcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wZGVzY3MuZm9yRWFjaCh0ZW1wZGVzYyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGRlc2Muc2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIsIFwiZmFsc2VcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcHJhZGlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcImlucHV0XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcHJhZGlvLmZvckVhY2gocmFkaW8gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhZGlvLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBkYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5kYXRlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGRhdGUuZm9yRWFjaChkYXRlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlLnNldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiLCBcImZhbHNlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcHRvZG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlbGVjdGVkdG9kb1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZG9udW1iZXIudGl0bGUgPSB0ZW1wdG9kby5maXJzdENoaWxkLnRleHRDb250ZW50OyAvL3RpdGxlIGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2RvbnVtYmVyLmRlc2NyaXB0aW9uID0gdGVtcHRvZG8uY2hpbGROb2Rlc1sxXS50ZXh0Q29udGVudDsgLy9kZXNjcmlwdGlvbiBpbnB1dFxuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRlbXB0b2RvLmNoaWxkTm9kZXNbMl0uY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZW1wdG9kby5jaGlsZE5vZGVzWzJdLmNoaWxkTm9kZXNbaV0uY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0ZW1wdG9kby5jaGlsZE5vZGVzWzJdLmNoaWxkTm9kZXNbaV0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZG9udW1iZXIucHJpb3JpdHkgPSB0ZW1wdG9kby5jaGlsZE5vZGVzWzJdLmNoaWxkTm9kZXNbaV0udmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXB0b2RvLmNoaWxkTm9kZXNbMl0uY2hpbGROb2Rlc1tpXS5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZG9udW1iZXIuZHVlZGF0ZSA9IHRlbXB0b2RvLmNoaWxkTm9kZXNbM10uY2hpbGROb2Rlc1sxXS50ZXh0Q29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRvZG9udW1iZXIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBzYXZlYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzYXZlYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJvbmxpbmVcIik7XG4gICAgICAgICAgICAgICAgc2F2ZWJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwib2ZmbGluZVwiKTtcblxuICAgICAgICAgICAgICAgIGFkZHRvZG9idXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBhZGR0b2RvYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJvbmxpbmVcIik7XG4gICAgICAgICAgICAgICAgYWRkdG9kb2J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwib2ZmbGluZVwiKTtcblxuICAgICAgICAgICAgICAgIGVkaXRidXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBlZGl0YnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJvbmxpbmVcIik7XG4gICAgICAgICAgICAgICAgZWRpdGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwib2ZmbGluZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgcG9wdWxhdGVTdG9yYWdlO1xuICAgIH1cblxuICAgIGNvbnN0IHNlbGVjdFRvZG8gPSAodG9kbykgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyh0b2RvLnRhcmdldCk7XG5cbiAgICAgICAgLy8gc2F2ZVRvZG8oKTsgLy8gTE9PSyBJTlRPXG4gICAgICAgIGNsZWFyQWxsVG9kb1NlbGVjdG9ycygpO1xuXG4gICAgICAgIC8vIG1ha2Ugc3VyZSBoZXJlLCB0aGF0IHdoYXRldmVyIHRvZG9saXN0IHdhcyBzZWxlY3RlZCwgZ2V0cyByZXNlbGVjdGVkLlxuICAgICAgICAvLyBjb3VsZCB1c2UgYW5vdGhlciBvYmplY3QgLSBpZCAtIGhhdmUgaXQgbGlrZSB0b2RvbGlzdCArIGkuIFxuICAgICAgICAvLyBzbyBlYWNoIHRvZG9saXN0IGhhcyBhIHVuaXF1ZSBpZCBjb3JyZXNwb25kaW5nIHRvIHRoZSBwb3NpdGlvbiBpbiB0aGUgYXJyYXlcbiAgICAgICAgLy8gdGhlbiB3aGVuIHNlbGVjdGluZyB0aGVtIC0gc2VhcmNoIHRoZSB0b2RvbGlzdHMsIHdoaWNoZXZlciBpcyBjaGlsZCBub2RlIGlzIHNlbGVjdGVkLCBha2FcbiAgICAgICAgLy8gY2FyZDEgb3IgY2FyZDIsIGllLiBpZiBjYXJkW2ldID09PSB0b2RvbGlzdC5pZCB7dG9kb2xpc3Quc2VsZWN0ZWQgPSB0cnVlfSB0eXBlIHRoaW5nLiBcblxuICAgICAgICBsZXQgbm9kZXRlc3QgPSB0b2RvLnRhcmdldDtcbiAgICAgICAgbGV0IHRlc3QgPSBub2RldGVzdC5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKTtcbiAgICAgICAgbGV0IHRlc3RpZCA9IG5vZGV0ZXN0LmdldEF0dHJpYnV0ZShcImlkXCIpO1xuICAgICAgICBsZXQgbm9kZXRlc3QzID0gdG9kby50YXJnZXQucGFyZW50Tm9kZTtcbiAgICAgICAgbGV0IHRlc3QzID0gbm9kZXRlc3QzLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpO1xuICAgICAgICBsZXQgdGVzdDNpZCA9IG5vZGV0ZXN0My5nZXRBdHRyaWJ1dGUoXCJpZFwiKTtcbiAgICAgICAgbGV0IG5vZGV0ZXN0NCA9IG5vZGV0ZXN0My5wYXJlbnROb2RlO1xuICAgICAgICBsZXQgdGVzdDQgPSBub2RldGVzdDQuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIik7XG4gICAgICAgIGxldCB0ZXN0NGlkID0gbm9kZXRlc3Q0LmdldEF0dHJpYnV0ZShcImlkXCIpO1xuXG5cbiAgICAgICAgYWxsUHJvamVjdHMuZm9yRWFjaChwcm9qZWN0bnVtYmVyID0+IHtcbiAgICAgICAgICAgIGlmIChwcm9qZWN0bnVtYmVyLnNlbGVjdGVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgcHJvamVjdG51bWJlci50b2RvbGlzdHMuZm9yRWFjaCh0b2RvbGlzdG51bWJlciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0b2RvbGlzdG51bWJlci5pZCA9PSB0ZXN0aWQgfHwgdG9kb2xpc3RudW1iZXIuaWQgPT0gdGVzdDNpZCB8fCB0b2RvbGlzdG51bWJlci5pZCA9PSB0ZXN0NGlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2RvbGlzdG51bWJlci5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIGNvbnNvbGUubG9nKGFsbFByb2plY3RzKTtcblxuICAgICAgICBpZiAodGVzdCA9PT0gXCJ0b2RvbGlzdHNcIikge1xuXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGVzdCA9PT0gXCJ0b2RvY2FyZFwiKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0ZXN0KTtcbiAgICAgICAgICAgIHRvZG8udGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZHRvZG9cIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIml0J3MgZG9uZSB2aWEgY2hpbGQuXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKHRlc3QzID09PSBcInJhZGlvYnV0dG9uc1wiKSB7XG4gICAgICAgICAgICBsZXQgdGVzdDEwID0gdG9kby50YXJnZXQ7XG4gICAgICAgICAgICBsZXQgdGVzdDExID0gdGVzdDEwLnBhcmVudE5vZGU7XG4gICAgICAgICAgICB0ZXN0MTEucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWR0b2RvXCIpO1xuICAgICAgICAgICAgLy8gbGV0IHRlc3Q0ID0gdGVzdDMucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIC8vIHRlc3Q0LmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZHRvZG9cIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImEgZnVja2luZyBhbm5veWluZyBhc3MgcmFkaW8gYnV0dG9uIGVsZW1lbnQgd2FzIHByZXNzZWQuXCIpXG4gICAgICAgIH0gZWxzZSBpZiAodGVzdDMgPT09IFwiZGF0ZVwiKSB7XG4gICAgICAgICAgICBsZXQgdGVzdDEwID0gdG9kby50YXJnZXQ7XG4gICAgICAgICAgICBsZXQgdGVzdDExID0gdGVzdDEwLnBhcmVudE5vZGU7XG4gICAgICAgICAgICB0ZXN0MTEucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWR0b2RvXCIpO1xuICAgICAgICAgICAgLy8gbGV0IHRlc3Q0ID0gdGVzdDMucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIC8vIHRlc3Q0LmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZHRvZG9cIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImEgZnVja2luZyBhbm5veWluZyBhc3MgZHVlZGF0ZSBzaGl0IGVsZW1lbnQgd2FzIHByZXNzZWQuXCIpO1xuICAgICAgICAgICAgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgdGVzdDIgPSB0b2RvLnRhcmdldDtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRvZG8udGFyZ2V0LnBhcmVudE5vZGUpO1xuICAgICAgICAgICAgdGVzdDIucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWR0b2RvXCIpO1xuICAgICAgICAgICAgLy8gdGVzdDIuY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkZG9cIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIml0J3MgZG9uZSB2aWEgcGFyZW50LlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVkaXRidXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgZWRpdGJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwib25saW5lXCIpO1xuICAgICAgICBlZGl0YnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJvZmZsaW5lXCIpO1xuICAgICAgICBkZWxldGVidXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgZGVsZXRlYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJvbmxpbmVcIik7XG4gICAgICAgIGRlbGV0ZWJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwib2ZmbGluZVwiKTtcbiAgICAgICAgXG4gICAgfVxuXG4gICAgY29uc3QgY2xlYXJBbGxUb2RvU2VsZWN0b3JzID0gKCkgPT4ge1xuXG4gICAgICAgIGFsbFByb2plY3RzLmZvckVhY2gocHJvamVjdG51bWJlciA9PiB7XG4gICAgICAgICAgICBpZiAocHJvamVjdG51bWJlci5zZWxlY3RlZCA9PT0gdHJ1ZSkge1xuXG4gICAgICAgICAgICAgICAgcHJvamVjdG51bWJlci50b2RvbGlzdHMuZm9yRWFjaCh0b2RvbnVtYmVyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdG9kb251bWJlci5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgY29uc3Qgc2VsZWN0ZWR0b2RvcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2VsZWN0ZWR0b2RvXCIpO1xuICAgICAgICBzZWxlY3RlZHRvZG9zLmZvckVhY2goc2VsZWN0ZWR0b2RvID0+IHtcbiAgICAgICAgICAgIHNlbGVjdGVkdG9kby5jbGFzc0xpc3QucmVtb3ZlKFwic2VsZWN0ZWR0b2RvXCIpO1xuICAgICAgICB9KVxuICAgIH1cbiAgICBcblxuICAgIGNvbnN0IGNsZWFyQWxsVG9kb3MgPSAoKSA9PiB7XG4gICAgICAgIGFsbFByb2plY3RzLmZvckVhY2gocHJvamVjdG51bWJlciA9PiB7XG4gICAgICAgICAgICBpZiAocHJvamVjdG51bWJlci5zZWxlY3RlZCA9PT0gdHJ1ZSkge1xuXG4gICAgICAgICAgICAgICAgcHJvamVjdG51bWJlci50b2RvbGlzdHMuZm9yRWFjaCh0b2RvbnVtYmVyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdG9kb251bWJlci5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAvLyB0aGlzIG1ha2VzIGFsbCB0aGUgdG9kb3MgaW4gdGhlIHByb2plY3Qgc2VsZWN0ZWQgPSBmYWxzZS4gb2suXG5cbiAgICAgICAgbGV0IGNoaWxkcmVuID0gdG9kb2xpc3RzLmxhc3RFbGVtZW50Q2hpbGQ7XG4gICAgICAgIHdoaWxlIChjaGlsZHJlbikge1xuICAgICAgICB0b2RvbGlzdHMucmVtb3ZlQ2hpbGQoY2hpbGRyZW4pO1xuICAgICAgICBjaGlsZHJlbiA9IHRvZG9saXN0cy5sYXN0RWxlbWVudENoaWxkO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZGVzaWduRW1wdHlUb2RvID0gKCkgPT4ge1xuXG4gICAgICAgIGNsZWFyQWxsVG9kb1NlbGVjdG9ycygpO1xuXG4gICAgICAgIGFkZHRvZG9idXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICBhZGR0b2RvYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJvbmxpbmVcIik7XG4gICAgICAgIGFkZHRvZG9idXR0b24uY2xhc3NMaXN0LmFkZChcIm9mZmxpbmVcIik7XG5cbiAgICAgICAgZGVsZXRlYnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIGRlbGV0ZWJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwib2ZmbGluZVwiKTtcbiAgICAgICAgZGVsZXRlYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJvbmxpbmVcIik7XG4gICAgICAgIC8vIGVkaXRidXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgLy8gZWRpdGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwib2ZmbGluZVwiKTtcbiAgICAgICAgLy8gZWRpdGJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwib25saW5lXCIpO1xuICAgICAgICBzYXZlYnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIHNhdmVidXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm9mZmxpbmVcIik7XG4gICAgICAgIHNhdmVidXR0b24uY2xhc3NMaXN0LmFkZChcIm9ubGluZVwiKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHRlbXBwcm9qZWN0dGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3B0aXRsZVwiKTtcbiAgICAgICAgdGVtcHByb2plY3R0aXRsZS5zZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIiwgdHJ1ZSk7XG5cbiAgICAgICAgbGV0IGNhcmRudW1iZXIgPSB4Kys7IFxuICAgICAgICBcbiAgICAgICAgY29uc3QgdG9kb2NhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0b2RvY2FyZC5jbGFzc0xpc3QuYWRkKFwidG9kb2NhcmRcIik7XG4gICAgICAgIHRvZG9jYXJkLmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZHRvZG9cIik7XG4gICAgICAgIHRvZG9jYXJkLnNldEF0dHJpYnV0ZShcImlkXCIsY2FyZG51bWJlcik7XG4gICAgICAgIHRvZG9saXN0cy5hcHBlbmRDaGlsZCh0b2RvY2FyZCk7XG5cbiAgICAgICAgY29uc3QgdG9kb3RpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgzXCIpO1xuICAgICAgICB0b2RvdGl0bGUuY2xhc3NMaXN0LmFkZChcInRvZG90aXRsZVwiKTtcbiAgICAgICAgdG9kb3RpdGxlLnNldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiLCBcInRydWVcIik7XG4gICAgICAgIHRvZG90aXRsZS50ZXh0Q29udGVudCA9IFwiR2l2ZSB5b3VyIHRvZG8gYSB0aXRsZVwiXG4gICAgICAgIHRvZG9jYXJkLmFwcGVuZENoaWxkKHRvZG90aXRsZSk7XG5cbiAgICAgICAgY29uc3QgdG9kb2Rlc2MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgdG9kb2Rlc2MuY2xhc3NMaXN0LmFkZChcInRvZG9kZXNjXCIpO1xuICAgICAgICB0b2RvZGVzYy5zZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIiwgXCJ0cnVlXCIpO1xuICAgICAgICB0b2RvY2FyZC5hcHBlbmRDaGlsZCh0b2RvZGVzYyk7XG5cbiAgICAgICAgY29uc3QgcmFkaW9idXR0b25zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgcmFkaW9idXR0b25zLmNsYXNzTGlzdC5hZGQoXCJyYWRpb2J1dHRvbnNcIik7XG4gICAgICAgIHRvZG9jYXJkLmFwcGVuZENoaWxkKHJhZGlvYnV0dG9ucyk7XG4gICAgICAgIGNvbnN0IHByaW90aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICBwcmlvdGl0bGUuY2xhc3NMaXN0LmFkZChcInByaW90aXRsZVwiKTtcbiAgICAgICAgcHJpb3RpdGxlLnRleHRDb250ZW50ID0gXCJQcmlvcml0eTpcIjtcbiAgICAgICAgcmFkaW9idXR0b25zLmFwcGVuZENoaWxkKHByaW90aXRsZSk7XG4gICAgICAgIGNvbnN0IHRvZG9wcmlvbG93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICB0b2RvcHJpb2xvdy5jbGFzc0xpc3QuYWRkKFwidG9kb3ByaW9sb3dcIik7XG4gICAgICAgIHRvZG9wcmlvbG93LnNldEF0dHJpYnV0ZShcImlkXCIsXCJwcmlvXCIpO1xuICAgICAgICB0b2RvcHJpb2xvdy5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsXCJwcmlvXCIpO1xuICAgICAgICB0b2RvcHJpb2xvdy5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJyYWRpb1wiKTtcbiAgICAgICAgdG9kb3ByaW9sb3cuc2V0QXR0cmlidXRlKFwidmFsdWVcIixcImxvd1wiKTtcbiAgICAgICAgcmFkaW9idXR0b25zLmFwcGVuZENoaWxkKHRvZG9wcmlvbG93KTtcbiAgICAgICAgY29uc3QgdG9kb3ByaW9sb3dsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICAgICAgdG9kb3ByaW9sb3dsYWJlbC50ZXh0Q29udGVudCA9IFwiTG93XCI7XG4gICAgICAgIHRvZG9wcmlvbG93bGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwibG93XCIpO1xuICAgICAgICByYWRpb2J1dHRvbnMuYXBwZW5kQ2hpbGQodG9kb3ByaW9sb3dsYWJlbCk7XG4gICAgICAgIGNvbnN0IHRvZG9wcmlvbWVkaXVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICB0b2RvcHJpb21lZGl1bS5jbGFzc0xpc3QuYWRkKFwidG9kb3ByaW9tZWRpdW1cIik7XG4gICAgICAgIHRvZG9wcmlvbWVkaXVtLnNldEF0dHJpYnV0ZShcImlkXCIsXCJwcmlvXCIpO1xuICAgICAgICB0b2RvcHJpb21lZGl1bS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsXCJwcmlvXCIpO1xuICAgICAgICB0b2RvcHJpb21lZGl1bS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJyYWRpb1wiKTtcbiAgICAgICAgdG9kb3ByaW9tZWRpdW0uc2V0QXR0cmlidXRlKFwidmFsdWVcIixcIm1lZGl1bVwiKTtcbiAgICAgICAgcmFkaW9idXR0b25zLmFwcGVuZENoaWxkKHRvZG9wcmlvbWVkaXVtKTtcbiAgICAgICAgY29uc3QgdG9kb3ByaW9tZWRpdW1sYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICAgICAgdG9kb3ByaW9tZWRpdW1sYWJlbC50ZXh0Q29udGVudCA9IFwiTWVkaXVtXCI7XG4gICAgICAgIHRvZG9wcmlvbWVkaXVtbGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwibWVkaXVtXCIpO1xuICAgICAgICByYWRpb2J1dHRvbnMuYXBwZW5kQ2hpbGQodG9kb3ByaW9tZWRpdW1sYWJlbCk7XG4gICAgICAgIGNvbnN0IHRvZG9wcmlvaGlnaCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgdG9kb3ByaW9oaWdoLmNsYXNzTGlzdC5hZGQoXCJ0b2RvcHJpb2hpZ2hcIik7XG4gICAgICAgIHRvZG9wcmlvaGlnaC5zZXRBdHRyaWJ1dGUoXCJpZFwiLFwicHJpb1wiKTtcbiAgICAgICAgdG9kb3ByaW9oaWdoLnNldEF0dHJpYnV0ZShcIm5hbWVcIixcInByaW9cIik7XG4gICAgICAgIHRvZG9wcmlvaGlnaC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJyYWRpb1wiKTtcbiAgICAgICAgdG9kb3ByaW9oaWdoLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsXCJoaWdoXCIpO1xuICAgICAgICByYWRpb2J1dHRvbnMuYXBwZW5kQ2hpbGQodG9kb3ByaW9oaWdoKTtcbiAgICAgICAgY29uc3QgdG9kb3ByaW9oaWdobGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgICAgIHRvZG9wcmlvaGlnaGxhYmVsLnRleHRDb250ZW50ID0gXCJIaWdoXCI7XG4gICAgICAgIHRvZG9wcmlvaGlnaGxhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcImhpZ2hcIik7XG4gICAgICAgIHJhZGlvYnV0dG9ucy5hcHBlbmRDaGlsZCh0b2RvcHJpb2hpZ2hsYWJlbCk7XG5cbiAgICAgICAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGRhdGUuY2xhc3NMaXN0LmFkZChcImRhdGVcIik7XG4gICAgICAgIHRvZG9jYXJkLmFwcGVuZENoaWxkKGRhdGUpO1xuXG4gICAgICAgIGNvbnN0IGRhdGVsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICAgICAgZGF0ZWxhYmVsLmNsYXNzTGlzdC5hZGQoXCJkYXRlbGFiZWxcIik7XG4gICAgICAgIGRhdGVsYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJkdWVkYXRlXCIpO1xuICAgICAgICBkYXRlbGFiZWwudGV4dENvbnRlbnQgPSBcIkR1ZTogXCJcbiAgICAgICAgZGF0ZS5hcHBlbmRDaGlsZChkYXRlbGFiZWwpO1xuXG4gICAgICAgIGNvbnN0IGR1ZWRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgZHVlZGF0ZS5jbGFzc0xpc3QuYWRkKFwiZHVlZGF0ZVwiKTtcbiAgICAgICAgZHVlZGF0ZS5zZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIiwgXCJ0cnVlXCIpO1xuICAgICAgICBkYXRlLmFwcGVuZENoaWxkKGR1ZWRhdGUpO1xuXG4gICAgICAgIC8vIHVubmVlZGVkLCB1c2luZyB0ZXh0Ym94XG4gICAgICAgIC8vIGNvbnN0IGR1ZWRhdGUgPSAgZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgLy8gZHVlZGF0ZS5jbGFzc0xpc3QuYWRkKFwiZGF0ZVwiKTtcbiAgICAgICAgLy8gdG9kb2NhcmQuYXBwZW5kQ2hpbGQoZHVlZGF0ZSk7XG4gICAgICAgIC8vIGNvbnN0IGRhdGV0aXRsZWxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgICAgICAvLyBkYXRldGl0bGVsYWJlbC5jbGFzc0xpc3QuYWRkKFwiZGF0ZXRpdGxlXCIpO1xuICAgICAgICAvLyBkYXRldGl0bGVsYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJkdWVkYXRlXCIpO1xuICAgICAgICAvLyBkYXRldGl0bGVsYWJlbC50ZXh0Q29udGVudCA9IFwiRHVlIERhdGU6XCI7XG4gICAgICAgIC8vIGR1ZWRhdGUuYXBwZW5kQ2hpbGQoZGF0ZXRpdGxlbGFiZWwpO1xuICAgICAgICAvLyBjb25zdCBkYXRldGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICAgIC8vIGRhdGV0aXRsZS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiZGF0ZVwiKTtcbiAgICAgICAgLy8gZGF0ZXRpdGxlLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiZHVlZGF0ZVwiKTtcbiAgICAgICAgLy8gZGF0ZXRpdGxlLmNsYXNzTGlzdC5hZGQoXCJ0b2RvZHVlZGF0ZVwiKTtcbiAgICAgICAgLy8gLy8gZGF0ZXRpdGxlLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIFwiXCIpO1xuICAgICAgICAvLyBkdWVkYXRlLmFwcGVuZENoaWxkKGRhdGV0aXRsZSk7XG5cbiAgICAgICAgY29uc3QgdG9kb2xpc3QgPSBjcmVhdGVQcm9qZWN0LnRvZG9GYWN0b3J5KFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIHRydWUsIGNhcmRudW1iZXIpO1xuXG4gICAgICAgIGFsbFByb2plY3RzLmZvckVhY2gocHJvamVjdG51bWJlciA9PiB7XG4gICAgICAgICAgICBpZiAocHJvamVjdG51bWJlci5zZWxlY3RlZCA9PT0gdHJ1ZSkge1xuXG4gICAgICAgICAgICAgICAgcHJvamVjdG51bWJlci50b2RvbGlzdHMucHVzaCh0b2RvbGlzdCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocHJvamVjdG51bWJlci50b2RvbGlzdHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGNvbnN0IGRpc3BsYXlQcm9qZWN0c1RvZG9zID0gKCkgPT4ge1xuXG4gICAgICAgIGNsZWFyQWxsVG9kb3MoKTtcblxuICAgICAgICBhbGxQcm9qZWN0cy5mb3JFYWNoKHByb2plY3RudW1iZXIgPT4ge1xuICAgICAgICAgICAgaWYgKHByb2plY3RudW1iZXIuc2VsZWN0ZWQgPT09IHRydWUpIHtcblxuICAgICAgICAgICAgICAgIGlmIChwcm9qZWN0bnVtYmVyLmRlbGV0ZWQgPT09IGZhbHNlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwdGl0bGVcIik7XG4gICAgICAgICAgICAgICAgICAgIHRlbXB0aXRsZS50ZXh0Q29udGVudCA9IHByb2plY3RudW1iZXIubmFtZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0bnVtYmVyLnRvZG9saXN0cy5mb3JFYWNoKHRvZG9saXN0ID0+IHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRvZG9saXN0LmRlbGV0ZWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2RvY2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9jYXJkLmNsYXNzTGlzdC5hZGQoXCJ0b2RvY2FyZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gdG9kb2NhcmQuY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkdG9kb1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdG9kb2NhcmQuc2V0QXR0cmlidXRlKFwiaWRcIiwgdG9kb2xpc3QuaWQpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvbGlzdHMuYXBwZW5kQ2hpbGQodG9kb2NhcmQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvZG90aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoM1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdG9kb3RpdGxlLmNsYXNzTGlzdC5hZGQoXCJ0b2RvdGl0bGVcIik7XG4gICAgICAgICAgICAgICAgICAgIHRvZG90aXRsZS5zZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIiwgXCJmYWxzZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgdG9kb3RpdGxlLnRleHRDb250ZW50ID0gdG9kb2xpc3QudGl0bGVcbiAgICAgICAgICAgICAgICAgICAgdG9kb2NhcmQuYXBwZW5kQ2hpbGQodG9kb3RpdGxlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2RvZGVzYyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvZGVzYy5jbGFzc0xpc3QuYWRkKFwidG9kb2Rlc2NcIik7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9kZXNjLnNldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiLCBcImZhbHNlXCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvZGVzYy50ZXh0Q29udGVudCA9IHRvZG9saXN0LmRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgICAgICB0b2RvY2FyZC5hcHBlbmRDaGlsZCh0b2RvZGVzYyk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmFkaW9idXR0b25zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmFkaW9idXR0b25zLmNsYXNzTGlzdC5hZGQoXCJyYWRpb2J1dHRvbnNcIik7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9jYXJkLmFwcGVuZENoaWxkKHJhZGlvYnV0dG9ucyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByaW90aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICAgICAgICAgICAgICBwcmlvdGl0bGUuY2xhc3NMaXN0LmFkZChcInByaW90aXRsZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgcHJpb3RpdGxlLnRleHRDb250ZW50ID0gXCJQcmlvcml0eTpcIjtcbiAgICAgICAgICAgICAgICAgICAgcmFkaW9idXR0b25zLmFwcGVuZENoaWxkKHByaW90aXRsZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvZG9wcmlvbG93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvcHJpb2xvdy5jbGFzc0xpc3QuYWRkKFwidG9kb3ByaW9sb3dcIik7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9wcmlvbG93LnNldEF0dHJpYnV0ZShcImlkXCIsXCJwcmlvXCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvcHJpb2xvdy5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsXCJwcmlvXCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvcHJpb2xvdy5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJyYWRpb1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdG9kb3ByaW9sb3cuc2V0QXR0cmlidXRlKFwidmFsdWVcIixcImxvd1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdG9kb3ByaW9sb3cuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJcIik7XG4gICAgICAgICAgICAgICAgICAgIHJhZGlvYnV0dG9ucy5hcHBlbmRDaGlsZCh0b2RvcHJpb2xvdyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvZG9wcmlvbG93bGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9wcmlvbG93bGFiZWwudGV4dENvbnRlbnQgPSBcIkxvd1wiO1xuICAgICAgICAgICAgICAgICAgICB0b2RvcHJpb2xvd2xhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcImxvd1wiKTtcbiAgICAgICAgICAgICAgICAgICAgcmFkaW9idXR0b25zLmFwcGVuZENoaWxkKHRvZG9wcmlvbG93bGFiZWwpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2RvcHJpb21lZGl1bSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgICAgICAgICAgICAgdG9kb3ByaW9tZWRpdW0uY2xhc3NMaXN0LmFkZChcInRvZG9wcmlvbWVkaXVtXCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvcHJpb21lZGl1bS5zZXRBdHRyaWJ1dGUoXCJpZFwiLFwicHJpb1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdG9kb3ByaW9tZWRpdW0uc2V0QXR0cmlidXRlKFwibmFtZVwiLFwicHJpb1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdG9kb3ByaW9tZWRpdW0uc2V0QXR0cmlidXRlKFwidHlwZVwiLFwicmFkaW9cIik7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9wcmlvbWVkaXVtLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsXCJtZWRpdW1cIik7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9wcmlvbWVkaXVtLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICByYWRpb2J1dHRvbnMuYXBwZW5kQ2hpbGQodG9kb3ByaW9tZWRpdW0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2RvcHJpb21lZGl1bWxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvcHJpb21lZGl1bWxhYmVsLnRleHRDb250ZW50ID0gXCJNZWRpdW1cIjtcbiAgICAgICAgICAgICAgICAgICAgdG9kb3ByaW9tZWRpdW1sYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJtZWRpdW1cIik7XG4gICAgICAgICAgICAgICAgICAgIHJhZGlvYnV0dG9ucy5hcHBlbmRDaGlsZCh0b2RvcHJpb21lZGl1bWxhYmVsKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9kb3ByaW9oaWdoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvcHJpb2hpZ2guY2xhc3NMaXN0LmFkZChcInRvZG9wcmlvaGlnaFwiKTtcbiAgICAgICAgICAgICAgICAgICAgdG9kb3ByaW9oaWdoLnNldEF0dHJpYnV0ZShcImlkXCIsXCJwcmlvXCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvcHJpb2hpZ2guc2V0QXR0cmlidXRlKFwibmFtZVwiLFwicHJpb1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdG9kb3ByaW9oaWdoLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInJhZGlvXCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvcHJpb2hpZ2guc2V0QXR0cmlidXRlKFwidmFsdWVcIixcImhpZ2hcIik7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9wcmlvaGlnaC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmFkaW9idXR0b25zLmFwcGVuZENoaWxkKHRvZG9wcmlvaGlnaCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvZG9wcmlvaGlnaGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvcHJpb2hpZ2hsYWJlbC50ZXh0Q29udGVudCA9IFwiSGlnaFwiO1xuICAgICAgICAgICAgICAgICAgICB0b2RvcHJpb2hpZ2hsYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJoaWdoXCIpO1xuICAgICAgICAgICAgICAgICAgICByYWRpb2J1dHRvbnMuYXBwZW5kQ2hpbGQodG9kb3ByaW9oaWdobGFiZWwpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0b2RvbGlzdC5wcmlvcml0eSA9PT0gXCJsb3dcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9kb3ByaW9sb3cuc2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiLCBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0b2RvbGlzdC5wcmlvcml0eSA9PT0gXCJtZWRpdW1cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9kb3ByaW9tZWRpdW0uc2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiLCBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0b2RvbGlzdC5wcmlvcml0eSA9PT0gXCJoaWdoXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZG9wcmlvaGlnaC5zZXRBdHRyaWJ1dGUoXCJjaGVja2VkXCIsIFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIGRhdGUuY2xhc3NMaXN0LmFkZChcImRhdGVcIik7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9jYXJkLmFwcGVuZENoaWxkKGRhdGUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICAgICAgICAgICAgICAgICAgZGF0ZWxhYmVsLmNsYXNzTGlzdC5hZGQoXCJkYXRlbGFiZWxcIik7XG4gICAgICAgICAgICAgICAgICAgIGRhdGVsYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJkdWVkYXRlXCIpO1xuICAgICAgICAgICAgICAgICAgICBkYXRlbGFiZWwudGV4dENvbnRlbnQgPSBcIkR1ZTogXCJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZS5hcHBlbmRDaGlsZChkYXRlbGFiZWwpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGR1ZWRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgICAgICAgICAgICAgZHVlZGF0ZS5jbGFzc0xpc3QuYWRkKFwiZHVlZGF0ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgZHVlZGF0ZS5zZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIiwgXCJmYWxzZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgZHVlZGF0ZS50ZXh0Q29udGVudCA9IHRvZG9saXN0LmR1ZWRhdGU7XG4gICAgICAgICAgICAgICAgICAgIGRhdGUuYXBwZW5kQ2hpbGQoZHVlZGF0ZSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgIH1cblxuICAgIGNvbnN0IGRlbGV0ZVRvZG8gPSAoKSA9PiB7XG4gICAgICAgIGFsbFByb2plY3RzLmZvckVhY2gocHJvamVjdG51bWJlciA9PiB7XG4gICAgICAgICAgICBpZiAocHJvamVjdG51bWJlci5zZWxlY3RlZCA9PT0gdHJ1ZSkge1xuXG4gICAgICAgICAgICAgICAgcHJvamVjdG51bWJlci50b2RvbGlzdHMuZm9yRWFjaCh0b2RvbnVtYmVyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvZG9udW1iZXIuc2VsZWN0ZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXB0b2RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZWxlY3RlZHRvZG9cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wdG9kby5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZG9udW1iZXIuZGVsZXRlZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vdCBzcGxpY2luZyEgcHJvamVjdG51bWJlci50b2RvbGlzdHMuU3BsaWNlKHRvZG9udW1iZXIuaWQpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRvZG9udW1iZXIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGR0b2RvYnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGR0b2RvYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJvbmxpbmVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGR0b2RvYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJvZmZsaW5lXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZWJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZWJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwib2ZmbGluZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVidXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm9ubGluZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgZGVsZXRlYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgZGVsZXRlYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJvZmZsaW5lXCIpO1xuICAgICAgICBkZWxldGVidXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm9ubGluZVwiKTtcbiAgICAgICAgLy8gZWRpdGJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIC8vIGVkaXRidXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm9ubGluZVwiKTtcbiAgICAgICAgLy8gZWRpdGJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwib2ZmbGluZVwiKTtcbiAgICB9XG5cbiAgICAvLyBTQVZJTkcgSlNPTiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAgIGNvbnN0IHBvcHVsYXRlU3RvcmFnZSA9ICgpID0+IHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJhbGxwcm9qZWN0c1wiLCBhbGxQcm9qZWN0cyk7XG4gICAgICAgIHNldFN0eWxlcygpO1xuICAgIH1cblxuICAgIGNvbnN0IHNldFN0eWxlcyA9ICgpID0+IHtcblxuICAgICAgICAvLyBhbGxQcm9qZWN0cyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiYWxscHJvamVjdHNcIik7IFxuICAgIC8vICAgICBjb25zb2xlLmxvZyhhbGxQcm9qZWN0cyk7IFdIQVQnUyBXUk9ORyBXSVRIIFRIRSBBQk9WRSBMSU5FXG4gICAgfVxuXG4gICAgaWYgKCFsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImFsbHByb2plY3RzXCIpKSB7XG4gICAgICAgIHBvcHVsYXRlU3RvcmFnZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICBzZXRTdHlsZXMoKTtcbiAgICAgICAgfVxuICAgIFxuXG5cbiAgICAvLyBFVkVOVExJU1RFTkVSU1xuXG4gICAgcHJvamVjdExpc3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNlbGVjdFByb2plY3QpO1xuICAgIHRvZG9saXN0cy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2VsZWN0VG9kbyk7XG4gICAgc2F2ZWJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2F2ZVRvZG8pO1xuICAgIGRlbGV0ZWJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZGVsZXRlVG9kbyk7XG4gICAgZWRpdGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZWRpdFRvZG8pO1xuICAgIGRlbHByb2plY3RidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGRlbGV0ZVByb2plY3QpO1xuICAgIC8vIGVkaXRwcm9qZWN0YnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlZGl0UHJvamVjdCk7XG4gICAgXG4gICAgLy8gc2F2ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcG9wdWxhdGVTdG9yYWdlKTtcbiAgICAvLyB1cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHVwbG9hZFN0b3JhZ2UpO1xuXG4gICAgcmV0dXJuIHsgYWRkUHJvamVjdCwgZGVzaWduRW1wdHlUb2RvLCBhbGxQcm9qZWN0c307XG5cbiBcbn0pKCk7XG5cbmV4cG9ydCB7ZGVzaWduUHJvamVjdH07IiwiaW1wb3J0IHtkZXNpZ25Qcm9qZWN0fSBmcm9tIFwiLi4vc3JjL2Rlc2lnblwiXG5cbmNvbnN0IGNyZWF0ZVByb2plY3QgPSAoKCkgPT4ge1xuXG4gICAgY29uc3QgUHJvamVjdHMgPSBbXTtcblxuICAgIFxuXG4gICAgY29uc3QgcHJvamVjdEZhY3RvcnkgPSAobmFtZSwgc2VsZWN0ZWQsIGlkKSA9PiB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB0b2RvbGlzdHMgPSBbXTtcbiAgICAgICAgbGV0IGRlbGV0ZWQgPSBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7IG5hbWUsIHNlbGVjdGVkLCB0b2RvbGlzdHMsIGlkLCBkZWxldGVkfTtcbiAgICB9XG5cbiAgICBjb25zdCB0b2RvRmFjdG9yeSA9ICh0aXRsZSwgZGVzY3JpcHRpb24sIHByaW9yaXR5LCBkdWVkYXRlLCBzZWxlY3RlZCwgaWQpID0+IHtcblxuICAgICAgICBsZXQgZGVsZXRlZCA9IGZhbHNlO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHsgdGl0bGUsIGRlc2NyaXB0aW9uLCBwcmlvcml0eSwgZHVlZGF0ZSwgc2VsZWN0ZWQsIGlkLCBkZWxldGVkfTtcbiAgICB9XG5cblxuICAgIC8vIGNvbnN0IGFkZFRvZG8gPSAoc2VsZWN0ZWRQcm9qZWN0KSA9PiB7XG4gICAgLy8gICAgIGNvbnNvbGUubG9nKFwiY3J5XCIpO1xuICAgIC8vIH1cblxuICAgIFxuXG4gICAgcmV0dXJuIHsgcHJvamVjdEZhY3RvcnksIFByb2plY3RzLCB0b2RvRmFjdG9yeSB9O1xuXG59KSgpO1xuXG5cblxuZXhwb3J0IHtjcmVhdGVQcm9qZWN0fTsiLCJpbXBvcnQge2NyZWF0ZVByb2plY3R9IGZyb20gXCIuLi9zcmMvbG9naWNcIlxuaW1wb3J0IHtkZXNpZ25Qcm9qZWN0fSBmcm9tIFwiLi4vc3JjL2Rlc2lnblwiXG5cblxuXG5jb25zdCBhZGRQcm9qZWN0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjcmVhdGVwcm9qZWN0XCIpO1xuYWRkUHJvamVjdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZGVzaWduUHJvamVjdC5hZGRQcm9qZWN0KTtcblxuY29uc3QgYWRkdG9kb2J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkdG9kb1wiKTtcbmFkZHRvZG9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGRlc2lnblByb2plY3QuZGVzaWduRW1wdHlUb2RvKTtcblxuY29uc3QgcHJvamVjdCA9IGNyZWF0ZVByb2plY3QucHJvamVjdEZhY3RvcnkoXCJHZW5lcmFsXCIsIHRydWUsIDApO1xuZGVzaWduUHJvamVjdC5hbGxQcm9qZWN0cy5wdXNoKHByb2plY3QpO1xuLy8gYWRkUHJvamVjdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuLy8gICAgIGNvbnNvbGUubG9nKFwidGVzdGluZzJcIilcbi8vIH0pO1xuXG5cbiJdLCJuYW1lcyI6WyJkZXNpZ25Qcm9qZWN0IiwiYWxsUHJvamVjdHMiLCJ4IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicHJvamVjdExpc3QiLCJ0b2RvbGlzdHMiLCJzYXZlYnV0dG9uIiwiZGlzYWJsZWQiLCJhZGR0b2RvYnV0dG9uIiwiZGVsZXRlYnV0dG9uIiwiZWRpdGJ1dHRvbiIsImRlbHByb2plY3RidXR0b24iLCJjbGVhckFsbFNlbGVjdG9ycyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwic2VsZWN0b3IiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJwcm9qZWN0bnVtYmVyIiwic2VsZWN0ZWQiLCJjbGVhckFsbFRvZG9TZWxlY3RvcnMiLCJ0b2RvbnVtYmVyIiwic2VsZWN0ZWR0b2RvIiwiY2xlYXJBbGxUb2RvcyIsImNoaWxkcmVuIiwibGFzdEVsZW1lbnRDaGlsZCIsInJlbW92ZUNoaWxkIiwic2V0U3R5bGVzIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInNldEl0ZW0iLCJhZGRFdmVudExpc3RlbmVyIiwicHJvamVjdCIsInRhcmdldCIsImFkZCIsImNvbnNvbGUiLCJsb2ciLCJwcm9qZWN0aWQiLCJnZXRBdHRyaWJ1dGUiLCJpZCIsImRlbGV0ZWQiLCJ0ZXh0Q29udGVudCIsIm5hbWUiLCJ0b2RvbGlzdCIsInRvZG9jYXJkIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImFwcGVuZENoaWxkIiwidG9kb3RpdGxlIiwidGl0bGUiLCJ0b2RvZGVzYyIsImRlc2NyaXB0aW9uIiwicmFkaW9idXR0b25zIiwicHJpb3RpdGxlIiwidG9kb3ByaW9sb3ciLCJ0b2RvcHJpb2xvd2xhYmVsIiwidG9kb3ByaW9tZWRpdW0iLCJ0b2RvcHJpb21lZGl1bWxhYmVsIiwidG9kb3ByaW9oaWdoIiwidG9kb3ByaW9oaWdobGFiZWwiLCJwcmlvcml0eSIsImRhdGUiLCJkYXRlbGFiZWwiLCJkdWVkYXRlIiwidG9kbyIsIm5vZGV0ZXN0IiwidGVzdCIsInRlc3RpZCIsIm5vZGV0ZXN0MyIsInBhcmVudE5vZGUiLCJ0ZXN0MyIsInRlc3QzaWQiLCJub2RldGVzdDQiLCJ0ZXN0NGlkIiwidG9kb2xpc3RudW1iZXIiLCJ0ZXN0MiIsInRlbXBwcm9qZWN0dGl0bGUiLCJ0ZW1wdGl0bGUiLCJ0ZW1wZGVzYyIsInJhZGlvIiwidGVtcHRvZG8iLCJmaXJzdENoaWxkIiwiY2hpbGROb2RlcyIsImkiLCJsZW5ndGgiLCJjaGVja2VkIiwidmFsdWUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJyYWRpb2J1dHRvbiIsInRlbXB0b2RvbGlzdHMiLCJ0ZW1wcHJvamVjdHMiLCJwcm9qZWN0Y2hpbGRyZW4iLCJuZXdQcm9qZWN0TGFiZWwiLCJhZGRQcm9qZWN0IiwiY3JlYXRlUHJvamVjdCIsInByb2plY3RGYWN0b3J5IiwicHVzaCIsImRlc2lnbkVtcHR5VG9kbyIsImNhcmRudW1iZXIiLCJ0b2RvRmFjdG9yeSIsIlByb2plY3RzIl0sInNvdXJjZVJvb3QiOiIifQ==