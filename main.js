(()=>{"use strict";const e=(()=>{let e=[],d=0,o=1;document.querySelector(".sidebartop");const s=document.querySelector(".projectList"),l=document.querySelector(".todolists"),i=document.querySelector(".savebutton");i.disabled=!0;const c=document.querySelector(".addtodo");c.disabled=!0;const a=document.querySelector(".deletetodo");a.disabled=!0;const n=document.querySelector(".edittodo");n.disabled=!0;const r=document.querySelector("#deleteproject"),u=(document.querySelector("#editproject"),()=>{e.forEach((e=>{if(!1===e.deleted){const t=document.createElement("h2");t.textContent=e.name,t.classList.add("selector"),t.setAttribute("id",e.id),s.appendChild(t)}}))}),m=()=>{document.querySelectorAll(".selected").forEach((e=>{e.classList.remove("selected")})),e.forEach((e=>{e.selected=!1}))},p=()=>{e.forEach((e=>{!0===e.selected&&e.todolists.forEach((e=>{e.selected=!1}))})),document.querySelectorAll(".selectedtodo").forEach((e=>{e.classList.remove("selectedtodo")}))},b=()=>{e.forEach((e=>{!0===e.selected&&e.todolists.forEach((e=>{e.selected=!1}))}));let t=l.lastElementChild;for(;t;)l.removeChild(t),t=l.lastElementChild};return localStorage.getItem("allprojects")&&(console.log(localStorage),e=JSON.parse(localStorage.getItem("allprojects")),console.log(localStorage),u()),s.addEventListener("click",(t=>{m(),p(),t.target.classList.add("selected"),console.log(t.target),console.log(e);let d=t.target.getAttribute("id");console.log(d),e.forEach((t=>{t.id==d&&(t.selected=!0,b(),e.forEach((e=>{!0===e.selected&&!1===e.deleted&&(document.querySelector("#ptitle").textContent=e.name,e.todolists.forEach((e=>{if(!1===e.deleted){const t=document.createElement("div");t.classList.add("todocard"),t.setAttribute("id",e.id),l.appendChild(t);const d=document.createElement("h3");d.classList.add("todotitle"),d.setAttribute("contenteditable","false"),d.textContent=e.title,t.appendChild(d);const o=document.createElement("p");o.classList.add("tododesc"),o.setAttribute("contenteditable","false"),o.textContent=e.description,t.appendChild(o);const s=document.createElement("div");s.classList.add("radiobuttons"),t.appendChild(s);const i=document.createElement("p");i.classList.add("priotitle"),i.textContent="Priority:",s.appendChild(i);const c=document.createElement("input");c.classList.add("todopriolow"),c.setAttribute("id","prio"),c.setAttribute("name","prio"),c.setAttribute("type","radio"),c.setAttribute("value","low"),s.appendChild(c);const a=document.createElement("label");a.textContent="Low",a.setAttribute("for","low"),s.appendChild(a);const n=document.createElement("input");n.classList.add("todopriomedium"),n.setAttribute("id","prio"),n.setAttribute("name","prio"),n.setAttribute("type","radio"),n.setAttribute("value","medium"),s.appendChild(n);const r=document.createElement("label");r.textContent="Medium",r.setAttribute("for","medium"),s.appendChild(r);const u=document.createElement("input");u.classList.add("todopriohigh"),u.setAttribute("id","prio"),u.setAttribute("name","prio"),u.setAttribute("type","radio"),u.setAttribute("value","high"),s.appendChild(u);const m=document.createElement("label");m.textContent="High",m.setAttribute("for","high"),s.appendChild(m),"low"===e.priority?(c.setAttribute("checked",""),n.setAttribute("disabled",""),u.setAttribute("disabled","")):"medium"===e.priority?(n.setAttribute("checked",""),c.setAttribute("disabled",""),u.setAttribute("disabled","")):"high"===e.priority&&(c.setAttribute("disabled",""),n.setAttribute("disabled",""),u.setAttribute("checked",""));const p=document.createElement("div");p.classList.add("date"),t.appendChild(p);const b=document.createElement("label");b.classList.add("datelabel"),b.setAttribute("for","duedate"),b.textContent="Due: ",p.appendChild(b);const h=document.createElement("p");h.classList.add("duedate"),h.setAttribute("contenteditable","false"),h.textContent=e.duedate,p.appendChild(h)}})))})))}))})),l.addEventListener("click",(t=>{console.log(t.target),p();let d=t.target,o=d.getAttribute("class"),s=d.getAttribute("id"),l=t.target.parentNode,i=l.getAttribute("class"),c=l.getAttribute("id"),r=l.parentNode,u=(r.getAttribute("class"),r.getAttribute("id"));if(e.forEach((e=>{!0===e.selected&&e.todolists.forEach((e=>{e.id!=s&&e.id!=c&&e.id!=u||(e.selected=!0)}))})),console.log(e),"todolists"===o);else if("todocard"===o)console.log(o),t.target.classList.add("selectedtodo"),console.log("it's done via child.");else if("radiobuttons"===i)t.target.parentNode.parentNode.classList.add("selectedtodo"),console.log("a fucking annoying ass radio button element was pressed.");else if("date"===i)t.target.parentNode.parentNode.classList.add("selectedtodo"),console.log("a fucking annoying ass duedate shit element was pressed.");else{let e=t.target;console.log(t.target.parentNode),e.parentNode.classList.add("selectedtodo"),console.log("it's done via parent.")}n.disabled=!1,n.classList.add("online"),n.classList.remove("offline"),a.disabled=!1,a.classList.add("online"),a.classList.remove("offline")})),i.addEventListener("click",(()=>{e.forEach((e=>{if(!0===e.selected){const t=document.querySelector("#ptitle");e.name=t.textContent,document.querySelector(".selected").textContent=e.name,t.setAttribute("contenteditable","false"),e.todolists.forEach((e=>{if(!0===e.selected){document.querySelectorAll(".todotitle").forEach((e=>{e.setAttribute("contenteditable","false")})),document.querySelectorAll(".tododesc").forEach((e=>{e.setAttribute("contenteditable","false")})),document.querySelectorAll("input").forEach((e=>{e.setAttribute("disabled","")})),document.querySelectorAll(".date").forEach((e=>{e.setAttribute("contenteditable","false")}));const t=document.querySelector(".selectedtodo");e.title=t.firstChild.textContent,e.description=t.childNodes[1].textContent;for(let d=0;d<t.childNodes[2].childNodes.length;d++)t.childNodes[2].childNodes[d].checked&&(console.log(t.childNodes[2].childNodes[d]),e.priority=t.childNodes[2].childNodes[d].value,t.childNodes[2].childNodes[d].removeAttribute("disabled",""));e.duedate=t.childNodes[3].childNodes[1].textContent,console.log(e)}})),i.disabled=!0,i.classList.remove("online"),i.classList.add("offline"),c.disabled=!1,c.classList.add("online"),c.classList.remove("offline"),n.disabled=!1,n.classList.add("online"),n.classList.remove("offline")}}))})),a.addEventListener("click",(()=>{e.forEach((e=>{!0===e.selected&&e.todolists.forEach((e=>{!0===e.selected&&(document.querySelector(".selectedtodo").remove(),e.deleted=!0,console.log(e),c.disabled=!1,c.classList.add("online"),c.classList.remove("offline"),i.disabled=!1,i.classList.add("offline"),i.classList.remove("online"))}))})),a.disabled=!0,a.classList.add("offline"),a.classList.remove("online")})),n.addEventListener("click",(()=>{e.forEach((e=>{!0===e.selected&&(document.querySelector("#ptitle").setAttribute("contenteditable",!0),e.todolists.forEach((e=>{if(!0===e.selected){c.disabled=!0,c.classList.remove("online"),c.classList.add("offline"),i.disabled=!1,i.classList.add("online"),i.classList.remove("offline"),s.disabled=!0,l.disabled=!0;const e=document.querySelector(".selectedtodo");e.firstChild.setAttribute("contenteditable","true"),e.childNodes[1].setAttribute("contenteditable","true"),e.querySelectorAll("input").forEach((e=>{e.removeAttribute("disabled")})),e.querySelector(".duedate").setAttribute("contenteditable","true")}})))}))})),r.addEventListener("click",(()=>{e.forEach((e=>{if(!0===e.selected){const t=document.querySelector(".todolists");let d=t.lastElementChild;for(;d;)t.removeChild(d),d=t.lastElementChild;document.querySelector("#ptitle").textContent="Select a project";const o=document.querySelector(".projectList");let s=o.lastElementChild;for(;s;)o.removeChild(s),s=o.lastElementChild;e.selected=!1,e.deleted=!0,u()}}))})),save.addEventListener("click",(()=>{localStorage.setItem("allprojects",JSON.stringify(e)),console.log(localStorage)})),{addProject:()=>{b(),m();let o=d++;e.forEach((e=>{e.selected=!1}));const l=t.projectFactory("New Project",!0,o);console.log(l),e.push(l);const r=document.createElement("h2");r.textContent="New Project",r.classList.add("selected"),r.classList.add("selector"),r.setAttribute("id",o),s.appendChild(r),console.log(e),document.querySelector("#ptitle").textContent="New Project",c.disabled=!1,c.classList.add("online"),c.classList.remove("offline"),n.disabled=!0,n.classList.add("offline"),n.classList.remove("online"),a.disabled=!0,a.classList.add("offline"),a.classList.remove("online"),i.disabled=!0,i.classList.add("offline"),i.classList.remove("online")},designEmptyTodo:()=>{p(),c.disabled=!0,c.classList.remove("online"),c.classList.add("offline"),a.disabled=!1,a.classList.remove("offline"),a.classList.add("online"),i.disabled=!1,i.classList.remove("offline"),i.classList.add("online"),document.querySelector("#ptitle").setAttribute("contenteditable",!0);let d=o++;const s=document.createElement("div");s.classList.add("todocard"),s.classList.add("selectedtodo"),s.setAttribute("id",d),l.appendChild(s);const n=document.createElement("h3");n.classList.add("todotitle"),n.setAttribute("contenteditable","true"),n.textContent="Give your todo a title",s.appendChild(n);const r=document.createElement("p");r.classList.add("tododesc"),r.setAttribute("contenteditable","true"),s.appendChild(r);const u=document.createElement("div");u.classList.add("radiobuttons"),s.appendChild(u);const m=document.createElement("p");m.classList.add("priotitle"),m.textContent="Priority:",u.appendChild(m);const b=document.createElement("input");b.classList.add("todopriolow"),b.setAttribute("id","prio"),b.setAttribute("name","prio"),b.setAttribute("type","radio"),b.setAttribute("value","low"),u.appendChild(b);const h=document.createElement("label");h.textContent="Low",h.setAttribute("for","low"),u.appendChild(h);const f=document.createElement("input");f.classList.add("todopriomedium"),f.setAttribute("id","prio"),f.setAttribute("name","prio"),f.setAttribute("type","radio"),f.setAttribute("value","medium"),u.appendChild(f);const L=document.createElement("label");L.textContent="Medium",L.setAttribute("for","medium"),u.appendChild(L);const A=document.createElement("input");A.classList.add("todopriohigh"),A.setAttribute("id","prio"),A.setAttribute("name","prio"),A.setAttribute("type","radio"),A.setAttribute("value","high"),u.appendChild(A);const E=document.createElement("label");E.textContent="High",E.setAttribute("for","high"),u.appendChild(E);const C=document.createElement("div");C.classList.add("date"),s.appendChild(C);const g=document.createElement("label");g.classList.add("datelabel"),g.setAttribute("for","duedate"),g.textContent="Due: ",C.appendChild(g);const y=document.createElement("p");y.classList.add("duedate"),y.setAttribute("contenteditable","true"),C.appendChild(y);const v=t.todoFactory("","","","",!0,d);e.forEach((e=>{!0===e.selected&&(e.todolists.push(v),console.log(e.todolists))}))},allProjects:e}})(),t={projectFactory:(e,t,d)=>({name:e,selected:t,todolists:[],id:d,deleted:!1}),Projects:[],todoFactory:(e,t,d,o,s,l)=>({title:e,description:t,priority:d,duedate:o,selected:s,id:l,deleted:!1})};document.querySelector("#createproject").addEventListener("click",e.addProject),document.querySelector(".addtodo").addEventListener("click",e.designEmptyTodo),document.querySelector(".projectList")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBM0JBLEVBQWNlLFdBRWRmLEVBQWNULFVBQVUrRixLQUFLcEQsR0FDN0JULFFBQVFDLElBQUkxQixFQUFjVCxXQUM5QixHQUNILEVBd01pQ04sY0FHekMsRUExc0JxQixHQ0FoQm1HLEVBNEJLLENBQUVDLGVBdEJjLENBQUNoRixFQUFNVSxFQUFVTixLQUs3QixDQUFFSixPQUFNVSxXQUFVeEIsVUFIUCxHQUdrQmtCLEtBQUlSLFNBRjFCLElBbUJPeUYsU0ExQlIsR0EwQmtCRCxZQWRmLENBQUNwRCxFQUFPRSxFQUFhUyxFQUFVRyxFQUFTcEMsRUFBVU4sS0FJM0QsQ0FBRTRCLFFBQU9FLGNBQWFTLFdBQVVHLFVBQVNwQyxXQUFVTixLQUFJUixTQUZoRCxLQ2JHYixTQUFTQyxjQUFjLGtCQUMvQndDLGlCQUFpQixRQUFTN0MsRUFBY21HLFlBRW5DL0YsU0FBU0MsY0FBYyxZQUMvQndDLGlCQUFpQixRQUFTN0MsRUFBY3VHLGlCQUVsQ25HLFNBQVNDLGNBQWMsZSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9kZXNpZ24uanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2xvZ2ljLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2NyZWF0ZVByb2plY3R9IGZyb20gXCIuLi9zcmMvbG9naWNcIlxuXG5jb25zdCBkZXNpZ25Qcm9qZWN0ID0gKCgpID0+IFxuXG57XG5cbiAgICBcbiAgICBsZXQgYWxsUHJvamVjdHMgPSBbXTtcbiAgICBsZXQgcHJvamVjdFRvZG9zID0gW107XG4gICAgbGV0IHkgPSAwO1xuICAgIGxldCB4ID0gMTtcblxuICAgIGNvbnN0IHNpZGViYXJ0b3AgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNpZGViYXJ0b3BcIik7XG4gICAgY29uc3QgcHJvamVjdExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3RMaXN0XCIpXG4gICAgY29uc3QgdG9kb2xpc3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvbGlzdHNcIik7XG4gICAgY29uc3Qgc2F2ZWJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2F2ZWJ1dHRvblwiKTtcbiAgICBzYXZlYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICBjb25zdCBhZGR0b2RvYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGR0b2RvXCIpO1xuICAgIGFkZHRvZG9idXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIGNvbnN0IGRlbGV0ZWJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGVsZXRldG9kb1wiKTtcbiAgICBkZWxldGVidXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIGNvbnN0IGVkaXRidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXR0b2RvXCIpO1xuICAgIGVkaXRidXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIGNvbnN0IGRlbHByb2plY3RidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RlbGV0ZXByb2plY3RcIik7XG4gICAgY29uc3QgZWRpdHByb2plY3RidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXRwcm9qZWN0XCIpO1xuXG4gICAgLy8gY29uc3Qgc2F2ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc2F2ZVwiKTtcbiAgICAvLyBjb25zdCB1cGxvYWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3VwbG9hZFwiKTtcbiAgICBcbiAgICAvLyBpZiAocHJvamVjdExpc3QuZmlyc3RDaGlsZCA9PT0gdHJ1ZSkge1xuXG4gICAgLy8gfSBlbHNlIHtcblxuICAgIC8vICAgICBjb25zdCBwcm9qZWN0ID0gY3JlYXRlUHJvamVjdC5wcm9qZWN0RmFjdG9yeShcIkdlbmVyYWxcIiwgdHJ1ZSwgMCk7XG4gICAgLy8gICAgIGRlc2lnblByb2plY3QuYWxsUHJvamVjdHMucHVzaChwcm9qZWN0KTtcblxuICAgIC8vICAgICBjb25zdCBmaXJzdHByb2plY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDJcIik7XG4gICAgLy8gICAgIGZpcnN0cHJvamVjdC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcIjBcIik7XG4gICAgLy8gICAgIGZpcnN0cHJvamVjdC5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWRcIik7XG4gICAgLy8gICAgIGZpcnN0cHJvamVjdC5jbGFzc0xpc3QuYWRkKFwic2VsZWN0b3JcIik7XG4gICAgLy8gICAgIGZpcnN0cHJvamVjdC50ZXh0Q29udGVudCA9IFwiR2VuZXJhbFwiO1xuICAgIC8vICAgICBwcm9qZWN0TGlzdC5hcHBlbmRDaGlsZChmaXJzdHByb2plY3QpO1xuICAgIC8vIH1cbiAgIFxuXG5cbiAgICAvLyBQUk9KRUNUIEZVTkNUSU9OUyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgY29uc3QgZGlzcGxheVByb2plY3RzID0gKCkgPT4ge1xuXG4gICAgICAgIGFsbFByb2plY3RzLmZvckVhY2gocHJvamVjdG51bWJlciA9PiB7XG5cbiAgICAgICAgICAgIGlmIChwcm9qZWN0bnVtYmVyLmRlbGV0ZWQgPT09IGZhbHNlKSB7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBuZXdQcm9qZWN0TGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDJcIik7XG4gICAgICAgICAgICAgICAgbmV3UHJvamVjdExhYmVsLnRleHRDb250ZW50ID0gcHJvamVjdG51bWJlci5uYW1lO1xuICAgICAgICAgICAgICAgIG5ld1Byb2plY3RMYWJlbC5jbGFzc0xpc3QuYWRkKFwic2VsZWN0b3JcIik7XG4gICAgICAgICAgICAgICAgbmV3UHJvamVjdExhYmVsLnNldEF0dHJpYnV0ZShcImlkXCIsIHByb2plY3RudW1iZXIuaWQpO1xuICAgICAgICAgICAgICAgIHByb2plY3RMaXN0LmFwcGVuZENoaWxkKG5ld1Byb2plY3RMYWJlbCk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkgXG4gICAgfVxuXG4gICAgY29uc3QgZGVsZXRlUHJvamVjdCA9ICgpID0+IHtcblxuICAgICAgICBhbGxQcm9qZWN0cy5mb3JFYWNoKHByb2plY3RudW1iZXIgPT4ge1xuICAgICAgICAgICAgaWYgKHByb2plY3RudW1iZXIuc2VsZWN0ZWQgPT09IHRydWUpe1xuICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgdGVtcHRvZG9saXN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kb2xpc3RzXCIpO1xuICAgICAgICAgICAgICAgIGxldCBjaGlsZHJlbiA9IHRlbXB0b2RvbGlzdHMubGFzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgICAgICAgICB3aGlsZSAoY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcHRvZG9saXN0cy5yZW1vdmVDaGlsZChjaGlsZHJlbik7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuID0gdGVtcHRvZG9saXN0cy5sYXN0RWxlbWVudENoaWxkO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IHRlbXB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHRpdGxlXCIpO1xuICAgICAgICAgICAgICAgIHRlbXB0aXRsZS50ZXh0Q29udGVudCA9IFwiU2VsZWN0IGEgcHJvamVjdFwiO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBwcm9qZWN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdExpc3RcIik7XG4gICAgICAgICAgICAgICAgbGV0IHByb2plY3RjaGlsZHJlbiA9IHRlbXBwcm9qZWN0cy5sYXN0RWxlbWVudENoaWxkO1xuICAgICAgICAgICAgICAgIHdoaWxlIChwcm9qZWN0Y2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcHByb2plY3RzLnJlbW92ZUNoaWxkKHByb2plY3RjaGlsZHJlbik7XG4gICAgICAgICAgICAgICAgICAgIHByb2plY3RjaGlsZHJlbiA9IHRlbXBwcm9qZWN0cy5sYXN0RWxlbWVudENoaWxkO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHByb2plY3RudW1iZXIuc2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBwcm9qZWN0bnVtYmVyLmRlbGV0ZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgZGlzcGxheVByb2plY3RzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgY29uc3QgYWRkUHJvamVjdCA9ICgpID0+IHtcblxuICAgICAgICBjbGVhckFsbFRvZG9zKCk7XG4gICAgICAgIGNsZWFyQWxsU2VsZWN0b3JzKCk7XG4gICAgICAgIFxuXG4gICAgICAgIGxldCBpID0geSsrXG5cbiAgICAgICAgYWxsUHJvamVjdHMuZm9yRWFjaChwcm9qZWN0bnVtYmVyID0+IHtcbiAgICAgICAgICAgIHByb2plY3RudW1iZXIuc2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgfSlcblxuICAgICAgICBjb25zdCBwcm9qZWN0ID0gY3JlYXRlUHJvamVjdC5wcm9qZWN0RmFjdG9yeShcIk5ldyBQcm9qZWN0XCIsIHRydWUsIGkpO1xuICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0KTtcbiAgICAgICAgXG4gICAgICAgIGFsbFByb2plY3RzLnB1c2gocHJvamVjdCk7XG5cbiAgICAgICAgY29uc3QgbmV3UHJvamVjdExhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgyXCIpO1xuICAgICAgICBuZXdQcm9qZWN0TGFiZWwudGV4dENvbnRlbnQgPSBcIk5ldyBQcm9qZWN0XCI7XG4gICAgICAgIG5ld1Byb2plY3RMYWJlbC5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWRcIik7XG4gICAgICAgIG5ld1Byb2plY3RMYWJlbC5jbGFzc0xpc3QuYWRkKFwic2VsZWN0b3JcIik7XG4gICAgICAgIG5ld1Byb2plY3RMYWJlbC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBpKTtcbiAgICAgICAgcHJvamVjdExpc3QuYXBwZW5kQ2hpbGQobmV3UHJvamVjdExhYmVsKTtcbiAgICAgICAgY29uc29sZS5sb2coYWxsUHJvamVjdHMpO1xuXG4gICAgICAgIGNvbnN0IHRlbXB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHRpdGxlXCIpO1xuICAgICAgICB0ZW1wdGl0bGUudGV4dENvbnRlbnQgPSBcIk5ldyBQcm9qZWN0XCI7XG5cbiAgICAgICAgYWRkdG9kb2J1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICBhZGR0b2RvYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJvbmxpbmVcIik7XG4gICAgICAgIGFkZHRvZG9idXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm9mZmxpbmVcIik7XG4gICAgICAgIGVkaXRidXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICBlZGl0YnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJvZmZsaW5lXCIpO1xuICAgICAgICBlZGl0YnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJvbmxpbmVcIik7XG4gICAgICAgIGRlbGV0ZWJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIGRlbGV0ZWJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwib2ZmbGluZVwiKTtcbiAgICAgICAgZGVsZXRlYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJvbmxpbmVcIik7XG4gICAgICAgIHNhdmVidXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICBzYXZlYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJvZmZsaW5lXCIpO1xuICAgICAgICBzYXZlYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJvbmxpbmVcIik7XG5cblxuICAgIH1cblxuICAgIGNvbnN0IHNlbGVjdFByb2plY3QgPSAocHJvamVjdCkgPT4ge1xuXG4gICAgICAgIGNsZWFyQWxsU2VsZWN0b3JzKCk7XG4gICAgICAgIGNsZWFyQWxsVG9kb1NlbGVjdG9ycygpO1xuICAgICAgICBwcm9qZWN0LnRhcmdldC5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWRcIik7XG5cbiAgICAgICAgY29uc29sZS5sb2cocHJvamVjdC50YXJnZXQpXG4gICAgICAgIGNvbnNvbGUubG9nKGFsbFByb2plY3RzKTtcblxuICAgICAgICBsZXQgcHJvamVjdGlkID0gcHJvamVjdC50YXJnZXQuZ2V0QXR0cmlidXRlKFwiaWRcIik7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0aWQpO1xuXG4gICAgICAgIGFsbFByb2plY3RzLmZvckVhY2gocHJvamVjdG51bWJlciA9PiB7XG4gICAgICAgICAgICBpZiAocHJvamVjdG51bWJlci5pZCA9PSBwcm9qZWN0aWQpIHtcbiAgICAgICAgICAgICAgICBwcm9qZWN0bnVtYmVyLnNlbGVjdGVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIGRpc3BsYXlQcm9qZWN0c1RvZG9zKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICB9XG5cbiAgICBjb25zdCBjbGVhckFsbFNlbGVjdG9ycyA9ICgpID0+IHtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNlbGVjdGVkXCIpO1xuICAgICAgICBzZWxlY3RlZC5mb3JFYWNoKHNlbGVjdG9yID0+IHtcbiAgICAgICAgICAgIHNlbGVjdG9yLmNsYXNzTGlzdC5yZW1vdmUoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgfSlcblxuICAgICAgICBhbGxQcm9qZWN0cy5mb3JFYWNoKHByb2plY3RudW1iZXIgPT4ge1xuICAgICAgICAgICAgcHJvamVjdG51bWJlci5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8vIFRPRE8gRlVOQ1RJT05TIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICBjb25zdCBlZGl0VG9kbyA9ICgpID0+IHtcblxuICAgICAgICBhbGxQcm9qZWN0cy5mb3JFYWNoKHByb2plY3RudW1iZXIgPT4ge1xuICAgICAgICAgICAgaWYgKHByb2plY3RudW1iZXIuc2VsZWN0ZWQgPT09IHRydWUpIHtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBwcm9qZWN0dGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3B0aXRsZVwiKTtcbiAgICAgICAgICAgICAgICB0ZW1wcHJvamVjdHRpdGxlLnNldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiLCB0cnVlKTtcblxuICAgICAgICAgICAgICAgIHByb2plY3RudW1iZXIudG9kb2xpc3RzLmZvckVhY2godG9kb251bWJlciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0b2RvbnVtYmVyLnNlbGVjdGVkID09PSB0cnVlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHRvZG9idXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkdG9kb2J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwib25saW5lXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkdG9kb2J1dHRvbi5jbGFzc0xpc3QuYWRkKFwib2ZmbGluZVwiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZWJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZWJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwib25saW5lXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZWJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwib2ZmbGluZVwiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvamVjdExpc3QuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9kb2xpc3RzLmRpc2FibGVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcHRvZG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlbGVjdGVkdG9kb1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXB0b2RvLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXB0b2RvLmNoaWxkTm9kZXNbMV0uc2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXByYWRpb2J1dHRvbnMgPSB0ZW1wdG9kby5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wcmFkaW9idXR0b25zLmZvckVhY2gocmFkaW9idXR0b24gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmFkaW9idXR0b24ucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBkdWVkYXRlID0gdGVtcHRvZG8ucXVlcnlTZWxlY3RvcihcIi5kdWVkYXRlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGR1ZWRhdGUuc2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgfVxuXG4gICAgY29uc3Qgc2F2ZVRvZG8gPSAoKSA9PiB7XG4gICAgICAgIGFsbFByb2plY3RzLmZvckVhY2gocHJvamVjdG51bWJlciA9PiB7XG4gICAgICAgICAgICBpZiAocHJvamVjdG51bWJlci5zZWxlY3RlZCA9PT0gdHJ1ZSkge1xuXG5cbiAgICAgICAgICAgICAgICBjb25zdCB0ZW1wcHJvamVjdHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwdGl0bGVcIik7XG4gICAgICAgICAgICAgICAgcHJvamVjdG51bWJlci5uYW1lID0gdGVtcHByb2plY3R0aXRsZS50ZXh0Q29udGVudDtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZW1wcHJvamVjdHNpZGViYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgIHRlbXBwcm9qZWN0c2lkZWJhci50ZXh0Q29udGVudCA9IHByb2plY3RudW1iZXIubmFtZTtcbiAgICAgICAgICAgICAgICB0ZW1wcHJvamVjdHRpdGxlLnNldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiLCBcImZhbHNlXCIpO1xuXG4gICAgICAgICAgICAgICAgcHJvamVjdG51bWJlci50b2RvbGlzdHMuZm9yRWFjaCh0b2RvbnVtYmVyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvZG9udW1iZXIuc2VsZWN0ZWQgPT09IHRydWUpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcHRpdGxlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudG9kb3RpdGxlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcHRpdGxlcy5mb3JFYWNoKHRlbXB0aXRsZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcHRpdGxlLnNldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiLCBcImZhbHNlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBkZXNjcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudG9kb2Rlc2NcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wZGVzY3MuZm9yRWFjaCh0ZW1wZGVzYyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGRlc2Muc2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIsIFwiZmFsc2VcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcHJhZGlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcImlucHV0XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcHJhZGlvLmZvckVhY2gocmFkaW8gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhZGlvLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBkYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5kYXRlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGRhdGUuZm9yRWFjaChkYXRlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlLnNldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiLCBcImZhbHNlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcHRvZG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlbGVjdGVkdG9kb1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZG9udW1iZXIudGl0bGUgPSB0ZW1wdG9kby5maXJzdENoaWxkLnRleHRDb250ZW50OyAvL3RpdGxlIGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2RvbnVtYmVyLmRlc2NyaXB0aW9uID0gdGVtcHRvZG8uY2hpbGROb2Rlc1sxXS50ZXh0Q29udGVudDsgLy9kZXNjcmlwdGlvbiBpbnB1dFxuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRlbXB0b2RvLmNoaWxkTm9kZXNbMl0uY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZW1wdG9kby5jaGlsZE5vZGVzWzJdLmNoaWxkTm9kZXNbaV0uY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0ZW1wdG9kby5jaGlsZE5vZGVzWzJdLmNoaWxkTm9kZXNbaV0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZG9udW1iZXIucHJpb3JpdHkgPSB0ZW1wdG9kby5jaGlsZE5vZGVzWzJdLmNoaWxkTm9kZXNbaV0udmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXB0b2RvLmNoaWxkTm9kZXNbMl0uY2hpbGROb2Rlc1tpXS5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZG9udW1iZXIuZHVlZGF0ZSA9IHRlbXB0b2RvLmNoaWxkTm9kZXNbM10uY2hpbGROb2Rlc1sxXS50ZXh0Q29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRvZG9udW1iZXIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBzYXZlYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzYXZlYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJvbmxpbmVcIik7XG4gICAgICAgICAgICAgICAgc2F2ZWJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwib2ZmbGluZVwiKTtcblxuICAgICAgICAgICAgICAgIGFkZHRvZG9idXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBhZGR0b2RvYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJvbmxpbmVcIik7XG4gICAgICAgICAgICAgICAgYWRkdG9kb2J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwib2ZmbGluZVwiKTtcblxuICAgICAgICAgICAgICAgIGVkaXRidXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBlZGl0YnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJvbmxpbmVcIik7XG4gICAgICAgICAgICAgICAgZWRpdGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwib2ZmbGluZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgcG9wdWxhdGVTdG9yYWdlO1xuICAgIH1cblxuICAgIGNvbnN0IHNlbGVjdFRvZG8gPSAodG9kbykgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyh0b2RvLnRhcmdldCk7XG5cbiAgICAgICAgLy8gc2F2ZVRvZG8oKTsgLy8gTE9PSyBJTlRPXG4gICAgICAgIGNsZWFyQWxsVG9kb1NlbGVjdG9ycygpO1xuXG4gICAgICAgIC8vIG1ha2Ugc3VyZSBoZXJlLCB0aGF0IHdoYXRldmVyIHRvZG9saXN0IHdhcyBzZWxlY3RlZCwgZ2V0cyByZXNlbGVjdGVkLlxuICAgICAgICAvLyBjb3VsZCB1c2UgYW5vdGhlciBvYmplY3QgLSBpZCAtIGhhdmUgaXQgbGlrZSB0b2RvbGlzdCArIGkuIFxuICAgICAgICAvLyBzbyBlYWNoIHRvZG9saXN0IGhhcyBhIHVuaXF1ZSBpZCBjb3JyZXNwb25kaW5nIHRvIHRoZSBwb3NpdGlvbiBpbiB0aGUgYXJyYXlcbiAgICAgICAgLy8gdGhlbiB3aGVuIHNlbGVjdGluZyB0aGVtIC0gc2VhcmNoIHRoZSB0b2RvbGlzdHMsIHdoaWNoZXZlciBpcyBjaGlsZCBub2RlIGlzIHNlbGVjdGVkLCBha2FcbiAgICAgICAgLy8gY2FyZDEgb3IgY2FyZDIsIGllLiBpZiBjYXJkW2ldID09PSB0b2RvbGlzdC5pZCB7dG9kb2xpc3Quc2VsZWN0ZWQgPSB0cnVlfSB0eXBlIHRoaW5nLiBcblxuICAgICAgICBsZXQgbm9kZXRlc3QgPSB0b2RvLnRhcmdldDtcbiAgICAgICAgbGV0IHRlc3QgPSBub2RldGVzdC5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKTtcbiAgICAgICAgbGV0IHRlc3RpZCA9IG5vZGV0ZXN0LmdldEF0dHJpYnV0ZShcImlkXCIpO1xuICAgICAgICBsZXQgbm9kZXRlc3QzID0gdG9kby50YXJnZXQucGFyZW50Tm9kZTtcbiAgICAgICAgbGV0IHRlc3QzID0gbm9kZXRlc3QzLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpO1xuICAgICAgICBsZXQgdGVzdDNpZCA9IG5vZGV0ZXN0My5nZXRBdHRyaWJ1dGUoXCJpZFwiKTtcbiAgICAgICAgbGV0IG5vZGV0ZXN0NCA9IG5vZGV0ZXN0My5wYXJlbnROb2RlO1xuICAgICAgICBsZXQgdGVzdDQgPSBub2RldGVzdDQuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIik7XG4gICAgICAgIGxldCB0ZXN0NGlkID0gbm9kZXRlc3Q0LmdldEF0dHJpYnV0ZShcImlkXCIpO1xuXG5cbiAgICAgICAgYWxsUHJvamVjdHMuZm9yRWFjaChwcm9qZWN0bnVtYmVyID0+IHtcbiAgICAgICAgICAgIGlmIChwcm9qZWN0bnVtYmVyLnNlbGVjdGVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgcHJvamVjdG51bWJlci50b2RvbGlzdHMuZm9yRWFjaCh0b2RvbGlzdG51bWJlciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0b2RvbGlzdG51bWJlci5pZCA9PSB0ZXN0aWQgfHwgdG9kb2xpc3RudW1iZXIuaWQgPT0gdGVzdDNpZCB8fCB0b2RvbGlzdG51bWJlci5pZCA9PSB0ZXN0NGlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2RvbGlzdG51bWJlci5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIGNvbnNvbGUubG9nKGFsbFByb2plY3RzKTtcblxuICAgICAgICBpZiAodGVzdCA9PT0gXCJ0b2RvbGlzdHNcIikge1xuXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGVzdCA9PT0gXCJ0b2RvY2FyZFwiKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0ZXN0KTtcbiAgICAgICAgICAgIHRvZG8udGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZHRvZG9cIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIml0J3MgZG9uZSB2aWEgY2hpbGQuXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKHRlc3QzID09PSBcInJhZGlvYnV0dG9uc1wiKSB7XG4gICAgICAgICAgICBsZXQgdGVzdDEwID0gdG9kby50YXJnZXQ7XG4gICAgICAgICAgICBsZXQgdGVzdDExID0gdGVzdDEwLnBhcmVudE5vZGU7XG4gICAgICAgICAgICB0ZXN0MTEucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWR0b2RvXCIpO1xuICAgICAgICAgICAgLy8gbGV0IHRlc3Q0ID0gdGVzdDMucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIC8vIHRlc3Q0LmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZHRvZG9cIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImEgZnVja2luZyBhbm5veWluZyBhc3MgcmFkaW8gYnV0dG9uIGVsZW1lbnQgd2FzIHByZXNzZWQuXCIpXG4gICAgICAgIH0gZWxzZSBpZiAodGVzdDMgPT09IFwiZGF0ZVwiKSB7XG4gICAgICAgICAgICBsZXQgdGVzdDEwID0gdG9kby50YXJnZXQ7XG4gICAgICAgICAgICBsZXQgdGVzdDExID0gdGVzdDEwLnBhcmVudE5vZGU7XG4gICAgICAgICAgICB0ZXN0MTEucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWR0b2RvXCIpO1xuICAgICAgICAgICAgLy8gbGV0IHRlc3Q0ID0gdGVzdDMucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIC8vIHRlc3Q0LmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZHRvZG9cIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImEgZnVja2luZyBhbm5veWluZyBhc3MgZHVlZGF0ZSBzaGl0IGVsZW1lbnQgd2FzIHByZXNzZWQuXCIpO1xuICAgICAgICAgICAgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgdGVzdDIgPSB0b2RvLnRhcmdldDtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRvZG8udGFyZ2V0LnBhcmVudE5vZGUpO1xuICAgICAgICAgICAgdGVzdDIucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWR0b2RvXCIpO1xuICAgICAgICAgICAgLy8gdGVzdDIuY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkZG9cIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIml0J3MgZG9uZSB2aWEgcGFyZW50LlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVkaXRidXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgZWRpdGJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwib25saW5lXCIpO1xuICAgICAgICBlZGl0YnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJvZmZsaW5lXCIpO1xuICAgICAgICBkZWxldGVidXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgZGVsZXRlYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJvbmxpbmVcIik7XG4gICAgICAgIGRlbGV0ZWJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwib2ZmbGluZVwiKTtcbiAgICAgICAgXG4gICAgfVxuXG4gICAgY29uc3QgY2xlYXJBbGxUb2RvU2VsZWN0b3JzID0gKCkgPT4ge1xuXG4gICAgICAgIGFsbFByb2plY3RzLmZvckVhY2gocHJvamVjdG51bWJlciA9PiB7XG4gICAgICAgICAgICBpZiAocHJvamVjdG51bWJlci5zZWxlY3RlZCA9PT0gdHJ1ZSkge1xuXG4gICAgICAgICAgICAgICAgcHJvamVjdG51bWJlci50b2RvbGlzdHMuZm9yRWFjaCh0b2RvbnVtYmVyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdG9kb251bWJlci5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgY29uc3Qgc2VsZWN0ZWR0b2RvcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2VsZWN0ZWR0b2RvXCIpO1xuICAgICAgICBzZWxlY3RlZHRvZG9zLmZvckVhY2goc2VsZWN0ZWR0b2RvID0+IHtcbiAgICAgICAgICAgIHNlbGVjdGVkdG9kby5jbGFzc0xpc3QucmVtb3ZlKFwic2VsZWN0ZWR0b2RvXCIpO1xuICAgICAgICB9KVxuICAgIH1cbiAgICBcblxuICAgIGNvbnN0IGNsZWFyQWxsVG9kb3MgPSAoKSA9PiB7XG4gICAgICAgIGFsbFByb2plY3RzLmZvckVhY2gocHJvamVjdG51bWJlciA9PiB7XG4gICAgICAgICAgICBpZiAocHJvamVjdG51bWJlci5zZWxlY3RlZCA9PT0gdHJ1ZSkge1xuXG4gICAgICAgICAgICAgICAgcHJvamVjdG51bWJlci50b2RvbGlzdHMuZm9yRWFjaCh0b2RvbnVtYmVyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdG9kb251bWJlci5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAvLyB0aGlzIG1ha2VzIGFsbCB0aGUgdG9kb3MgaW4gdGhlIHByb2plY3Qgc2VsZWN0ZWQgPSBmYWxzZS4gb2suXG5cbiAgICAgICAgbGV0IGNoaWxkcmVuID0gdG9kb2xpc3RzLmxhc3RFbGVtZW50Q2hpbGQ7XG4gICAgICAgIHdoaWxlIChjaGlsZHJlbikge1xuICAgICAgICB0b2RvbGlzdHMucmVtb3ZlQ2hpbGQoY2hpbGRyZW4pO1xuICAgICAgICBjaGlsZHJlbiA9IHRvZG9saXN0cy5sYXN0RWxlbWVudENoaWxkO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZGVzaWduRW1wdHlUb2RvID0gKCkgPT4ge1xuXG4gICAgICAgIGNsZWFyQWxsVG9kb1NlbGVjdG9ycygpO1xuXG4gICAgICAgIGFkZHRvZG9idXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICBhZGR0b2RvYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJvbmxpbmVcIik7XG4gICAgICAgIGFkZHRvZG9idXR0b24uY2xhc3NMaXN0LmFkZChcIm9mZmxpbmVcIik7XG5cbiAgICAgICAgZGVsZXRlYnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIGRlbGV0ZWJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwib2ZmbGluZVwiKTtcbiAgICAgICAgZGVsZXRlYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJvbmxpbmVcIik7XG4gICAgICAgIC8vIGVkaXRidXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgLy8gZWRpdGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwib2ZmbGluZVwiKTtcbiAgICAgICAgLy8gZWRpdGJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwib25saW5lXCIpO1xuICAgICAgICBzYXZlYnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIHNhdmVidXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm9mZmxpbmVcIik7XG4gICAgICAgIHNhdmVidXR0b24uY2xhc3NMaXN0LmFkZChcIm9ubGluZVwiKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHRlbXBwcm9qZWN0dGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3B0aXRsZVwiKTtcbiAgICAgICAgdGVtcHByb2plY3R0aXRsZS5zZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIiwgdHJ1ZSk7XG5cbiAgICAgICAgbGV0IGNhcmRudW1iZXIgPSB4Kys7IFxuICAgICAgICBcbiAgICAgICAgY29uc3QgdG9kb2NhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0b2RvY2FyZC5jbGFzc0xpc3QuYWRkKFwidG9kb2NhcmRcIik7XG4gICAgICAgIHRvZG9jYXJkLmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZHRvZG9cIik7XG4gICAgICAgIHRvZG9jYXJkLnNldEF0dHJpYnV0ZShcImlkXCIsY2FyZG51bWJlcik7XG4gICAgICAgIHRvZG9saXN0cy5hcHBlbmRDaGlsZCh0b2RvY2FyZCk7XG5cbiAgICAgICAgY29uc3QgdG9kb3RpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgzXCIpO1xuICAgICAgICB0b2RvdGl0bGUuY2xhc3NMaXN0LmFkZChcInRvZG90aXRsZVwiKTtcbiAgICAgICAgdG9kb3RpdGxlLnNldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiLCBcInRydWVcIik7XG4gICAgICAgIHRvZG90aXRsZS50ZXh0Q29udGVudCA9IFwiR2l2ZSB5b3VyIHRvZG8gYSB0aXRsZVwiXG4gICAgICAgIHRvZG9jYXJkLmFwcGVuZENoaWxkKHRvZG90aXRsZSk7XG5cbiAgICAgICAgY29uc3QgdG9kb2Rlc2MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgdG9kb2Rlc2MuY2xhc3NMaXN0LmFkZChcInRvZG9kZXNjXCIpO1xuICAgICAgICB0b2RvZGVzYy5zZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIiwgXCJ0cnVlXCIpO1xuICAgICAgICB0b2RvY2FyZC5hcHBlbmRDaGlsZCh0b2RvZGVzYyk7XG5cbiAgICAgICAgY29uc3QgcmFkaW9idXR0b25zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgcmFkaW9idXR0b25zLmNsYXNzTGlzdC5hZGQoXCJyYWRpb2J1dHRvbnNcIik7XG4gICAgICAgIHRvZG9jYXJkLmFwcGVuZENoaWxkKHJhZGlvYnV0dG9ucyk7XG4gICAgICAgIGNvbnN0IHByaW90aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICBwcmlvdGl0bGUuY2xhc3NMaXN0LmFkZChcInByaW90aXRsZVwiKTtcbiAgICAgICAgcHJpb3RpdGxlLnRleHRDb250ZW50ID0gXCJQcmlvcml0eTpcIjtcbiAgICAgICAgcmFkaW9idXR0b25zLmFwcGVuZENoaWxkKHByaW90aXRsZSk7XG4gICAgICAgIGNvbnN0IHRvZG9wcmlvbG93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICB0b2RvcHJpb2xvdy5jbGFzc0xpc3QuYWRkKFwidG9kb3ByaW9sb3dcIik7XG4gICAgICAgIHRvZG9wcmlvbG93LnNldEF0dHJpYnV0ZShcImlkXCIsXCJwcmlvXCIpO1xuICAgICAgICB0b2RvcHJpb2xvdy5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsXCJwcmlvXCIpO1xuICAgICAgICB0b2RvcHJpb2xvdy5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJyYWRpb1wiKTtcbiAgICAgICAgdG9kb3ByaW9sb3cuc2V0QXR0cmlidXRlKFwidmFsdWVcIixcImxvd1wiKTtcbiAgICAgICAgcmFkaW9idXR0b25zLmFwcGVuZENoaWxkKHRvZG9wcmlvbG93KTtcbiAgICAgICAgY29uc3QgdG9kb3ByaW9sb3dsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICAgICAgdG9kb3ByaW9sb3dsYWJlbC50ZXh0Q29udGVudCA9IFwiTG93XCI7XG4gICAgICAgIHRvZG9wcmlvbG93bGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwibG93XCIpO1xuICAgICAgICByYWRpb2J1dHRvbnMuYXBwZW5kQ2hpbGQodG9kb3ByaW9sb3dsYWJlbCk7XG4gICAgICAgIGNvbnN0IHRvZG9wcmlvbWVkaXVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICB0b2RvcHJpb21lZGl1bS5jbGFzc0xpc3QuYWRkKFwidG9kb3ByaW9tZWRpdW1cIik7XG4gICAgICAgIHRvZG9wcmlvbWVkaXVtLnNldEF0dHJpYnV0ZShcImlkXCIsXCJwcmlvXCIpO1xuICAgICAgICB0b2RvcHJpb21lZGl1bS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsXCJwcmlvXCIpO1xuICAgICAgICB0b2RvcHJpb21lZGl1bS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJyYWRpb1wiKTtcbiAgICAgICAgdG9kb3ByaW9tZWRpdW0uc2V0QXR0cmlidXRlKFwidmFsdWVcIixcIm1lZGl1bVwiKTtcbiAgICAgICAgcmFkaW9idXR0b25zLmFwcGVuZENoaWxkKHRvZG9wcmlvbWVkaXVtKTtcbiAgICAgICAgY29uc3QgdG9kb3ByaW9tZWRpdW1sYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICAgICAgdG9kb3ByaW9tZWRpdW1sYWJlbC50ZXh0Q29udGVudCA9IFwiTWVkaXVtXCI7XG4gICAgICAgIHRvZG9wcmlvbWVkaXVtbGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwibWVkaXVtXCIpO1xuICAgICAgICByYWRpb2J1dHRvbnMuYXBwZW5kQ2hpbGQodG9kb3ByaW9tZWRpdW1sYWJlbCk7XG4gICAgICAgIGNvbnN0IHRvZG9wcmlvaGlnaCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgdG9kb3ByaW9oaWdoLmNsYXNzTGlzdC5hZGQoXCJ0b2RvcHJpb2hpZ2hcIik7XG4gICAgICAgIHRvZG9wcmlvaGlnaC5zZXRBdHRyaWJ1dGUoXCJpZFwiLFwicHJpb1wiKTtcbiAgICAgICAgdG9kb3ByaW9oaWdoLnNldEF0dHJpYnV0ZShcIm5hbWVcIixcInByaW9cIik7XG4gICAgICAgIHRvZG9wcmlvaGlnaC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJyYWRpb1wiKTtcbiAgICAgICAgdG9kb3ByaW9oaWdoLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsXCJoaWdoXCIpO1xuICAgICAgICByYWRpb2J1dHRvbnMuYXBwZW5kQ2hpbGQodG9kb3ByaW9oaWdoKTtcbiAgICAgICAgY29uc3QgdG9kb3ByaW9oaWdobGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgICAgIHRvZG9wcmlvaGlnaGxhYmVsLnRleHRDb250ZW50ID0gXCJIaWdoXCI7XG4gICAgICAgIHRvZG9wcmlvaGlnaGxhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcImhpZ2hcIik7XG4gICAgICAgIHJhZGlvYnV0dG9ucy5hcHBlbmRDaGlsZCh0b2RvcHJpb2hpZ2hsYWJlbCk7XG5cbiAgICAgICAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGRhdGUuY2xhc3NMaXN0LmFkZChcImRhdGVcIik7XG4gICAgICAgIHRvZG9jYXJkLmFwcGVuZENoaWxkKGRhdGUpO1xuXG4gICAgICAgIGNvbnN0IGRhdGVsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICAgICAgZGF0ZWxhYmVsLmNsYXNzTGlzdC5hZGQoXCJkYXRlbGFiZWxcIik7XG4gICAgICAgIGRhdGVsYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJkdWVkYXRlXCIpO1xuICAgICAgICBkYXRlbGFiZWwudGV4dENvbnRlbnQgPSBcIkR1ZTogXCJcbiAgICAgICAgZGF0ZS5hcHBlbmRDaGlsZChkYXRlbGFiZWwpO1xuXG4gICAgICAgIGNvbnN0IGR1ZWRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgZHVlZGF0ZS5jbGFzc0xpc3QuYWRkKFwiZHVlZGF0ZVwiKTtcbiAgICAgICAgZHVlZGF0ZS5zZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIiwgXCJ0cnVlXCIpO1xuICAgICAgICBkYXRlLmFwcGVuZENoaWxkKGR1ZWRhdGUpO1xuXG4gICAgICAgIC8vIHVubmVlZGVkLCB1c2luZyB0ZXh0Ym94XG4gICAgICAgIC8vIGNvbnN0IGR1ZWRhdGUgPSAgZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgLy8gZHVlZGF0ZS5jbGFzc0xpc3QuYWRkKFwiZGF0ZVwiKTtcbiAgICAgICAgLy8gdG9kb2NhcmQuYXBwZW5kQ2hpbGQoZHVlZGF0ZSk7XG4gICAgICAgIC8vIGNvbnN0IGRhdGV0aXRsZWxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgICAgICAvLyBkYXRldGl0bGVsYWJlbC5jbGFzc0xpc3QuYWRkKFwiZGF0ZXRpdGxlXCIpO1xuICAgICAgICAvLyBkYXRldGl0bGVsYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJkdWVkYXRlXCIpO1xuICAgICAgICAvLyBkYXRldGl0bGVsYWJlbC50ZXh0Q29udGVudCA9IFwiRHVlIERhdGU6XCI7XG4gICAgICAgIC8vIGR1ZWRhdGUuYXBwZW5kQ2hpbGQoZGF0ZXRpdGxlbGFiZWwpO1xuICAgICAgICAvLyBjb25zdCBkYXRldGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICAgIC8vIGRhdGV0aXRsZS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiZGF0ZVwiKTtcbiAgICAgICAgLy8gZGF0ZXRpdGxlLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiZHVlZGF0ZVwiKTtcbiAgICAgICAgLy8gZGF0ZXRpdGxlLmNsYXNzTGlzdC5hZGQoXCJ0b2RvZHVlZGF0ZVwiKTtcbiAgICAgICAgLy8gLy8gZGF0ZXRpdGxlLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIFwiXCIpO1xuICAgICAgICAvLyBkdWVkYXRlLmFwcGVuZENoaWxkKGRhdGV0aXRsZSk7XG5cbiAgICAgICAgY29uc3QgdG9kb2xpc3QgPSBjcmVhdGVQcm9qZWN0LnRvZG9GYWN0b3J5KFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIHRydWUsIGNhcmRudW1iZXIpO1xuXG4gICAgICAgIGFsbFByb2plY3RzLmZvckVhY2gocHJvamVjdG51bWJlciA9PiB7XG4gICAgICAgICAgICBpZiAocHJvamVjdG51bWJlci5zZWxlY3RlZCA9PT0gdHJ1ZSkge1xuXG4gICAgICAgICAgICAgICAgcHJvamVjdG51bWJlci50b2RvbGlzdHMucHVzaCh0b2RvbGlzdCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocHJvamVjdG51bWJlci50b2RvbGlzdHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGNvbnN0IGRpc3BsYXlQcm9qZWN0c1RvZG9zID0gKCkgPT4ge1xuXG4gICAgICAgIGNsZWFyQWxsVG9kb3MoKTtcblxuICAgICAgICBhbGxQcm9qZWN0cy5mb3JFYWNoKHByb2plY3RudW1iZXIgPT4ge1xuICAgICAgICAgICAgaWYgKHByb2plY3RudW1iZXIuc2VsZWN0ZWQgPT09IHRydWUpIHtcblxuICAgICAgICAgICAgICAgIGlmIChwcm9qZWN0bnVtYmVyLmRlbGV0ZWQgPT09IGZhbHNlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwdGl0bGVcIik7XG4gICAgICAgICAgICAgICAgICAgIHRlbXB0aXRsZS50ZXh0Q29udGVudCA9IHByb2plY3RudW1iZXIubmFtZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0bnVtYmVyLnRvZG9saXN0cy5mb3JFYWNoKHRvZG9saXN0ID0+IHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRvZG9saXN0LmRlbGV0ZWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2RvY2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9jYXJkLmNsYXNzTGlzdC5hZGQoXCJ0b2RvY2FyZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gdG9kb2NhcmQuY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkdG9kb1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdG9kb2NhcmQuc2V0QXR0cmlidXRlKFwiaWRcIiwgdG9kb2xpc3QuaWQpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvbGlzdHMuYXBwZW5kQ2hpbGQodG9kb2NhcmQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvZG90aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoM1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdG9kb3RpdGxlLmNsYXNzTGlzdC5hZGQoXCJ0b2RvdGl0bGVcIik7XG4gICAgICAgICAgICAgICAgICAgIHRvZG90aXRsZS5zZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIiwgXCJmYWxzZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgdG9kb3RpdGxlLnRleHRDb250ZW50ID0gdG9kb2xpc3QudGl0bGVcbiAgICAgICAgICAgICAgICAgICAgdG9kb2NhcmQuYXBwZW5kQ2hpbGQodG9kb3RpdGxlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2RvZGVzYyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvZGVzYy5jbGFzc0xpc3QuYWRkKFwidG9kb2Rlc2NcIik7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9kZXNjLnNldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiLCBcImZhbHNlXCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvZGVzYy50ZXh0Q29udGVudCA9IHRvZG9saXN0LmRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgICAgICB0b2RvY2FyZC5hcHBlbmRDaGlsZCh0b2RvZGVzYyk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmFkaW9idXR0b25zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmFkaW9idXR0b25zLmNsYXNzTGlzdC5hZGQoXCJyYWRpb2J1dHRvbnNcIik7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9jYXJkLmFwcGVuZENoaWxkKHJhZGlvYnV0dG9ucyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByaW90aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICAgICAgICAgICAgICBwcmlvdGl0bGUuY2xhc3NMaXN0LmFkZChcInByaW90aXRsZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgcHJpb3RpdGxlLnRleHRDb250ZW50ID0gXCJQcmlvcml0eTpcIjtcbiAgICAgICAgICAgICAgICAgICAgcmFkaW9idXR0b25zLmFwcGVuZENoaWxkKHByaW90aXRsZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvZG9wcmlvbG93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvcHJpb2xvdy5jbGFzc0xpc3QuYWRkKFwidG9kb3ByaW9sb3dcIik7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9wcmlvbG93LnNldEF0dHJpYnV0ZShcImlkXCIsXCJwcmlvXCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvcHJpb2xvdy5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsXCJwcmlvXCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvcHJpb2xvdy5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJyYWRpb1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdG9kb3ByaW9sb3cuc2V0QXR0cmlidXRlKFwidmFsdWVcIixcImxvd1wiKTtcbiAgICAgICAgICAgICAgICAgICAgcmFkaW9idXR0b25zLmFwcGVuZENoaWxkKHRvZG9wcmlvbG93KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9kb3ByaW9sb3dsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICAgICAgICAgICAgICAgICAgdG9kb3ByaW9sb3dsYWJlbC50ZXh0Q29udGVudCA9IFwiTG93XCI7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9wcmlvbG93bGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwibG93XCIpO1xuICAgICAgICAgICAgICAgICAgICByYWRpb2J1dHRvbnMuYXBwZW5kQ2hpbGQodG9kb3ByaW9sb3dsYWJlbCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvZG9wcmlvbWVkaXVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvcHJpb21lZGl1bS5jbGFzc0xpc3QuYWRkKFwidG9kb3ByaW9tZWRpdW1cIik7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9wcmlvbWVkaXVtLnNldEF0dHJpYnV0ZShcImlkXCIsXCJwcmlvXCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvcHJpb21lZGl1bS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsXCJwcmlvXCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvcHJpb21lZGl1bS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJyYWRpb1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdG9kb3ByaW9tZWRpdW0uc2V0QXR0cmlidXRlKFwidmFsdWVcIixcIm1lZGl1bVwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmFkaW9idXR0b25zLmFwcGVuZENoaWxkKHRvZG9wcmlvbWVkaXVtKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9kb3ByaW9tZWRpdW1sYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICAgICAgICAgICAgICAgICAgdG9kb3ByaW9tZWRpdW1sYWJlbC50ZXh0Q29udGVudCA9IFwiTWVkaXVtXCI7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9wcmlvbWVkaXVtbGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwibWVkaXVtXCIpO1xuICAgICAgICAgICAgICAgICAgICByYWRpb2J1dHRvbnMuYXBwZW5kQ2hpbGQodG9kb3ByaW9tZWRpdW1sYWJlbCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvZG9wcmlvaGlnaCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgICAgICAgICAgICAgdG9kb3ByaW9oaWdoLmNsYXNzTGlzdC5hZGQoXCJ0b2RvcHJpb2hpZ2hcIik7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9wcmlvaGlnaC5zZXRBdHRyaWJ1dGUoXCJpZFwiLFwicHJpb1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdG9kb3ByaW9oaWdoLnNldEF0dHJpYnV0ZShcIm5hbWVcIixcInByaW9cIik7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9wcmlvaGlnaC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJyYWRpb1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdG9kb3ByaW9oaWdoLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsXCJoaWdoXCIpO1xuICAgICAgICAgICAgICAgICAgICByYWRpb2J1dHRvbnMuYXBwZW5kQ2hpbGQodG9kb3ByaW9oaWdoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9kb3ByaW9oaWdobGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9wcmlvaGlnaGxhYmVsLnRleHRDb250ZW50ID0gXCJIaWdoXCI7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9wcmlvaGlnaGxhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcImhpZ2hcIik7XG4gICAgICAgICAgICAgICAgICAgIHJhZGlvYnV0dG9ucy5hcHBlbmRDaGlsZCh0b2RvcHJpb2hpZ2hsYWJlbCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvZG9saXN0LnByaW9yaXR5ID09PSBcImxvd1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2RvcHJpb2xvdy5zZXRBdHRyaWJ1dGUoXCJjaGVja2VkXCIsIFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9kb3ByaW9tZWRpdW0uc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2RvcHJpb2hpZ2guc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJcIik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodG9kb2xpc3QucHJpb3JpdHkgPT09IFwibWVkaXVtXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZG9wcmlvbWVkaXVtLnNldEF0dHJpYnV0ZShcImNoZWNrZWRcIiwgXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2RvcHJpb2xvdy5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZG9wcmlvaGlnaC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0b2RvbGlzdC5wcmlvcml0eSA9PT0gXCJoaWdoXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZG9wcmlvbG93LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9kb3ByaW9tZWRpdW0uc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2RvcHJpb2hpZ2guc2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiLCBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIHRvZG9wcmlvbG93LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAvLyB0b2RvcHJpb21lZGl1bS5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gdG9kb3ByaW9oaWdoLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwiXCIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgICAgICBkYXRlLmNsYXNzTGlzdC5hZGQoXCJkYXRlXCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvY2FyZC5hcHBlbmRDaGlsZChkYXRlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgICAgICAgICAgICAgICAgIGRhdGVsYWJlbC5jbGFzc0xpc3QuYWRkKFwiZGF0ZWxhYmVsXCIpO1xuICAgICAgICAgICAgICAgICAgICBkYXRlbGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwiZHVlZGF0ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgZGF0ZWxhYmVsLnRleHRDb250ZW50ID0gXCJEdWU6IFwiXG4gICAgICAgICAgICAgICAgICAgIGRhdGUuYXBwZW5kQ2hpbGQoZGF0ZWxhYmVsKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkdWVkYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICAgICAgICAgICAgICAgIGR1ZWRhdGUuY2xhc3NMaXN0LmFkZChcImR1ZWRhdGVcIik7XG4gICAgICAgICAgICAgICAgICAgIGR1ZWRhdGUuc2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIsIFwiZmFsc2VcIik7XG4gICAgICAgICAgICAgICAgICAgIGR1ZWRhdGUudGV4dENvbnRlbnQgPSB0b2RvbGlzdC5kdWVkYXRlO1xuICAgICAgICAgICAgICAgICAgICBkYXRlLmFwcGVuZENoaWxkKGR1ZWRhdGUpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICB9XG5cbiAgICBjb25zdCBkZWxldGVUb2RvID0gKCkgPT4ge1xuICAgICAgICBhbGxQcm9qZWN0cy5mb3JFYWNoKHByb2plY3RudW1iZXIgPT4ge1xuICAgICAgICAgICAgaWYgKHByb2plY3RudW1iZXIuc2VsZWN0ZWQgPT09IHRydWUpIHtcblxuICAgICAgICAgICAgICAgIHByb2plY3RudW1iZXIudG9kb2xpc3RzLmZvckVhY2godG9kb251bWJlciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0b2RvbnVtYmVyLnNlbGVjdGVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wdG9kbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VsZWN0ZWR0b2RvXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcHRvZG8ucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2RvbnVtYmVyLmRlbGV0ZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBub3Qgc3BsaWNpbmchIHByb2plY3RudW1iZXIudG9kb2xpc3RzLlNwbGljZSh0b2RvbnVtYmVyLmlkKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0b2RvbnVtYmVyKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkdG9kb2J1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkdG9kb2J1dHRvbi5jbGFzc0xpc3QuYWRkKFwib25saW5lXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkdG9kb2J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwib2ZmbGluZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVidXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVidXR0b24uY2xhc3NMaXN0LmFkZChcIm9mZmxpbmVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBzYXZlYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJvbmxpbmVcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIGRlbGV0ZWJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIGRlbGV0ZWJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwib2ZmbGluZVwiKTtcbiAgICAgICAgZGVsZXRlYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJvbmxpbmVcIik7XG4gICAgICAgIC8vIGVkaXRidXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAvLyBlZGl0YnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJvbmxpbmVcIik7XG4gICAgICAgIC8vIGVkaXRidXR0b24uY2xhc3NMaXN0LmFkZChcIm9mZmxpbmVcIik7XG4gICAgfVxuXG4gICAgLy8gU0FWSU5HIEpTT04gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgICBjb25zdCBwb3B1bGF0ZVN0b3JhZ2UgPSAoKSA9PiB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiYWxscHJvamVjdHNcIiwgSlNPTi5zdHJpbmdpZnkoYWxsUHJvamVjdHMpKTtcbiAgICAgICAgY29uc29sZS5sb2cobG9jYWxTdG9yYWdlKTtcbiAgICB9XG5cbiAgICBjb25zdCB1cGxvYWRTdG9yYWdlID0gKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhsb2NhbFN0b3JhZ2UpXG4gICAgICAgIGFsbFByb2plY3RzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImFsbHByb2plY3RzXCIpKTtcbiAgICAgICAgY29uc29sZS5sb2cobG9jYWxTdG9yYWdlKTtcblxuICAgICAgICBkaXNwbGF5UHJvamVjdHMoKTtcbiAgICB9XG5cbiAgICBpZiAoIWxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiYWxscHJvamVjdHNcIikpIHtcbiAgICAgICAgXG4gICAgfSBlbHNlIHtcbiAgICAgICAgdXBsb2FkU3RvcmFnZSgpO1xuICAgIH1cbiAgICBcblxuICAgIC8vIGNvbnNvbGUubG9nKGxvY2FsU3RvcmFnZSk7XG4gICAgLy8gbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oXCJhbGxwcm9qZWN0c1wiKTtcbiAgICAvLyBjb25zb2xlLmxvZyhsb2NhbFN0b3JhZ2UpO1xuXG4gICAgLy8gaWYgKCFsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImFsbHByb2plY3RzXCIpKSB7XG4gICAgLy8gICAgIHBvcHVsYXRlU3RvcmFnZSgpO1xuICAgIC8vICAgICB9IGVsc2Uge1xuICAgIC8vICAgICBzZXRTdHlsZXMoKTtcbiAgICAvLyAgICAgfVxuICAgIFxuXG5cbiAgICAvLyBFVkVOVExJU1RFTkVSU1xuXG4gICAgcHJvamVjdExpc3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNlbGVjdFByb2plY3QpO1xuICAgIHRvZG9saXN0cy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2VsZWN0VG9kbyk7XG4gICAgc2F2ZWJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2F2ZVRvZG8pO1xuICAgIGRlbGV0ZWJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZGVsZXRlVG9kbyk7XG4gICAgZWRpdGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZWRpdFRvZG8pO1xuICAgIGRlbHByb2plY3RidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGRlbGV0ZVByb2plY3QpO1xuICAgIC8vIGVkaXRwcm9qZWN0YnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlZGl0UHJvamVjdCk7XG4gICAgc2F2ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcG9wdWxhdGVTdG9yYWdlKTtcbiAgICAvLyB1cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHVwbG9hZFN0b3JhZ2UpO1xuXG4gICAgcmV0dXJuIHsgYWRkUHJvamVjdCwgZGVzaWduRW1wdHlUb2RvLCBhbGxQcm9qZWN0c307XG5cbiBcbn0pKCk7XG5cbmV4cG9ydCB7ZGVzaWduUHJvamVjdH07IiwiaW1wb3J0IHtkZXNpZ25Qcm9qZWN0fSBmcm9tIFwiLi4vc3JjL2Rlc2lnblwiXG5cbmNvbnN0IGNyZWF0ZVByb2plY3QgPSAoKCkgPT4ge1xuXG4gICAgY29uc3QgUHJvamVjdHMgPSBbXTtcblxuICAgIFxuXG4gICAgY29uc3QgcHJvamVjdEZhY3RvcnkgPSAobmFtZSwgc2VsZWN0ZWQsIGlkKSA9PiB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB0b2RvbGlzdHMgPSBbXTtcbiAgICAgICAgbGV0IGRlbGV0ZWQgPSBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7IG5hbWUsIHNlbGVjdGVkLCB0b2RvbGlzdHMsIGlkLCBkZWxldGVkfTtcbiAgICB9XG5cbiAgICBjb25zdCB0b2RvRmFjdG9yeSA9ICh0aXRsZSwgZGVzY3JpcHRpb24sIHByaW9yaXR5LCBkdWVkYXRlLCBzZWxlY3RlZCwgaWQpID0+IHtcblxuICAgICAgICBsZXQgZGVsZXRlZCA9IGZhbHNlO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHsgdGl0bGUsIGRlc2NyaXB0aW9uLCBwcmlvcml0eSwgZHVlZGF0ZSwgc2VsZWN0ZWQsIGlkLCBkZWxldGVkfTtcbiAgICB9XG5cblxuICAgIC8vIGNvbnN0IGFkZFRvZG8gPSAoc2VsZWN0ZWRQcm9qZWN0KSA9PiB7XG4gICAgLy8gICAgIGNvbnNvbGUubG9nKFwiY3J5XCIpO1xuICAgIC8vIH1cblxuICAgIFxuXG4gICAgcmV0dXJuIHsgcHJvamVjdEZhY3RvcnksIFByb2plY3RzLCB0b2RvRmFjdG9yeSB9O1xuXG59KSgpO1xuXG5cblxuZXhwb3J0IHtjcmVhdGVQcm9qZWN0fTsiLCJpbXBvcnQge2NyZWF0ZVByb2plY3R9IGZyb20gXCIuLi9zcmMvbG9naWNcIlxuaW1wb3J0IHtkZXNpZ25Qcm9qZWN0fSBmcm9tIFwiLi4vc3JjL2Rlc2lnblwiXG5cblxuXG5jb25zdCBhZGRQcm9qZWN0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjcmVhdGVwcm9qZWN0XCIpO1xuYWRkUHJvamVjdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZGVzaWduUHJvamVjdC5hZGRQcm9qZWN0KTtcblxuY29uc3QgYWRkdG9kb2J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkdG9kb1wiKTtcbmFkZHRvZG9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGRlc2lnblByb2plY3QuZGVzaWduRW1wdHlUb2RvKTtcblxuY29uc3QgcHJvamVjdExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3RMaXN0XCIpXG5cbi8vIGlmIChwcm9qZWN0TGlzdC5maXJzdENoaWxkID09PSB0cnVlKSB7XG5cbi8vIH0gZWxzZSB7XG5cbi8vICAgICBjb25zdCBwcm9qZWN0ID0gY3JlYXRlUHJvamVjdC5wcm9qZWN0RmFjdG9yeShcIkdlbmVyYWxcIiwgdHJ1ZSwgMCk7XG4vLyAgICAgZGVzaWduUHJvamVjdC5hbGxQcm9qZWN0cy5wdXNoKHByb2plY3QpO1xuXG4vLyAgICAgY29uc3QgZmlyc3Rwcm9qZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgyXCIpO1xuLy8gICAgIGZpcnN0cHJvamVjdC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcIjBcIik7XG4vLyAgICAgZmlyc3Rwcm9qZWN0LmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKTtcbi8vICAgICBmaXJzdHByb2plY3QuY2xhc3NMaXN0LmFkZChcInNlbGVjdG9yXCIpO1xuLy8gICAgIGZpcnN0cHJvamVjdC50ZXh0Q29udGVudCA9IFwiR2VuZXJhbFwiO1xuLy8gICAgIHByb2plY3RMaXN0LmFwcGVuZENoaWxkKGZpcnN0cHJvamVjdCk7XG4vLyB9XG5cbi8vIGFkZFByb2plY3RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbi8vICAgICBjb25zb2xlLmxvZyhcInRlc3RpbmcyXCIpXG4vLyB9KTtcblxuXG4iXSwibmFtZXMiOlsiZGVzaWduUHJvamVjdCIsImFsbFByb2plY3RzIiwieSIsIngiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwcm9qZWN0TGlzdCIsInRvZG9saXN0cyIsInNhdmVidXR0b24iLCJkaXNhYmxlZCIsImFkZHRvZG9idXR0b24iLCJkZWxldGVidXR0b24iLCJlZGl0YnV0dG9uIiwiZGVscHJvamVjdGJ1dHRvbiIsImRpc3BsYXlQcm9qZWN0cyIsImZvckVhY2giLCJwcm9qZWN0bnVtYmVyIiwiZGVsZXRlZCIsIm5ld1Byb2plY3RMYWJlbCIsImNyZWF0ZUVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsIm5hbWUiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJpZCIsImFwcGVuZENoaWxkIiwiY2xlYXJBbGxTZWxlY3RvcnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwic2VsZWN0b3IiLCJyZW1vdmUiLCJzZWxlY3RlZCIsImNsZWFyQWxsVG9kb1NlbGVjdG9ycyIsInRvZG9udW1iZXIiLCJzZWxlY3RlZHRvZG8iLCJjbGVhckFsbFRvZG9zIiwiY2hpbGRyZW4iLCJsYXN0RWxlbWVudENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiY29uc29sZSIsImxvZyIsIkpTT04iLCJwYXJzZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJwcm9qZWN0IiwidGFyZ2V0IiwicHJvamVjdGlkIiwiZ2V0QXR0cmlidXRlIiwidG9kb2xpc3QiLCJ0b2RvY2FyZCIsInRvZG90aXRsZSIsInRpdGxlIiwidG9kb2Rlc2MiLCJkZXNjcmlwdGlvbiIsInJhZGlvYnV0dG9ucyIsInByaW90aXRsZSIsInRvZG9wcmlvbG93IiwidG9kb3ByaW9sb3dsYWJlbCIsInRvZG9wcmlvbWVkaXVtIiwidG9kb3ByaW9tZWRpdW1sYWJlbCIsInRvZG9wcmlvaGlnaCIsInRvZG9wcmlvaGlnaGxhYmVsIiwicHJpb3JpdHkiLCJkYXRlIiwiZGF0ZWxhYmVsIiwiZHVlZGF0ZSIsInRvZG8iLCJub2RldGVzdCIsInRlc3QiLCJ0ZXN0aWQiLCJub2RldGVzdDMiLCJwYXJlbnROb2RlIiwidGVzdDMiLCJ0ZXN0M2lkIiwibm9kZXRlc3Q0IiwidGVzdDRpZCIsInRvZG9saXN0bnVtYmVyIiwidGVzdDIiLCJ0ZW1wcHJvamVjdHRpdGxlIiwidGVtcHRpdGxlIiwidGVtcGRlc2MiLCJyYWRpbyIsInRlbXB0b2RvIiwiZmlyc3RDaGlsZCIsImNoaWxkTm9kZXMiLCJpIiwibGVuZ3RoIiwiY2hlY2tlZCIsInZhbHVlIiwicmVtb3ZlQXR0cmlidXRlIiwicmFkaW9idXR0b24iLCJ0ZW1wdG9kb2xpc3RzIiwidGVtcHByb2plY3RzIiwicHJvamVjdGNoaWxkcmVuIiwic2F2ZSIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJhZGRQcm9qZWN0IiwiY3JlYXRlUHJvamVjdCIsInByb2plY3RGYWN0b3J5IiwicHVzaCIsImRlc2lnbkVtcHR5VG9kbyIsImNhcmRudW1iZXIiLCJ0b2RvRmFjdG9yeSIsIlByb2plY3RzIl0sInNvdXJjZVJvb3QiOiIifQ==