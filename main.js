(()=>{"use strict";const e=(()=>{let e=[],d=1;document.querySelector(".sidebartop");const o=document.querySelector(".projectList"),s=document.querySelector(".todolists"),l=document.querySelector(".savebutton");l.disabled=!0;const i=document.querySelector(".addtodo"),c=document.querySelector(".deletetodo");c.disabled=!0;const a=document.querySelector(".edittodo");a.disabled=!0;const n=()=>{document.querySelectorAll(".selected").forEach((e=>{e.classList.remove("selected")})),e.forEach((e=>{e.selected=!1}))},r=()=>{e.forEach((e=>{!0===e.selected&&e.todolists.forEach((e=>{e.selected=!1}))})),document.querySelectorAll(".selectedtodo").forEach((e=>{e.classList.remove("selectedtodo")}))},u=()=>{e.forEach((e=>{!0===e.selected&&e.todolists.forEach((e=>{e.selected=!1}))}));let t=s.lastElementChild;for(;t;)s.removeChild(t),t=s.lastElementChild};return o.addEventListener("click",(t=>{n(),r(),t.target.classList.add("selected"),console.log(t.target),console.log(e);let d=t.target.getAttribute("id");console.log(d),e.forEach((t=>{t.id==d&&(t.selected=!0,u(),e.forEach((e=>{!0===e.selected&&e.todolists.forEach((e=>{const t=document.createElement("div");t.classList.add("todocard"),t.setAttribute("id",e.id),s.appendChild(t);const d=document.createElement("h3");d.classList.add("todotitle"),d.setAttribute("contenteditable","false"),d.textContent=e.title,t.appendChild(d);const o=document.createElement("p");o.classList.add("tododesc"),o.setAttribute("contenteditable","false"),o.textContent=e.description,t.appendChild(o);const l=document.createElement("div");l.classList.add("radiobuttons"),t.appendChild(l);const i=document.createElement("p");i.classList.add("priotitle"),i.textContent="Priority:",l.appendChild(i);const c=document.createElement("input");c.classList.add("todopriolow"),c.setAttribute("id","prio"),c.setAttribute("name","prio"),c.setAttribute("type","radio"),c.setAttribute("value","low"),c.setAttribute("disabled",""),l.appendChild(c);const a=document.createElement("label");a.textContent="Low",a.setAttribute("for","low"),l.appendChild(a);const n=document.createElement("input");n.classList.add("todopriomedium"),n.setAttribute("id","prio"),n.setAttribute("name","prio"),n.setAttribute("type","radio"),n.setAttribute("value","medium"),n.setAttribute("disabled",""),l.appendChild(n);const r=document.createElement("label");r.textContent="Medium",r.setAttribute("for","medium"),l.appendChild(r);const u=document.createElement("input");u.classList.add("todopriohigh"),u.setAttribute("id","prio"),u.setAttribute("name","prio"),u.setAttribute("type","radio"),u.setAttribute("value","high"),u.setAttribute("disabled",""),l.appendChild(u);const p=document.createElement("label");p.textContent="High",p.setAttribute("for","high"),l.appendChild(p),"low"===e.priority?c.setAttribute("checked",""):"medium"===e.priority?n.setAttribute("checked",""):"high"===e.priority&&u.setAttribute("checked","");const m=document.createElement("div");m.classList.add("date"),t.appendChild(m);const b=document.createElement("label");b.classList.add("datelabel"),b.setAttribute("for","duedate"),b.textContent="Due: ",m.appendChild(b);const h=document.createElement("p");h.classList.add("duedate"),h.setAttribute("contenteditable","false"),h.textContent=e.duedate,m.appendChild(h)}))})))}))})),s.addEventListener("click",(t=>{console.log(t.target),r();let d=t.target,o=d.getAttribute("class"),s=d.getAttribute("id"),l=t.target.parentNode,i=l.getAttribute("class"),n=l.getAttribute("id"),u=l.parentNode,p=(u.getAttribute("class"),u.getAttribute("id"));if(e.forEach((e=>{!0===e.selected&&e.todolists.forEach((e=>{e.id!=s&&e.id!=n&&e.id!=p||(e.selected=!0)}))})),console.log(e),"todolists"===o);else if("todocard"===o)console.log(o),t.target.classList.add("selectedtodo"),console.log("it's done via child.");else if("radiobuttons"===i)t.target.parentNode.parentNode.classList.add("selectedtodo"),console.log("a fucking annoying ass radio button element was pressed.");else if("date"===i)t.target.parentNode.parentNode.classList.add("selectedtodo"),console.log("a fucking annoying ass duedate shit element was pressed.");else{let e=t.target;console.log(t.target.parentNode),e.parentNode.classList.add("selectedtodo"),console.log("it's done via parent.")}a.disabled=!1,a.classList.add("online"),a.classList.remove("offline"),c.disabled=!1,c.classList.add("online"),c.classList.remove("offline")})),l.addEventListener("click",(()=>{e.forEach((e=>{!0===e.selected&&(e.todolists.forEach((e=>{if(!0===e.selected){document.querySelectorAll(".todotitle").forEach((e=>{e.setAttribute("contenteditable","false")})),document.querySelectorAll(".tododesc").forEach((e=>{e.setAttribute("contenteditable","false")})),document.querySelectorAll("input").forEach((e=>{e.setAttribute("disabled","")})),document.querySelectorAll(".date").forEach((e=>{e.setAttribute("contenteditable","false")}));const t=document.querySelector(".selectedtodo");e.title=t.firstChild.textContent,e.description=t.childNodes[1].textContent;for(let d=0;d<t.childNodes[2].childNodes.length;d++)t.childNodes[2].childNodes[d].checked&&(console.log(t.childNodes[2].childNodes[d]),e.priority=t.childNodes[2].childNodes[d].value,t.childNodes[2].childNodes[d].removeAttribute("disabled",""));e.duedate=t.childNodes[3].childNodes[1].textContent,console.log(e)}})),l.disabled=!0,l.classList.remove("online"),l.classList.add("offline"),i.disabled=!1,i.classList.add("online"),i.classList.remove("offline"),a.disabled=!1,a.classList.add("online"),a.classList.remove("offline"))}))})),c.addEventListener("click",(()=>{e.forEach((e=>{!0===e.selected&&e.todolists.forEach((e=>{!0===e.selected&&(document.querySelector(".selectedtodo").remove(),e.deleted=!0,console.log(e),i.disabled=!1,i.classList.add("online"),i.classList.remove("offline"),l.disabled=!1,l.classList.add("offline"),l.classList.remove("online"))}))})),c.disabled=!0,c.classList.add("offline"),c.classList.remove("online")})),a.addEventListener("click",(()=>{e.forEach((e=>{!0===e.selected&&e.todolists.forEach((e=>{if(!0===e.selected){i.disabled=!0,i.classList.remove("online"),i.classList.add("offline"),l.disabled=!1,l.classList.add("online"),l.classList.remove("offline"),o.disabled=!0,s.disabled=!0;const e=document.querySelector(".selectedtodo");e.firstChild.setAttribute("contenteditable","true"),e.childNodes[1].setAttribute("contenteditable","true"),e.querySelectorAll("input").forEach((e=>{e.removeAttribute("disabled")})),e.querySelector(".duedate").setAttribute("contenteditable","true")}}))}))})),{addProject:()=>{u(),n();let s=d++;e.forEach((e=>{e.selected=!1}));const i=t.projectFactory("project",!0,s);console.log(i),e.push(i);const r=document.createElement("h2");r.textContent="New Project",r.classList.add("selected"),r.classList.add("selector"),r.setAttribute("id",s),o.appendChild(r),console.log(e),a.disabled=!0,a.classList.add("offline"),a.classList.remove("online"),c.disabled=!0,c.classList.add("offline"),c.classList.remove("online"),l.disabled=!0,l.classList.add("offline"),l.classList.remove("online")},designEmptyTodo:()=>{r(),i.disabled=!0,i.classList.remove("online"),i.classList.add("offline"),c.disabled=!1,c.classList.remove("offline"),c.classList.add("online"),l.disabled=!1,l.classList.remove("offline"),l.classList.add("online");let o=d++;const a=document.createElement("div");a.classList.add("todocard"),a.classList.add("selectedtodo"),a.setAttribute("id",o),s.appendChild(a);const n=document.createElement("h3");n.classList.add("todotitle"),n.setAttribute("contenteditable","true"),n.textContent="Give your todo a title",a.appendChild(n);const u=document.createElement("p");u.classList.add("tododesc"),u.setAttribute("contenteditable","true"),a.appendChild(u);const p=document.createElement("div");p.classList.add("radiobuttons"),a.appendChild(p);const m=document.createElement("p");m.classList.add("priotitle"),m.textContent="Priority:",p.appendChild(m);const b=document.createElement("input");b.classList.add("todopriolow"),b.setAttribute("id","prio"),b.setAttribute("name","prio"),b.setAttribute("type","radio"),b.setAttribute("value","low"),p.appendChild(b);const h=document.createElement("label");h.textContent="Low",h.setAttribute("for","low"),p.appendChild(h);const f=document.createElement("input");f.classList.add("todopriomedium"),f.setAttribute("id","prio"),f.setAttribute("name","prio"),f.setAttribute("type","radio"),f.setAttribute("value","medium"),p.appendChild(f);const L=document.createElement("label");L.textContent="Medium",L.setAttribute("for","medium"),p.appendChild(L);const A=document.createElement("input");A.classList.add("todopriohigh"),A.setAttribute("id","prio"),A.setAttribute("name","prio"),A.setAttribute("type","radio"),A.setAttribute("value","high"),p.appendChild(A);const E=document.createElement("label");E.textContent="High",E.setAttribute("for","high"),p.appendChild(E);const C=document.createElement("div");C.classList.add("date"),a.appendChild(C);const g=document.createElement("label");g.classList.add("datelabel"),g.setAttribute("for","duedate"),g.textContent="Due: ",C.appendChild(g);const v=document.createElement("p");v.classList.add("duedate"),v.setAttribute("contenteditable","true"),C.appendChild(v);const y=t.todoFactory("","","","",!0,o);e.forEach((e=>{!0===e.selected&&(e.todolists.push(y),console.log(e.todolists))}))},allProjects:e}})(),t={projectFactory:(e,t,d)=>({name:e,selected:t,todolists:[],id:d}),Projects:[],todoFactory:(e,t,d,o,s,l)=>({title:e,description:t,priority:d,duedate:o,selected:s,id:l,deleted:!1})};document.querySelector("#createproject").addEventListener("click",e.addProject),document.querySelector(".addtodo").addEventListener("click",e.designEmptyTodo);const d=t.projectFactory("General",!0,0);e.allProjects.push(d)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFVYyxJQUFJLGFBQ3hCMEIsRUFBVWpCLGFBQWEsTUFBTyxXQUM5QmlCLEVBQVVkLFlBQWMsUUFDeEJhLEVBQUtmLFlBQVlnQixHQUVqQixNQUFNQyxFQUFVdEQsU0FBU21DLGNBQWMsS0FDdkNtQixFQUFRekMsVUFBVWMsSUFBSSxXQUN0QjJCLEVBQVFsQixhQUFhLGtCQUFtQixRQUN4Q2dCLEVBQUtmLFlBQVlpQixHQWtCakIsTUFBTXJCLEVBQVdnRCxFQUFjTSxZQUFZLEdBQUksR0FBSSxHQUFJLElBQUksRUFBTUQsR0FFakV4RixFQUFZYSxTQUFRSSxLQUNlLElBQTNCQSxFQUFjQyxXQUVkRCxFQUFjWixVQUFVZ0YsS0FBS2xELEdBQzdCTCxRQUFRQyxJQUFJZCxFQUFjWixXQUM5QixHQUNILEVBa0ppQ0wsY0FFekMsRUF2akJxQixHQ0FoQm1GLEVBMEJLLENBQUVDLGVBcEJjLENBQUNNLEVBQU14RSxFQUFVZ0IsS0FJN0IsQ0FBRXdELE9BQU14RSxXQUFVYixVQUZQLEdBRWtCNkIsT0FnQmZ5RCxTQXhCUixHQXdCa0JGLFlBYmYsQ0FBQy9DLEVBQU9FLEVBQWFTLEVBQVVHLEVBQVN0QyxFQUFVZ0IsS0FJM0QsQ0FBRVEsUUFBT0UsY0FBYVMsV0FBVUcsVUFBU3RDLFdBQVVnQixLQUFJOEMsU0FGaEQsS0NaRzlFLFNBQVNDLGNBQWMsa0JBQy9CdUIsaUJBQWlCLFFBQVMzQixFQUFjbUYsWUFFbkNoRixTQUFTQyxjQUFjLFlBQy9CdUIsaUJBQWlCLFFBQVMzQixFQUFjd0YsaUJBRXRELE1BQU01RCxFQUFVd0QsRUFBY0MsZUFBZSxXQUFXLEVBQU0sR0FDOURyRixFQUFjQyxZQUFZcUYsS0FBSzFELEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvZGVzaWduLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9sb2dpYy5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtjcmVhdGVQcm9qZWN0fSBmcm9tIFwiLi4vc3JjL2xvZ2ljXCJcblxuY29uc3QgZGVzaWduUHJvamVjdCA9ICgoKSA9PiB7XG5cbiAgICBsZXQgYWxsUHJvamVjdHMgPSBbXTtcbiAgICBsZXQgcHJvamVjdFRvZG9zID0gW107XG4gICAgbGV0IHggPSAxXG5cbiAgICBjb25zdCBzaWRlYmFydG9wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaWRlYmFydG9wXCIpO1xuICAgIGNvbnN0IHByb2plY3RMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0TGlzdFwiKVxuICAgIGNvbnN0IHRvZG9saXN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kb2xpc3RzXCIpO1xuICAgIGNvbnN0IHNhdmVidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNhdmVidXR0b25cIik7XG4gICAgc2F2ZWJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgY29uc3QgYWRkdG9kb2J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkdG9kb1wiKTtcbiAgICBjb25zdCBkZWxldGVidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRlbGV0ZXRvZG9cIik7XG4gICAgZGVsZXRlYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICBjb25zdCBlZGl0YnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0dG9kb1wiKTtcbiAgICBlZGl0YnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcblxuICAgIC8vIFBST0pFQ1QgRlVOQ1RJT05TIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICBjb25zdCBhZGRQcm9qZWN0ID0gKCkgPT4ge1xuXG4gICAgICAgIGNsZWFyQWxsVG9kb3MoKTtcbiAgICAgICAgY2xlYXJBbGxTZWxlY3RvcnMoKTtcblxuICAgICAgICBsZXQgaSA9IHgrK1xuXG4gICAgICAgIGFsbFByb2plY3RzLmZvckVhY2gocHJvamVjdG51bWJlciA9PiB7XG4gICAgICAgICAgICBwcm9qZWN0bnVtYmVyLnNlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgIH0pXG5cbiAgICAgICAgY29uc3QgcHJvamVjdCA9IGNyZWF0ZVByb2plY3QucHJvamVjdEZhY3RvcnkoXCJwcm9qZWN0XCIsIHRydWUsIGkpO1xuICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0KTtcbiAgICAgICAgXG4gICAgICAgIGFsbFByb2plY3RzLnB1c2gocHJvamVjdCk7XG5cbiAgICAgICAgY29uc3QgbmV3UHJvamVjdExhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgyXCIpO1xuICAgICAgICBuZXdQcm9qZWN0TGFiZWwudGV4dENvbnRlbnQgPSBcIk5ldyBQcm9qZWN0XCI7XG4gICAgICAgIG5ld1Byb2plY3RMYWJlbC5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWRcIik7XG4gICAgICAgIG5ld1Byb2plY3RMYWJlbC5jbGFzc0xpc3QuYWRkKFwic2VsZWN0b3JcIik7XG4gICAgICAgIG5ld1Byb2plY3RMYWJlbC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBpKTtcbiAgICAgICAgcHJvamVjdExpc3QuYXBwZW5kQ2hpbGQobmV3UHJvamVjdExhYmVsKTtcbiAgICAgICAgY29uc29sZS5sb2coYWxsUHJvamVjdHMpO1xuXG4gICAgICAgIGVkaXRidXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICBlZGl0YnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJvZmZsaW5lXCIpO1xuICAgICAgICBlZGl0YnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJvbmxpbmVcIik7XG4gICAgICAgIGRlbGV0ZWJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIGRlbGV0ZWJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwib2ZmbGluZVwiKTtcbiAgICAgICAgZGVsZXRlYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJvbmxpbmVcIik7XG4gICAgICAgIHNhdmVidXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICBzYXZlYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJvZmZsaW5lXCIpO1xuICAgICAgICBzYXZlYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJvbmxpbmVcIik7XG5cbiAgICB9XG5cbiAgICBjb25zdCBzZWxlY3RQcm9qZWN0ID0gKHByb2plY3QpID0+IHtcblxuICAgICAgICBjbGVhckFsbFNlbGVjdG9ycygpO1xuICAgICAgICBjbGVhckFsbFRvZG9TZWxlY3RvcnMoKTtcbiAgICAgICAgcHJvamVjdC50YXJnZXQuY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkXCIpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKHByb2plY3QudGFyZ2V0KVxuICAgICAgICBjb25zb2xlLmxvZyhhbGxQcm9qZWN0cyk7XG5cbiAgICAgICAgbGV0IHByb2plY3RpZCA9IHByb2plY3QudGFyZ2V0LmdldEF0dHJpYnV0ZShcImlkXCIpO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2cocHJvamVjdGlkKTtcblxuICAgICAgICBhbGxQcm9qZWN0cy5mb3JFYWNoKHByb2plY3RudW1iZXIgPT4ge1xuICAgICAgICAgICAgaWYgKHByb2plY3RudW1iZXIuaWQgPT0gcHJvamVjdGlkKSB7XG4gICAgICAgICAgICAgICAgcHJvamVjdG51bWJlci5zZWxlY3RlZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICBkaXNwbGF5UHJvamVjdHNUb2RvcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIC8vIHJldHVybiBzZWxlY3RlZFByb2plY3QgPSBwcm9qZWN0LnRhcmdldDtcbiAgICB9XG5cbiAgICBjb25zdCBjbGVhckFsbFNlbGVjdG9ycyA9ICgpID0+IHtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNlbGVjdGVkXCIpO1xuICAgICAgICBzZWxlY3RlZC5mb3JFYWNoKHNlbGVjdG9yID0+IHtcbiAgICAgICAgICAgIHNlbGVjdG9yLmNsYXNzTGlzdC5yZW1vdmUoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgfSlcblxuICAgICAgICBhbGxQcm9qZWN0cy5mb3JFYWNoKHByb2plY3RudW1iZXIgPT4ge1xuICAgICAgICAgICAgcHJvamVjdG51bWJlci5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8vIFRPRE8gRlVOQ1RJT05TIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICBjb25zdCBlZGl0VG9kbyA9ICgpID0+IHtcblxuICAgICAgICBhbGxQcm9qZWN0cy5mb3JFYWNoKHByb2plY3RudW1iZXIgPT4ge1xuICAgICAgICAgICAgaWYgKHByb2plY3RudW1iZXIuc2VsZWN0ZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBwcm9qZWN0bnVtYmVyLnRvZG9saXN0cy5mb3JFYWNoKHRvZG9udW1iZXIgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9kb251bWJlci5zZWxlY3RlZCA9PT0gdHJ1ZSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGR0b2RvYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHRvZG9idXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm9ubGluZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHRvZG9idXR0b24uY2xhc3NMaXN0LmFkZChcIm9mZmxpbmVcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVidXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVidXR0b24uY2xhc3NMaXN0LmFkZChcIm9ubGluZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVidXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm9mZmxpbmVcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2plY3RMaXN0LmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZG9saXN0cy5kaXNhYmxlZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXB0b2RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZWxlY3RlZHRvZG9cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wdG9kby5maXJzdENoaWxkLnNldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiLCBcInRydWVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wdG9kby5jaGlsZE5vZGVzWzFdLnNldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiLCBcInRydWVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wcmFkaW9idXR0b25zID0gdGVtcHRvZG8ucXVlcnlTZWxlY3RvckFsbChcImlucHV0XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcHJhZGlvYnV0dG9ucy5mb3JFYWNoKHJhZGlvYnV0dG9uID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhZGlvYnV0dG9uLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wZHVlZGF0ZSA9IHRlbXB0b2RvLnF1ZXJ5U2VsZWN0b3IoXCIuZHVlZGF0ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBkdWVkYXRlLnNldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiLCBcInRydWVcIik7XG4gICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgIH1cblxuICAgIGNvbnN0IHNhdmVUb2RvID0gKCkgPT4ge1xuICAgICAgICBhbGxQcm9qZWN0cy5mb3JFYWNoKHByb2plY3RudW1iZXIgPT4ge1xuICAgICAgICAgICAgaWYgKHByb2plY3RudW1iZXIuc2VsZWN0ZWQgPT09IHRydWUpIHtcblxuICAgICAgICAgICAgICAgIHByb2plY3RudW1iZXIudG9kb2xpc3RzLmZvckVhY2godG9kb251bWJlciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0b2RvbnVtYmVyLnNlbGVjdGVkID09PSB0cnVlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXB0aXRsZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRvZG90aXRsZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXB0aXRsZXMuZm9yRWFjaCh0ZW1wdGl0bGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXB0aXRsZS5zZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIiwgXCJmYWxzZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wZGVzY3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRvZG9kZXNjXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGRlc2NzLmZvckVhY2godGVtcGRlc2MgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBkZXNjLnNldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiLCBcImZhbHNlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXByYWRpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbnB1dFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXByYWRpby5mb3JFYWNoKHJhZGlvID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWRpby5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wZGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZGF0ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBkYXRlLmZvckVhY2goZGF0ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZS5zZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIiwgXCJmYWxzZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXB0b2RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZWxlY3RlZHRvZG9cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2RvbnVtYmVyLnRpdGxlID0gdGVtcHRvZG8uZmlyc3RDaGlsZC50ZXh0Q29udGVudDsgLy90aXRsZSBpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9kb251bWJlci5kZXNjcmlwdGlvbiA9IHRlbXB0b2RvLmNoaWxkTm9kZXNbMV0udGV4dENvbnRlbnQ7IC8vZGVzY3JpcHRpb24gaW5wdXRcblxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZW1wdG9kby5jaGlsZE5vZGVzWzJdLmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVtcHRvZG8uY2hpbGROb2Rlc1syXS5jaGlsZE5vZGVzW2ldLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codGVtcHRvZG8uY2hpbGROb2Rlc1syXS5jaGlsZE5vZGVzW2ldKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2RvbnVtYmVyLnByaW9yaXR5ID0gdGVtcHRvZG8uY2hpbGROb2Rlc1syXS5jaGlsZE5vZGVzW2ldLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wdG9kby5jaGlsZE5vZGVzWzJdLmNoaWxkTm9kZXNbaV0ucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2RvbnVtYmVyLmR1ZWRhdGUgPSB0ZW1wdG9kby5jaGlsZE5vZGVzWzNdLmNoaWxkTm9kZXNbMV0udGV4dENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0b2RvbnVtYmVyKTtcblxuICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgc2F2ZWJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgc2F2ZWJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwib25saW5lXCIpO1xuICAgICAgICAgICAgICAgIHNhdmVidXR0b24uY2xhc3NMaXN0LmFkZChcIm9mZmxpbmVcIik7XG5cbiAgICAgICAgICAgICAgICBhZGR0b2RvYnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgYWRkdG9kb2J1dHRvbi5jbGFzc0xpc3QuYWRkKFwib25saW5lXCIpO1xuICAgICAgICAgICAgICAgIGFkZHRvZG9idXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm9mZmxpbmVcIik7XG5cbiAgICAgICAgICAgICAgICBlZGl0YnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZWRpdGJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwib25saW5lXCIpO1xuICAgICAgICAgICAgICAgIGVkaXRidXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm9mZmxpbmVcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGNvbnN0IHNlbGVjdFRvZG8gPSAodG9kbykgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyh0b2RvLnRhcmdldCk7XG4gICAgICAgIGNsZWFyQWxsVG9kb1NlbGVjdG9ycygpO1xuXG4gICAgICAgIC8vIG1ha2Ugc3VyZSBoZXJlLCB0aGF0IHdoYXRldmVyIHRvZG9saXN0IHdhcyBzZWxlY3RlZCwgZ2V0cyByZXNlbGVjdGVkLlxuICAgICAgICAvLyBjb3VsZCB1c2UgYW5vdGhlciBvYmplY3QgLSBpZCAtIGhhdmUgaXQgbGlrZSB0b2RvbGlzdCArIGkuIFxuICAgICAgICAvLyBzbyBlYWNoIHRvZG9saXN0IGhhcyBhIHVuaXF1ZSBpZCBjb3JyZXNwb25kaW5nIHRvIHRoZSBwb3NpdGlvbiBpbiB0aGUgYXJyYXlcbiAgICAgICAgLy8gdGhlbiB3aGVuIHNlbGVjdGluZyB0aGVtIC0gc2VhcmNoIHRoZSB0b2RvbGlzdHMsIHdoaWNoZXZlciBpcyBjaGlsZCBub2RlIGlzIHNlbGVjdGVkLCBha2FcbiAgICAgICAgLy8gY2FyZDEgb3IgY2FyZDIsIGllLiBpZiBjYXJkW2ldID09PSB0b2RvbGlzdC5pZCB7dG9kb2xpc3Quc2VsZWN0ZWQgPSB0cnVlfSB0eXBlIHRoaW5nLiBcblxuICAgICAgICBsZXQgbm9kZXRlc3QgPSB0b2RvLnRhcmdldDtcbiAgICAgICAgbGV0IHRlc3QgPSBub2RldGVzdC5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKTtcbiAgICAgICAgbGV0IHRlc3RpZCA9IG5vZGV0ZXN0LmdldEF0dHJpYnV0ZShcImlkXCIpO1xuICAgICAgICBsZXQgbm9kZXRlc3QzID0gdG9kby50YXJnZXQucGFyZW50Tm9kZTtcbiAgICAgICAgbGV0IHRlc3QzID0gbm9kZXRlc3QzLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpO1xuICAgICAgICBsZXQgdGVzdDNpZCA9IG5vZGV0ZXN0My5nZXRBdHRyaWJ1dGUoXCJpZFwiKTtcbiAgICAgICAgbGV0IG5vZGV0ZXN0NCA9IG5vZGV0ZXN0My5wYXJlbnROb2RlO1xuICAgICAgICBsZXQgdGVzdDQgPSBub2RldGVzdDQuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIik7XG4gICAgICAgIGxldCB0ZXN0NGlkID0gbm9kZXRlc3Q0LmdldEF0dHJpYnV0ZShcImlkXCIpO1xuXG5cbiAgICAgICAgYWxsUHJvamVjdHMuZm9yRWFjaChwcm9qZWN0bnVtYmVyID0+IHtcbiAgICAgICAgICAgIGlmIChwcm9qZWN0bnVtYmVyLnNlbGVjdGVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgcHJvamVjdG51bWJlci50b2RvbGlzdHMuZm9yRWFjaCh0b2RvbGlzdG51bWJlciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0b2RvbGlzdG51bWJlci5pZCA9PSB0ZXN0aWQgfHwgdG9kb2xpc3RudW1iZXIuaWQgPT0gdGVzdDNpZCB8fCB0b2RvbGlzdG51bWJlci5pZCA9PSB0ZXN0NGlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2RvbGlzdG51bWJlci5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIGNvbnNvbGUubG9nKGFsbFByb2plY3RzKTtcblxuICAgICAgICBpZiAodGVzdCA9PT0gXCJ0b2RvbGlzdHNcIikge1xuXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGVzdCA9PT0gXCJ0b2RvY2FyZFwiKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0ZXN0KTtcbiAgICAgICAgICAgIHRvZG8udGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZHRvZG9cIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIml0J3MgZG9uZSB2aWEgY2hpbGQuXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKHRlc3QzID09PSBcInJhZGlvYnV0dG9uc1wiKSB7XG4gICAgICAgICAgICBsZXQgdGVzdDEwID0gdG9kby50YXJnZXQ7XG4gICAgICAgICAgICBsZXQgdGVzdDExID0gdGVzdDEwLnBhcmVudE5vZGU7XG4gICAgICAgICAgICB0ZXN0MTEucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWR0b2RvXCIpO1xuICAgICAgICAgICAgLy8gbGV0IHRlc3Q0ID0gdGVzdDMucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIC8vIHRlc3Q0LmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZHRvZG9cIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImEgZnVja2luZyBhbm5veWluZyBhc3MgcmFkaW8gYnV0dG9uIGVsZW1lbnQgd2FzIHByZXNzZWQuXCIpXG4gICAgICAgIH0gZWxzZSBpZiAodGVzdDMgPT09IFwiZGF0ZVwiKSB7XG4gICAgICAgICAgICBsZXQgdGVzdDEwID0gdG9kby50YXJnZXQ7XG4gICAgICAgICAgICBsZXQgdGVzdDExID0gdGVzdDEwLnBhcmVudE5vZGU7XG4gICAgICAgICAgICB0ZXN0MTEucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWR0b2RvXCIpO1xuICAgICAgICAgICAgLy8gbGV0IHRlc3Q0ID0gdGVzdDMucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIC8vIHRlc3Q0LmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZHRvZG9cIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImEgZnVja2luZyBhbm5veWluZyBhc3MgZHVlZGF0ZSBzaGl0IGVsZW1lbnQgd2FzIHByZXNzZWQuXCIpO1xuICAgICAgICAgICAgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgdGVzdDIgPSB0b2RvLnRhcmdldDtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRvZG8udGFyZ2V0LnBhcmVudE5vZGUpO1xuICAgICAgICAgICAgdGVzdDIucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWR0b2RvXCIpO1xuICAgICAgICAgICAgLy8gdGVzdDIuY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkZG9cIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIml0J3MgZG9uZSB2aWEgcGFyZW50LlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVkaXRidXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgZWRpdGJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwib25saW5lXCIpO1xuICAgICAgICBlZGl0YnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJvZmZsaW5lXCIpO1xuICAgICAgICBkZWxldGVidXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgZGVsZXRlYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJvbmxpbmVcIik7XG4gICAgICAgIGRlbGV0ZWJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwib2ZmbGluZVwiKTtcbiAgICAgICAgXG4gICAgfVxuXG4gICAgY29uc3QgY2xlYXJBbGxUb2RvU2VsZWN0b3JzID0gKCkgPT4ge1xuXG4gICAgICAgIGFsbFByb2plY3RzLmZvckVhY2gocHJvamVjdG51bWJlciA9PiB7XG4gICAgICAgICAgICBpZiAocHJvamVjdG51bWJlci5zZWxlY3RlZCA9PT0gdHJ1ZSkge1xuXG4gICAgICAgICAgICAgICAgcHJvamVjdG51bWJlci50b2RvbGlzdHMuZm9yRWFjaCh0b2RvbnVtYmVyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdG9kb251bWJlci5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgY29uc3Qgc2VsZWN0ZWR0b2RvcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2VsZWN0ZWR0b2RvXCIpO1xuICAgICAgICBzZWxlY3RlZHRvZG9zLmZvckVhY2goc2VsZWN0ZWR0b2RvID0+IHtcbiAgICAgICAgICAgIHNlbGVjdGVkdG9kby5jbGFzc0xpc3QucmVtb3ZlKFwic2VsZWN0ZWR0b2RvXCIpO1xuICAgICAgICB9KVxuICAgIH1cbiAgICBcblxuICAgIGNvbnN0IGNsZWFyQWxsVG9kb3MgPSAoKSA9PiB7XG4gICAgICAgIGFsbFByb2plY3RzLmZvckVhY2gocHJvamVjdG51bWJlciA9PiB7XG4gICAgICAgICAgICBpZiAocHJvamVjdG51bWJlci5zZWxlY3RlZCA9PT0gdHJ1ZSkge1xuXG4gICAgICAgICAgICAgICAgcHJvamVjdG51bWJlci50b2RvbGlzdHMuZm9yRWFjaCh0b2RvbnVtYmVyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdG9kb251bWJlci5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAvLyB0aGlzIG1ha2VzIGFsbCB0aGUgdG9kb3MgaW4gdGhlIHByb2plY3Qgc2VsZWN0ZWQgPSBmYWxzZS4gb2suXG5cbiAgICAgICAgbGV0IGNoaWxkcmVuID0gdG9kb2xpc3RzLmxhc3RFbGVtZW50Q2hpbGQ7XG4gICAgICAgIHdoaWxlIChjaGlsZHJlbikge1xuICAgICAgICB0b2RvbGlzdHMucmVtb3ZlQ2hpbGQoY2hpbGRyZW4pO1xuICAgICAgICBjaGlsZHJlbiA9IHRvZG9saXN0cy5sYXN0RWxlbWVudENoaWxkO1xuICAgIH1cblxuICAgIH1cblxuICAgIGNvbnN0IHJlZ2lzdGVyVG9kbyA9ICgpID0+IHtcblxuICAgIH1cblxuICAgIGNvbnN0IGRlc2lnbkVtcHR5VG9kbyA9ICgpID0+IHtcblxuICAgICAgICBjbGVhckFsbFRvZG9TZWxlY3RvcnMoKTtcblxuICAgICAgICBhZGR0b2RvYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgYWRkdG9kb2J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwib25saW5lXCIpO1xuICAgICAgICBhZGR0b2RvYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJvZmZsaW5lXCIpO1xuXG4gICAgICAgIGRlbGV0ZWJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICBkZWxldGVidXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm9mZmxpbmVcIik7XG4gICAgICAgIGRlbGV0ZWJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwib25saW5lXCIpO1xuICAgICAgICAvLyBlZGl0YnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIC8vIGVkaXRidXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm9mZmxpbmVcIik7XG4gICAgICAgIC8vIGVkaXRidXR0b24uY2xhc3NMaXN0LmFkZChcIm9ubGluZVwiKTtcbiAgICAgICAgc2F2ZWJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICBzYXZlYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJvZmZsaW5lXCIpO1xuICAgICAgICBzYXZlYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJvbmxpbmVcIik7XG4gICAgICAgIFxuXG4gICAgICAgIGxldCBjYXJkbnVtYmVyID0geCsrOyBcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHRvZG9jYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdG9kb2NhcmQuY2xhc3NMaXN0LmFkZChcInRvZG9jYXJkXCIpO1xuICAgICAgICB0b2RvY2FyZC5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWR0b2RvXCIpO1xuICAgICAgICB0b2RvY2FyZC5zZXRBdHRyaWJ1dGUoXCJpZFwiLGNhcmRudW1iZXIpO1xuICAgICAgICB0b2RvbGlzdHMuYXBwZW5kQ2hpbGQodG9kb2NhcmQpO1xuXG4gICAgICAgIGNvbnN0IHRvZG90aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoM1wiKTtcbiAgICAgICAgdG9kb3RpdGxlLmNsYXNzTGlzdC5hZGQoXCJ0b2RvdGl0bGVcIik7XG4gICAgICAgIHRvZG90aXRsZS5zZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIiwgXCJ0cnVlXCIpO1xuICAgICAgICB0b2RvdGl0bGUudGV4dENvbnRlbnQgPSBcIkdpdmUgeW91ciB0b2RvIGEgdGl0bGVcIlxuICAgICAgICB0b2RvY2FyZC5hcHBlbmRDaGlsZCh0b2RvdGl0bGUpO1xuXG4gICAgICAgIGNvbnN0IHRvZG9kZXNjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICAgIHRvZG9kZXNjLmNsYXNzTGlzdC5hZGQoXCJ0b2RvZGVzY1wiKTtcbiAgICAgICAgdG9kb2Rlc2Muc2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgdG9kb2NhcmQuYXBwZW5kQ2hpbGQodG9kb2Rlc2MpO1xuXG4gICAgICAgIGNvbnN0IHJhZGlvYnV0dG9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHJhZGlvYnV0dG9ucy5jbGFzc0xpc3QuYWRkKFwicmFkaW9idXR0b25zXCIpO1xuICAgICAgICB0b2RvY2FyZC5hcHBlbmRDaGlsZChyYWRpb2J1dHRvbnMpO1xuICAgICAgICBjb25zdCBwcmlvdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgcHJpb3RpdGxlLmNsYXNzTGlzdC5hZGQoXCJwcmlvdGl0bGVcIik7XG4gICAgICAgIHByaW90aXRsZS50ZXh0Q29udGVudCA9IFwiUHJpb3JpdHk6XCI7XG4gICAgICAgIHJhZGlvYnV0dG9ucy5hcHBlbmRDaGlsZChwcmlvdGl0bGUpO1xuICAgICAgICBjb25zdCB0b2RvcHJpb2xvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgdG9kb3ByaW9sb3cuY2xhc3NMaXN0LmFkZChcInRvZG9wcmlvbG93XCIpO1xuICAgICAgICB0b2RvcHJpb2xvdy5zZXRBdHRyaWJ1dGUoXCJpZFwiLFwicHJpb1wiKTtcbiAgICAgICAgdG9kb3ByaW9sb3cuc2V0QXR0cmlidXRlKFwibmFtZVwiLFwicHJpb1wiKTtcbiAgICAgICAgdG9kb3ByaW9sb3cuc2V0QXR0cmlidXRlKFwidHlwZVwiLFwicmFkaW9cIik7XG4gICAgICAgIHRvZG9wcmlvbG93LnNldEF0dHJpYnV0ZShcInZhbHVlXCIsXCJsb3dcIik7XG4gICAgICAgIHJhZGlvYnV0dG9ucy5hcHBlbmRDaGlsZCh0b2RvcHJpb2xvdyk7XG4gICAgICAgIGNvbnN0IHRvZG9wcmlvbG93bGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgICAgIHRvZG9wcmlvbG93bGFiZWwudGV4dENvbnRlbnQgPSBcIkxvd1wiO1xuICAgICAgICB0b2RvcHJpb2xvd2xhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcImxvd1wiKTtcbiAgICAgICAgcmFkaW9idXR0b25zLmFwcGVuZENoaWxkKHRvZG9wcmlvbG93bGFiZWwpO1xuICAgICAgICBjb25zdCB0b2RvcHJpb21lZGl1bSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgdG9kb3ByaW9tZWRpdW0uY2xhc3NMaXN0LmFkZChcInRvZG9wcmlvbWVkaXVtXCIpO1xuICAgICAgICB0b2RvcHJpb21lZGl1bS5zZXRBdHRyaWJ1dGUoXCJpZFwiLFwicHJpb1wiKTtcbiAgICAgICAgdG9kb3ByaW9tZWRpdW0uc2V0QXR0cmlidXRlKFwibmFtZVwiLFwicHJpb1wiKTtcbiAgICAgICAgdG9kb3ByaW9tZWRpdW0uc2V0QXR0cmlidXRlKFwidHlwZVwiLFwicmFkaW9cIik7XG4gICAgICAgIHRvZG9wcmlvbWVkaXVtLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsXCJtZWRpdW1cIik7XG4gICAgICAgIHJhZGlvYnV0dG9ucy5hcHBlbmRDaGlsZCh0b2RvcHJpb21lZGl1bSk7XG4gICAgICAgIGNvbnN0IHRvZG9wcmlvbWVkaXVtbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgICAgIHRvZG9wcmlvbWVkaXVtbGFiZWwudGV4dENvbnRlbnQgPSBcIk1lZGl1bVwiO1xuICAgICAgICB0b2RvcHJpb21lZGl1bWxhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcIm1lZGl1bVwiKTtcbiAgICAgICAgcmFkaW9idXR0b25zLmFwcGVuZENoaWxkKHRvZG9wcmlvbWVkaXVtbGFiZWwpO1xuICAgICAgICBjb25zdCB0b2RvcHJpb2hpZ2ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICAgIHRvZG9wcmlvaGlnaC5jbGFzc0xpc3QuYWRkKFwidG9kb3ByaW9oaWdoXCIpO1xuICAgICAgICB0b2RvcHJpb2hpZ2guc2V0QXR0cmlidXRlKFwiaWRcIixcInByaW9cIik7XG4gICAgICAgIHRvZG9wcmlvaGlnaC5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsXCJwcmlvXCIpO1xuICAgICAgICB0b2RvcHJpb2hpZ2guc2V0QXR0cmlidXRlKFwidHlwZVwiLFwicmFkaW9cIik7XG4gICAgICAgIHRvZG9wcmlvaGlnaC5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLFwiaGlnaFwiKTtcbiAgICAgICAgcmFkaW9idXR0b25zLmFwcGVuZENoaWxkKHRvZG9wcmlvaGlnaCk7XG4gICAgICAgIGNvbnN0IHRvZG9wcmlvaGlnaGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgICAgICB0b2RvcHJpb2hpZ2hsYWJlbC50ZXh0Q29udGVudCA9IFwiSGlnaFwiO1xuICAgICAgICB0b2RvcHJpb2hpZ2hsYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJoaWdoXCIpO1xuICAgICAgICByYWRpb2J1dHRvbnMuYXBwZW5kQ2hpbGQodG9kb3ByaW9oaWdobGFiZWwpO1xuXG4gICAgICAgIGNvbnN0IGRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBkYXRlLmNsYXNzTGlzdC5hZGQoXCJkYXRlXCIpO1xuICAgICAgICB0b2RvY2FyZC5hcHBlbmRDaGlsZChkYXRlKTtcblxuICAgICAgICBjb25zdCBkYXRlbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgICAgIGRhdGVsYWJlbC5jbGFzc0xpc3QuYWRkKFwiZGF0ZWxhYmVsXCIpO1xuICAgICAgICBkYXRlbGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwiZHVlZGF0ZVwiKTtcbiAgICAgICAgZGF0ZWxhYmVsLnRleHRDb250ZW50ID0gXCJEdWU6IFwiXG4gICAgICAgIGRhdGUuYXBwZW5kQ2hpbGQoZGF0ZWxhYmVsKTtcblxuICAgICAgICBjb25zdCBkdWVkYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICAgIGR1ZWRhdGUuY2xhc3NMaXN0LmFkZChcImR1ZWRhdGVcIik7XG4gICAgICAgIGR1ZWRhdGUuc2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgZGF0ZS5hcHBlbmRDaGlsZChkdWVkYXRlKTtcblxuICAgICAgICAvLyB1bm5lZWRlZCwgdXNpbmcgdGV4dGJveFxuICAgICAgICAvLyBjb25zdCBkdWVkYXRlID0gIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIC8vIGR1ZWRhdGUuY2xhc3NMaXN0LmFkZChcImRhdGVcIik7XG4gICAgICAgIC8vIHRvZG9jYXJkLmFwcGVuZENoaWxkKGR1ZWRhdGUpO1xuICAgICAgICAvLyBjb25zdCBkYXRldGl0bGVsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICAgICAgLy8gZGF0ZXRpdGxlbGFiZWwuY2xhc3NMaXN0LmFkZChcImRhdGV0aXRsZVwiKTtcbiAgICAgICAgLy8gZGF0ZXRpdGxlbGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwiZHVlZGF0ZVwiKTtcbiAgICAgICAgLy8gZGF0ZXRpdGxlbGFiZWwudGV4dENvbnRlbnQgPSBcIkR1ZSBEYXRlOlwiO1xuICAgICAgICAvLyBkdWVkYXRlLmFwcGVuZENoaWxkKGRhdGV0aXRsZWxhYmVsKTtcbiAgICAgICAgLy8gY29uc3QgZGF0ZXRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICAvLyBkYXRldGl0bGUuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImRhdGVcIik7XG4gICAgICAgIC8vIGRhdGV0aXRsZS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImR1ZWRhdGVcIik7XG4gICAgICAgIC8vIGRhdGV0aXRsZS5jbGFzc0xpc3QuYWRkKFwidG9kb2R1ZWRhdGVcIik7XG4gICAgICAgIC8vIC8vIGRhdGV0aXRsZS5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBcIlwiKTtcbiAgICAgICAgLy8gZHVlZGF0ZS5hcHBlbmRDaGlsZChkYXRldGl0bGUpO1xuXG4gICAgICAgIGNvbnN0IHRvZG9saXN0ID0gY3JlYXRlUHJvamVjdC50b2RvRmFjdG9yeShcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCB0cnVlLCBjYXJkbnVtYmVyKTtcblxuICAgICAgICBhbGxQcm9qZWN0cy5mb3JFYWNoKHByb2plY3RudW1iZXIgPT4ge1xuICAgICAgICAgICAgaWYgKHByb2plY3RudW1iZXIuc2VsZWN0ZWQgPT09IHRydWUpIHtcblxuICAgICAgICAgICAgICAgIHByb2plY3RudW1iZXIudG9kb2xpc3RzLnB1c2godG9kb2xpc3QpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHByb2plY3RudW1iZXIudG9kb2xpc3RzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBjb25zdCBkaXNwbGF5UHJvamVjdHNUb2RvcyA9ICgpID0+IHtcblxuICAgICAgICBjbGVhckFsbFRvZG9zKCk7XG5cbiAgICAgICAgYWxsUHJvamVjdHMuZm9yRWFjaChwcm9qZWN0bnVtYmVyID0+IHtcbiAgICAgICAgICAgIGlmIChwcm9qZWN0bnVtYmVyLnNlbGVjdGVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcHJvamVjdG51bWJlci50b2RvbGlzdHMuZm9yRWFjaCh0b2RvbGlzdCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2RvY2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9jYXJkLmNsYXNzTGlzdC5hZGQoXCJ0b2RvY2FyZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gdG9kb2NhcmQuY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkdG9kb1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdG9kb2NhcmQuc2V0QXR0cmlidXRlKFwiaWRcIiwgdG9kb2xpc3QuaWQpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvbGlzdHMuYXBwZW5kQ2hpbGQodG9kb2NhcmQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvZG90aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoM1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdG9kb3RpdGxlLmNsYXNzTGlzdC5hZGQoXCJ0b2RvdGl0bGVcIik7XG4gICAgICAgICAgICAgICAgICAgIHRvZG90aXRsZS5zZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIiwgXCJmYWxzZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgdG9kb3RpdGxlLnRleHRDb250ZW50ID0gdG9kb2xpc3QudGl0bGVcbiAgICAgICAgICAgICAgICAgICAgdG9kb2NhcmQuYXBwZW5kQ2hpbGQodG9kb3RpdGxlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2RvZGVzYyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvZGVzYy5jbGFzc0xpc3QuYWRkKFwidG9kb2Rlc2NcIik7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9kZXNjLnNldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiLCBcImZhbHNlXCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvZGVzYy50ZXh0Q29udGVudCA9IHRvZG9saXN0LmRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgICAgICB0b2RvY2FyZC5hcHBlbmRDaGlsZCh0b2RvZGVzYyk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmFkaW9idXR0b25zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmFkaW9idXR0b25zLmNsYXNzTGlzdC5hZGQoXCJyYWRpb2J1dHRvbnNcIik7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9jYXJkLmFwcGVuZENoaWxkKHJhZGlvYnV0dG9ucyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByaW90aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICAgICAgICAgICAgICBwcmlvdGl0bGUuY2xhc3NMaXN0LmFkZChcInByaW90aXRsZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgcHJpb3RpdGxlLnRleHRDb250ZW50ID0gXCJQcmlvcml0eTpcIjtcbiAgICAgICAgICAgICAgICAgICAgcmFkaW9idXR0b25zLmFwcGVuZENoaWxkKHByaW90aXRsZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvZG9wcmlvbG93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvcHJpb2xvdy5jbGFzc0xpc3QuYWRkKFwidG9kb3ByaW9sb3dcIik7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9wcmlvbG93LnNldEF0dHJpYnV0ZShcImlkXCIsXCJwcmlvXCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvcHJpb2xvdy5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsXCJwcmlvXCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvcHJpb2xvdy5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJyYWRpb1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdG9kb3ByaW9sb3cuc2V0QXR0cmlidXRlKFwidmFsdWVcIixcImxvd1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdG9kb3ByaW9sb3cuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJcIik7XG4gICAgICAgICAgICAgICAgICAgIHJhZGlvYnV0dG9ucy5hcHBlbmRDaGlsZCh0b2RvcHJpb2xvdyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvZG9wcmlvbG93bGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9wcmlvbG93bGFiZWwudGV4dENvbnRlbnQgPSBcIkxvd1wiO1xuICAgICAgICAgICAgICAgICAgICB0b2RvcHJpb2xvd2xhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcImxvd1wiKTtcbiAgICAgICAgICAgICAgICAgICAgcmFkaW9idXR0b25zLmFwcGVuZENoaWxkKHRvZG9wcmlvbG93bGFiZWwpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2RvcHJpb21lZGl1bSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgICAgICAgICAgICAgdG9kb3ByaW9tZWRpdW0uY2xhc3NMaXN0LmFkZChcInRvZG9wcmlvbWVkaXVtXCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvcHJpb21lZGl1bS5zZXRBdHRyaWJ1dGUoXCJpZFwiLFwicHJpb1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdG9kb3ByaW9tZWRpdW0uc2V0QXR0cmlidXRlKFwibmFtZVwiLFwicHJpb1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdG9kb3ByaW9tZWRpdW0uc2V0QXR0cmlidXRlKFwidHlwZVwiLFwicmFkaW9cIik7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9wcmlvbWVkaXVtLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsXCJtZWRpdW1cIik7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9wcmlvbWVkaXVtLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICByYWRpb2J1dHRvbnMuYXBwZW5kQ2hpbGQodG9kb3ByaW9tZWRpdW0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2RvcHJpb21lZGl1bWxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvcHJpb21lZGl1bWxhYmVsLnRleHRDb250ZW50ID0gXCJNZWRpdW1cIjtcbiAgICAgICAgICAgICAgICAgICAgdG9kb3ByaW9tZWRpdW1sYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJtZWRpdW1cIik7XG4gICAgICAgICAgICAgICAgICAgIHJhZGlvYnV0dG9ucy5hcHBlbmRDaGlsZCh0b2RvcHJpb21lZGl1bWxhYmVsKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9kb3ByaW9oaWdoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvcHJpb2hpZ2guY2xhc3NMaXN0LmFkZChcInRvZG9wcmlvaGlnaFwiKTtcbiAgICAgICAgICAgICAgICAgICAgdG9kb3ByaW9oaWdoLnNldEF0dHJpYnV0ZShcImlkXCIsXCJwcmlvXCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvcHJpb2hpZ2guc2V0QXR0cmlidXRlKFwibmFtZVwiLFwicHJpb1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdG9kb3ByaW9oaWdoLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInJhZGlvXCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvcHJpb2hpZ2guc2V0QXR0cmlidXRlKFwidmFsdWVcIixcImhpZ2hcIik7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9wcmlvaGlnaC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmFkaW9idXR0b25zLmFwcGVuZENoaWxkKHRvZG9wcmlvaGlnaCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvZG9wcmlvaGlnaGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgICAgICAgICAgICAgICAgICB0b2RvcHJpb2hpZ2hsYWJlbC50ZXh0Q29udGVudCA9IFwiSGlnaFwiO1xuICAgICAgICAgICAgICAgICAgICB0b2RvcHJpb2hpZ2hsYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJoaWdoXCIpO1xuICAgICAgICAgICAgICAgICAgICByYWRpb2J1dHRvbnMuYXBwZW5kQ2hpbGQodG9kb3ByaW9oaWdobGFiZWwpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0b2RvbGlzdC5wcmlvcml0eSA9PT0gXCJsb3dcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9kb3ByaW9sb3cuc2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiLCBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0b2RvbGlzdC5wcmlvcml0eSA9PT0gXCJtZWRpdW1cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9kb3ByaW9tZWRpdW0uc2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiLCBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0b2RvbGlzdC5wcmlvcml0eSA9PT0gXCJoaWdoXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZG9wcmlvaGlnaC5zZXRBdHRyaWJ1dGUoXCJjaGVja2VkXCIsIFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIGRhdGUuY2xhc3NMaXN0LmFkZChcImRhdGVcIik7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9jYXJkLmFwcGVuZENoaWxkKGRhdGUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICAgICAgICAgICAgICAgICAgZGF0ZWxhYmVsLmNsYXNzTGlzdC5hZGQoXCJkYXRlbGFiZWxcIik7XG4gICAgICAgICAgICAgICAgICAgIGRhdGVsYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJkdWVkYXRlXCIpO1xuICAgICAgICAgICAgICAgICAgICBkYXRlbGFiZWwudGV4dENvbnRlbnQgPSBcIkR1ZTogXCJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZS5hcHBlbmRDaGlsZChkYXRlbGFiZWwpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGR1ZWRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgICAgICAgICAgICAgZHVlZGF0ZS5jbGFzc0xpc3QuYWRkKFwiZHVlZGF0ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgZHVlZGF0ZS5zZXRBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIiwgXCJmYWxzZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgZHVlZGF0ZS50ZXh0Q29udGVudCA9IHRvZG9saXN0LmR1ZWRhdGU7XG4gICAgICAgICAgICAgICAgICAgIGRhdGUuYXBwZW5kQ2hpbGQoZHVlZGF0ZSk7XG5cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgfVxuXG4gICAgY29uc3QgZGVsZXRlVG9kbyA9ICgpID0+IHtcbiAgICAgICAgYWxsUHJvamVjdHMuZm9yRWFjaChwcm9qZWN0bnVtYmVyID0+IHtcbiAgICAgICAgICAgIGlmIChwcm9qZWN0bnVtYmVyLnNlbGVjdGVkID09PSB0cnVlKSB7XG5cbiAgICAgICAgICAgICAgICBwcm9qZWN0bnVtYmVyLnRvZG9saXN0cy5mb3JFYWNoKHRvZG9udW1iZXIgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9kb251bWJlci5zZWxlY3RlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcHRvZG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlbGVjdGVkdG9kb1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXB0b2RvLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9kb251bWJlci5kZWxldGVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm90IHNwbGljaW5nISBwcm9qZWN0bnVtYmVyLnRvZG9saXN0cy5TcGxpY2UodG9kb251bWJlci5pZClcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codG9kb251bWJlcik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHRvZG9idXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHRvZG9idXR0b24uY2xhc3NMaXN0LmFkZChcIm9ubGluZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHRvZG9idXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm9mZmxpbmVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBzYXZlYnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBzYXZlYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJvZmZsaW5lXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZWJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwib25saW5lXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICBkZWxldGVidXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICBkZWxldGVidXR0b24uY2xhc3NMaXN0LmFkZChcIm9mZmxpbmVcIik7XG4gICAgICAgIGRlbGV0ZWJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwib25saW5lXCIpO1xuICAgICAgICAvLyBlZGl0YnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgLy8gZWRpdGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwib25saW5lXCIpO1xuICAgICAgICAvLyBlZGl0YnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJvZmZsaW5lXCIpO1xuICAgIH1cblxuICAgIC8vIEVWRU5UTElTVEVORVJTXG5cbiAgICBwcm9qZWN0TGlzdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2VsZWN0UHJvamVjdCk7XG4gICAgdG9kb2xpc3RzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzZWxlY3RUb2RvKTtcbiAgICBzYXZlYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzYXZlVG9kbyk7XG4gICAgZGVsZXRlYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBkZWxldGVUb2RvKTtcbiAgICBlZGl0YnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlZGl0VG9kbyk7XG4gICAgcmV0dXJuIHsgYWRkUHJvamVjdCwgZGVzaWduRW1wdHlUb2RvLCBhbGxQcm9qZWN0c307XG5cbn0pKCk7XG5cbmV4cG9ydCB7ZGVzaWduUHJvamVjdH07IiwiaW1wb3J0IHtkZXNpZ25Qcm9qZWN0fSBmcm9tIFwiLi4vc3JjL2Rlc2lnblwiXG5cbmNvbnN0IGNyZWF0ZVByb2plY3QgPSAoKCkgPT4ge1xuXG4gICAgY29uc3QgUHJvamVjdHMgPSBbXTtcblxuICAgIFxuXG4gICAgY29uc3QgcHJvamVjdEZhY3RvcnkgPSAobmFtZSwgc2VsZWN0ZWQsIGlkKSA9PiB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB0b2RvbGlzdHMgPSBbXTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7IG5hbWUsIHNlbGVjdGVkLCB0b2RvbGlzdHMsIGlkfTtcbiAgICB9XG5cbiAgICBjb25zdCB0b2RvRmFjdG9yeSA9ICh0aXRsZSwgZGVzY3JpcHRpb24sIHByaW9yaXR5LCBkdWVkYXRlLCBzZWxlY3RlZCwgaWQpID0+IHtcblxuICAgICAgICBsZXQgZGVsZXRlZCA9IGZhbHNlO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHsgdGl0bGUsIGRlc2NyaXB0aW9uLCBwcmlvcml0eSwgZHVlZGF0ZSwgc2VsZWN0ZWQsIGlkLCBkZWxldGVkfTtcbiAgICB9XG5cblxuICAgIC8vIGNvbnN0IGFkZFRvZG8gPSAoc2VsZWN0ZWRQcm9qZWN0KSA9PiB7XG4gICAgLy8gICAgIGNvbnNvbGUubG9nKFwiY3J5XCIpO1xuICAgIC8vIH1cblxuXG4gICAgcmV0dXJuIHsgcHJvamVjdEZhY3RvcnksIFByb2plY3RzLCB0b2RvRmFjdG9yeSB9O1xuXG59KSgpO1xuXG5cblxuZXhwb3J0IHtjcmVhdGVQcm9qZWN0fTsiLCJpbXBvcnQge2NyZWF0ZVByb2plY3R9IGZyb20gXCIuLi9zcmMvbG9naWNcIlxuaW1wb3J0IHtkZXNpZ25Qcm9qZWN0fSBmcm9tIFwiLi4vc3JjL2Rlc2lnblwiXG5cblxuXG5jb25zdCBhZGRQcm9qZWN0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjcmVhdGVwcm9qZWN0XCIpO1xuYWRkUHJvamVjdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZGVzaWduUHJvamVjdC5hZGRQcm9qZWN0KTtcblxuY29uc3QgYWRkdG9kb2J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkdG9kb1wiKTtcbmFkZHRvZG9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGRlc2lnblByb2plY3QuZGVzaWduRW1wdHlUb2RvKTtcblxuY29uc3QgcHJvamVjdCA9IGNyZWF0ZVByb2plY3QucHJvamVjdEZhY3RvcnkoXCJHZW5lcmFsXCIsIHRydWUsIDApO1xuZGVzaWduUHJvamVjdC5hbGxQcm9qZWN0cy5wdXNoKHByb2plY3QpO1xuLy8gYWRkUHJvamVjdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuLy8gICAgIGNvbnNvbGUubG9nKFwidGVzdGluZzJcIilcbi8vIH0pO1xuXG5cblxuIl0sIm5hbWVzIjpbImRlc2lnblByb2plY3QiLCJhbGxQcm9qZWN0cyIsIngiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwcm9qZWN0TGlzdCIsInRvZG9saXN0cyIsInNhdmVidXR0b24iLCJkaXNhYmxlZCIsImFkZHRvZG9idXR0b24iLCJkZWxldGVidXR0b24iLCJlZGl0YnV0dG9uIiwiY2xlYXJBbGxTZWxlY3RvcnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsInNlbGVjdG9yIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwicHJvamVjdG51bWJlciIsInNlbGVjdGVkIiwiY2xlYXJBbGxUb2RvU2VsZWN0b3JzIiwidG9kb251bWJlciIsInNlbGVjdGVkdG9kbyIsImNsZWFyQWxsVG9kb3MiLCJjaGlsZHJlbiIsImxhc3RFbGVtZW50Q2hpbGQiLCJyZW1vdmVDaGlsZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJwcm9qZWN0IiwidGFyZ2V0IiwiYWRkIiwiY29uc29sZSIsImxvZyIsInByb2plY3RpZCIsImdldEF0dHJpYnV0ZSIsImlkIiwidG9kb2xpc3QiLCJ0b2RvY2FyZCIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJhcHBlbmRDaGlsZCIsInRvZG90aXRsZSIsInRleHRDb250ZW50IiwidGl0bGUiLCJ0b2RvZGVzYyIsImRlc2NyaXB0aW9uIiwicmFkaW9idXR0b25zIiwicHJpb3RpdGxlIiwidG9kb3ByaW9sb3ciLCJ0b2RvcHJpb2xvd2xhYmVsIiwidG9kb3ByaW9tZWRpdW0iLCJ0b2RvcHJpb21lZGl1bWxhYmVsIiwidG9kb3ByaW9oaWdoIiwidG9kb3ByaW9oaWdobGFiZWwiLCJwcmlvcml0eSIsImRhdGUiLCJkYXRlbGFiZWwiLCJkdWVkYXRlIiwidG9kbyIsIm5vZGV0ZXN0IiwidGVzdCIsInRlc3RpZCIsIm5vZGV0ZXN0MyIsInBhcmVudE5vZGUiLCJ0ZXN0MyIsInRlc3QzaWQiLCJub2RldGVzdDQiLCJ0ZXN0NGlkIiwidG9kb2xpc3RudW1iZXIiLCJ0ZXN0MiIsInRlbXB0aXRsZSIsInRlbXBkZXNjIiwicmFkaW8iLCJ0ZW1wdG9kbyIsImZpcnN0Q2hpbGQiLCJjaGlsZE5vZGVzIiwiaSIsImxlbmd0aCIsImNoZWNrZWQiLCJ2YWx1ZSIsInJlbW92ZUF0dHJpYnV0ZSIsImRlbGV0ZWQiLCJyYWRpb2J1dHRvbiIsImFkZFByb2plY3QiLCJjcmVhdGVQcm9qZWN0IiwicHJvamVjdEZhY3RvcnkiLCJwdXNoIiwibmV3UHJvamVjdExhYmVsIiwiZGVzaWduRW1wdHlUb2RvIiwiY2FyZG51bWJlciIsInRvZG9GYWN0b3J5IiwibmFtZSIsIlByb2plY3RzIl0sInNvdXJjZVJvb3QiOiIifQ==