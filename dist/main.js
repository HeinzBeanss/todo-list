(()=>{"use strict";const e=(()=>{let e,o,d=[],s=1;document.querySelector(".sidebartop");const l=document.querySelector(".projectList"),c=document.querySelector(".todolists"),n=document.querySelector(".savebutton");n.disabled=!0;const a=document.querySelector(".addtodo"),i=document.querySelector(".deletetodo");i.disabled=!0;const r=document.querySelector(".edittodo");r.disabled=!0;const u=()=>{document.querySelectorAll(".selected").forEach((e=>{e.classList.remove("selected")}))},p=()=>{document.querySelectorAll(".selectedtodo").forEach((e=>{e.classList.remove("selectedtodo")}))};return l.addEventListener("click",(t=>(console.log(t),console.log(t.target),console.log(t.target.textContent),u(),t.target.classList.add("selected"),e=t.target))),c.addEventListener("click",(e=>{console.log(e.target),p();let t=e.target.getAttribute("class"),d=e.target.parentNode.getAttribute("class");if(console.log(d),"todolists"===t);else if("todocard"===t)console.log(t),e.target.classList.add("selectedtodo"),console.log("it's done via child.");else if("radiobuttons"===d)e.target.parentNode.parentNode.classList.add("selectedtodo"),console.log("a fucking annoying ass radio button element was pressed.");else if("date"===d)e.target.parentNode.parentNode.classList.add("selectedtodo"),console.log("a fucking annoying ass duedate shit element was pressed.");else{let t=e.target;console.log(e.target.parentNode),t.parentNode.classList.add("selectedtodo"),console.log("it's done via parent.")}return o=e.target})),n.addEventListener("click",(()=>{d.forEach((e=>{!0===e.selected&&(e.todolists.forEach((e=>{if(!0===e.selected){const t=document.querySelector(".selectedtodo");e.title=t.firstChild.textContent,e.description=t.childNodes[1].textContent;const o=t.childNodes[2];for(let t=0;t<o.length;t++)o[t].checked&&(e.priority=o[t].value);console.log(e)}})),console.log("adding this to the database, sir!"))}))})),{addProject:()=>{let e=s++;d.forEach((e=>{e.selected=!1}));const o=t.projectFactory("project"+e,!0);console.log(o),d.push(o),u();const c=document.createElement("h2");c.textContent="New Project",c.classList.add("selected"),c.classList.add("selector"),l.appendChild(c),console.log(d)},designEmptyTodo:()=>{p(),a.disabled=!0,a.classList.remove("online"),a.classList.add("offline"),i.disabled=!1,i.classList.remove("offline"),i.classList.add("online"),r.disabled=!1,r.classList.remove("offline"),r.classList.add("online"),n.disabled=!1,n.classList.remove("offline"),n.classList.add("online");const e=document.createElement("div");e.classList.add("todocard"),e.classList.add("selectedtodo"),c.appendChild(e);const o=document.createElement("h3");o.classList.add("todotitle"),o.setAttribute("contenteditable","true"),o.textContent="Give your todo a title",e.appendChild(o);const s=document.createElement("p");s.classList.add("tododesc"),s.setAttribute("contenteditable","true"),e.appendChild(s);const l=document.createElement("div");l.classList.add("radiobuttons"),e.appendChild(l);const u=document.createElement("p");u.classList.add("priotitle"),u.textContent="Priority:",l.appendChild(u);const m=document.createElement("input");m.classList.add("todopriolow"),m.setAttribute("id","prio"),m.setAttribute("name","prio"),m.setAttribute("type","radio"),m.setAttribute("value","low"),l.appendChild(m);const g=document.createElement("label");g.textContent="Low",g.setAttribute("for","low"),l.appendChild(g);const b=document.createElement("input");b.classList.add("todopriomedium"),b.setAttribute("id","prio"),b.setAttribute("name","prio"),b.setAttribute("type","radio"),b.setAttribute("value","medium"),l.appendChild(b);const h=document.createElement("label");h.textContent="Medium",h.setAttribute("for","medium"),l.appendChild(h);const L=document.createElement("input");L.classList.add("todopriohigh"),L.setAttribute("id","prio"),L.setAttribute("name","prio"),L.setAttribute("type","radio"),L.setAttribute("value","high"),l.appendChild(L);const y=document.createElement("label");y.textContent="High",y.setAttribute("for","high"),l.appendChild(y);const E=document.createElement("div");E.classList.add("date"),e.appendChild(E);const f=document.createElement("label");f.classList.add("datelabel"),f.setAttribute("for","duedate"),f.textContent="Due: ",E.appendChild(f);const C=document.createElement("p");C.classList.add("duedate"),C.setAttribute("contenteditable","true"),E.appendChild(C);const A=t.todoFactory("","","","",!0);d.forEach((e=>{!0===e.selected&&(e.todolists.push(A),console.log(e.todolists))}))},allProjects:d}})(),t={projectFactory:(e,t)=>({name:e,selected:t,todolists:[]}),Projects:[],todoFactory:(e,t,o,d,s)=>({title:e,description:t,priority:o,duedate:d,selected:s})};document.querySelector("#createproject").addEventListener("click",e.addProject),document.querySelector(".addtodo").addEventListener("click",e.designEmptyTodo);const o=t.projectFactory("project",!0);e.allProjects.push(o)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTUMsRUFBWWpFLFNBQVNpRCxjQUFjLFNBQ3pDZ0IsRUFBVXBELFVBQVVVLElBQUksYUFDeEIwQyxFQUFVWCxhQUFhLE1BQU8sV0FDOUJXLEVBQVUzQyxZQUFjLFFBQ3hCMEMsRUFBS2QsWUFBWWUsR0FFakIsTUFBTUMsRUFBVWxFLFNBQVNpRCxjQUFjLEtBQ3ZDaUIsRUFBUXJELFVBQVVVLElBQUksV0FDdEIyQyxFQUFRWixhQUFhLGtCQUFtQixRQUN4Q1UsRUFBS2QsWUFBWWdCLEdBa0JqQixNQUFNQyxFQUFXdEIsRUFBY3VCLFlBQVksR0FBSSxHQUFJLEdBQUksSUFBSSxHQUUzRHRFLEVBQVlhLFNBQVFtQixLQUNlLElBQTNCQSxFQUFjQyxXQUVkRCxFQUFjM0IsVUFBVTRDLEtBQUtvQixHQUM3QmhELFFBQVFDLElBQUlVLEVBQWMzQixXQUM5QixHQUNILEVBV2lDTCxjQUV6QyxFQTNTcUIsR0NBaEIrQyxFQXdCSyxDQUFFQyxlQWxCYyxDQUFDdUIsRUFBTXRDLEtBSW5CLENBQUVzQyxPQUFNdEMsV0FBVTVCLFVBRlAsS0FnQkdtRSxTQXRCUixHQXNCa0JGLFlBWGYsQ0FBQ2xDLEVBQU9FLEVBQWFNLEVBQVV3QixFQUFTbkMsS0FFakQsQ0FBRUcsUUFBT0UsY0FBYU0sV0FBVXdCLFVBQVNuQyxjQ2QvQi9CLFNBQVNDLGNBQWMsa0JBQy9CZ0IsaUJBQWlCLFFBQVN0QixFQUFjaUQsWUFFbkM1QyxTQUFTQyxjQUFjLFlBQy9CZ0IsaUJBQWlCLFFBQVN0QixFQUFjd0QsaUJBRXRELE1BQU1qQyxFQUFVMkIsRUFBY0MsZUFBZSxXQUFXLEdBQ3hEbkQsRUFBY0csWUFBWWlELEtBQUs3QixFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2Rlc2lnbi5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvbG9naWMuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Y3JlYXRlUHJvamVjdH0gZnJvbSBcIi4uL3NyYy9sb2dpY1wiXG5cbmNvbnN0IGRlc2lnblByb2plY3QgPSAoKCkgPT4ge1xuXG4gICAgbGV0IGFsbFByb2plY3RzID0gW107XG4gICAgbGV0IHByb2plY3RUb2RvcyA9IFtdO1xuICAgIGxldCBzZWxlY3RlZFByb2plY3Q7XG4gICAgbGV0IHNlbGVjdGVkVG9kbztcbiAgICBsZXQgeCA9IDFcblxuICAgIGNvbnN0IHNpZGViYXJ0b3AgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNpZGViYXJ0b3BcIik7XG4gICAgY29uc3QgcHJvamVjdExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3RMaXN0XCIpXG4gICAgY29uc3QgdG9kb2xpc3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvbGlzdHNcIik7XG4gICAgY29uc3Qgc2F2ZWJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2F2ZWJ1dHRvblwiKTtcbiAgICBzYXZlYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICBjb25zdCBhZGR0b2RvYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGR0b2RvXCIpO1xuICAgIGNvbnN0IGRlbGV0ZWJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGVsZXRldG9kb1wiKTtcbiAgICBkZWxldGVidXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIGNvbnN0IGVkaXRidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXR0b2RvXCIpO1xuICAgIGVkaXRidXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuXG4gIFxuXG4gICAgLy8gUFJPSkVDVCBGVU5DVElPTlMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgIGNvbnN0IGFkZFByb2plY3QgPSAoKSA9PiB7XG4gICAgICAgIFxuICAgICAgICBsZXQgaSA9IHgrK1xuXG4gICAgICAgIGFsbFByb2plY3RzLmZvckVhY2gocHJvamVjdG51bWJlciA9PiB7XG4gICAgICAgICAgICBwcm9qZWN0bnVtYmVyLnNlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgIH0pXG5cbiAgICAgICAgY29uc3QgcHJvamVjdCA9IGNyZWF0ZVByb2plY3QucHJvamVjdEZhY3RvcnkoXCJwcm9qZWN0XCIgKyBpLCB0cnVlKTtcbiAgICAgICAgY29uc29sZS5sb2cocHJvamVjdCk7XG4gICAgICAgIFxuICAgICAgICBhbGxQcm9qZWN0cy5wdXNoKHByb2plY3QpO1xuXG4gICAgICAgIGNsZWFyQWxsU2VsZWN0b3JzKCk7XG5cbiAgICAgICAgY29uc3QgbmV3UHJvamVjdExhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgyXCIpO1xuICAgICAgICBuZXdQcm9qZWN0TGFiZWwudGV4dENvbnRlbnQgPSBcIk5ldyBQcm9qZWN0XCI7XG4gICAgICAgIG5ld1Byb2plY3RMYWJlbC5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWRcIik7XG4gICAgICAgIG5ld1Byb2plY3RMYWJlbC5jbGFzc0xpc3QuYWRkKFwic2VsZWN0b3JcIik7XG4gICAgICAgIHByb2plY3RMaXN0LmFwcGVuZENoaWxkKG5ld1Byb2plY3RMYWJlbCk7XG5cbiAgICAgICAgY29uc29sZS5sb2coYWxsUHJvamVjdHMpO1xuICAgIH1cblxuICAgIGNvbnN0IHNlbGVjdFByb2plY3QgPSAocHJvamVjdCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0KTtcbiAgICAgICAgY29uc29sZS5sb2cocHJvamVjdC50YXJnZXQpO1xuICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0LnRhcmdldC50ZXh0Q29udGVudCk7XG4gICAgICAgIGNsZWFyQWxsU2VsZWN0b3JzKCk7XG4gICAgICAgIHByb2plY3QudGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkUHJvamVjdCA9IHByb2plY3QudGFyZ2V0O1xuICAgIH1cblxuICAgIGNvbnN0IGNsZWFyQWxsU2VsZWN0b3JzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBzZWxlY3RlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2VsZWN0ZWRcIik7XG4gICAgICAgIHNlbGVjdGVkLmZvckVhY2goc2VsZWN0b3IgPT4ge1xuICAgICAgICAgICAgc2VsZWN0b3IuY2xhc3NMaXN0LnJlbW92ZShcInNlbGVjdGVkXCIpO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8vIFRPRE8gRlVOQ1RJT05TIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICBjb25zdCBzYXZlVG9kbyA9ICgpID0+IHtcbiAgICAgICAgYWxsUHJvamVjdHMuZm9yRWFjaChwcm9qZWN0bnVtYmVyID0+IHtcbiAgICAgICAgICAgIGlmIChwcm9qZWN0bnVtYmVyLnNlbGVjdGVkID09PSB0cnVlKSB7XG5cbiAgICAgICAgICAgICAgICBwcm9qZWN0bnVtYmVyLnRvZG9saXN0cy5mb3JFYWNoKHRvZG9udW1iZXIgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9kb251bWJlci5zZWxlY3RlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcHRvZG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlbGVjdGVkdG9kb1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZG9udW1iZXIudGl0bGUgPSB0ZW1wdG9kby5maXJzdENoaWxkLnRleHRDb250ZW50OyAvL3RpdGxlIGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2RvbnVtYmVyLmRlc2NyaXB0aW9uID0gdGVtcHRvZG8uY2hpbGROb2Rlc1sxXS50ZXh0Q29udGVudDsgLy9kZXNjcmlwdGlvbiBpbnB1dFxuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wcmFkaW8gPSB0ZW1wdG9kby5jaGlsZE5vZGVzWzJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZW1wcmFkaW8ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVtcHJhZGlvW2ldLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9kb251bWJlci5wcmlvcml0eSA9IHRlbXByYWRpb1tpXS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdvcmsgb24gZ2V0dGluZyByYWRpbyBidXR0b25zIGJhY2suIGZpZ3VyZSBpdCBvdXQuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0ZW1wcmFkaW9bbmFtZT1cInByaW9cIl06Y2hlY2tlZC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG9kb251bWJlci5wcmlvcml0eSA9IHRlbXB0b2RvLmNoaWxkTm9kZXNbMl1bbmFtZT1cInByaW9cIl06Y2hlY2tlZC52YWx1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cInJhdGVcIl06Y2hlY2tlZCcpLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codG9kb251bWJlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gT04gVE9ETyBTUEFXTiAtIEFTIElOIENSRUFURSAtIFxuICAgICAgICAgICAgICAgIC8vIEdJVkUgREVGQVVMVCBWQUxVRVMgVE8gT0JKRUNUUy4gUFVTSCBJVCBJTiBUSEUgUFJPSkVDVCdTIEFSUkFZLlxuICAgICAgICAgICAgICAgIC8vaW5wdXRcbiAgICAgICAgICAgICAgICAvL2FkZCB0byBhbiBhcnJheSB3aXRoaW4gdG9kb2xpc3RzW11cbiAgICAgICAgICAgICAgICAvL3R1cm4gb2ZmIHNhdmUgYnV0dG9uLiB0dXJuIGJhY2sgb24gdGhlIGVkaXQgYnV0dG9uP1xuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJhZGRpbmcgdGhpcyB0byB0aGUgZGF0YWJhc2UsIHNpciFcIilcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgY29uc3Qgc2VsZWN0VG9kbyA9ICh0b2RvKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKHRvZG8udGFyZ2V0KTtcbiAgICAgICAgY2xlYXJBbGxUb2RvU2VsZWN0b3JzKCk7XG5cbiAgICAgICAgbGV0IHRlc3QgPSB0b2RvLnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKTtcbiAgICAgICAgbGV0IHRlc3QzID0gdG9kby50YXJnZXQucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKTtcbiAgICAgICAgY29uc29sZS5sb2codGVzdDMpO1xuXG4gICAgICAgIGlmICh0ZXN0ID09PSBcInRvZG9saXN0c1wiKSB7XG5cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0ZXN0ID09PSBcInRvZG9jYXJkXCIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRlc3QpO1xuICAgICAgICAgICAgdG9kby50YXJnZXQuY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkdG9kb1wiKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaXQncyBkb25lIHZpYSBjaGlsZC5cIik7XG4gICAgICAgIH0gZWxzZSBpZiAodGVzdDMgPT09IFwicmFkaW9idXR0b25zXCIpIHtcbiAgICAgICAgICAgIGxldCB0ZXN0MTAgPSB0b2RvLnRhcmdldDtcbiAgICAgICAgICAgIGxldCB0ZXN0MTEgPSB0ZXN0MTAucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIHRlc3QxMS5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZHRvZG9cIik7XG4gICAgICAgICAgICAvLyBsZXQgdGVzdDQgPSB0ZXN0My5wYXJlbnROb2RlO1xuICAgICAgICAgICAgLy8gdGVzdDQuY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkdG9kb1wiKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiYSBmdWNraW5nIGFubm95aW5nIGFzcyByYWRpbyBidXR0b24gZWxlbWVudCB3YXMgcHJlc3NlZC5cIilcbiAgICAgICAgfSBlbHNlIGlmICh0ZXN0MyA9PT0gXCJkYXRlXCIpIHtcbiAgICAgICAgICAgIGxldCB0ZXN0MTAgPSB0b2RvLnRhcmdldDtcbiAgICAgICAgICAgIGxldCB0ZXN0MTEgPSB0ZXN0MTAucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIHRlc3QxMS5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZHRvZG9cIik7XG4gICAgICAgICAgICAvLyBsZXQgdGVzdDQgPSB0ZXN0My5wYXJlbnROb2RlO1xuICAgICAgICAgICAgLy8gdGVzdDQuY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkdG9kb1wiKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiYSBmdWNraW5nIGFubm95aW5nIGFzcyBkdWVkYXRlIHNoaXQgZWxlbWVudCB3YXMgcHJlc3NlZC5cIik7XG4gICAgICAgICAgICBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCB0ZXN0MiA9IHRvZG8udGFyZ2V0O1xuICAgICAgICAgICAgY29uc29sZS5sb2codG9kby50YXJnZXQucGFyZW50Tm9kZSk7XG4gICAgICAgICAgICB0ZXN0Mi5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZHRvZG9cIik7XG4gICAgICAgICAgICAvLyB0ZXN0Mi5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWRkb1wiKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaXQncyBkb25lIHZpYSBwYXJlbnQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gc2VsZWN0ZWRUb2RvID0gdG9kby50YXJnZXQ7XG4gICAgfVxuXG4gICAgY29uc3QgY2xlYXJBbGxUb2RvU2VsZWN0b3JzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBzZWxlY3RlZHRvZG9zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zZWxlY3RlZHRvZG9cIik7XG4gICAgICAgIHNlbGVjdGVkdG9kb3MuZm9yRWFjaChzZWxlY3RlZHRvZG8gPT4ge1xuICAgICAgICAgICAgc2VsZWN0ZWR0b2RvLmNsYXNzTGlzdC5yZW1vdmUoXCJzZWxlY3RlZHRvZG9cIik7XG4gICAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGNsZWFyVG9kb3MgPSAoKSA9PiB7XG4gICAgICAgIGxldCB0b2RvbGlzdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG9saXN0c1wiKTtcbiAgICAgICAgbGV0IGNoaWxkcmVuID0gdG9kb2xpc3RzLmxhc3RFbGVtZW50Q2hpbGQ7XG4gICAgICAgIHdoaWxlIChjaGlsZHJlbikge1xuICAgICAgICAgICAgdG9kb2xpc3RzLnJlbW92ZUNoaWxkKGNoaWxkcmVuKTtcbiAgICAgICAgICAgIGNoaWxkcmVuID0gdG9kb2xpc3RzLmxhc3RFbGVtZW50Q2hpbGQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBkaXNwbGF5UHJvamVjdHNUb2RvcyA9IChwcm9qZWN0KSA9PiB7XG5cbiAgICB9XG5cbiAgICBjb25zdCByZWdpc3RlclRvZG8gPSAoKSA9PiB7XG5cbiAgICB9XG5cbiAgICBjb25zdCBkZXNpZ25FbXB0eVRvZG8gPSAoKSA9PiB7XG5cbiAgICAgICAgY2xlYXJBbGxUb2RvU2VsZWN0b3JzKCk7XG5cbiAgICAgICAgYWRkdG9kb2J1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIGFkZHRvZG9idXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm9ubGluZVwiKTtcbiAgICAgICAgYWRkdG9kb2J1dHRvbi5jbGFzc0xpc3QuYWRkKFwib2ZmbGluZVwiKTtcblxuICAgICAgICBkZWxldGVidXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgZGVsZXRlYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJvZmZsaW5lXCIpO1xuICAgICAgICBkZWxldGVidXR0b24uY2xhc3NMaXN0LmFkZChcIm9ubGluZVwiKTtcbiAgICAgICAgZWRpdGJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICBlZGl0YnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJvZmZsaW5lXCIpO1xuICAgICAgICBlZGl0YnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJvbmxpbmVcIik7XG4gICAgICAgIHNhdmVidXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgc2F2ZWJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwib2ZmbGluZVwiKTtcbiAgICAgICAgc2F2ZWJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwib25saW5lXCIpO1xuICAgICAgICBcblxuICAgICAgICAvLyBsZXQgaSA9IHgrKzsgXG4gICAgICAgIFxuICAgICAgICBjb25zdCB0b2RvY2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRvZG9jYXJkLmNsYXNzTGlzdC5hZGQoXCJ0b2RvY2FyZFwiKTtcbiAgICAgICAgdG9kb2NhcmQuY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkdG9kb1wiKTtcbiAgICAgICAgdG9kb2xpc3RzLmFwcGVuZENoaWxkKHRvZG9jYXJkKTtcblxuICAgICAgICBjb25zdCB0b2RvdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDNcIik7XG4gICAgICAgIHRvZG90aXRsZS5jbGFzc0xpc3QuYWRkKFwidG9kb3RpdGxlXCIpO1xuICAgICAgICB0b2RvdGl0bGUuc2V0QXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgdG9kb3RpdGxlLnRleHRDb250ZW50ID0gXCJHaXZlIHlvdXIgdG9kbyBhIHRpdGxlXCJcbiAgICAgICAgdG9kb2NhcmQuYXBwZW5kQ2hpbGQodG9kb3RpdGxlKTtcblxuICAgICAgICBjb25zdCB0b2RvZGVzYyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICB0b2RvZGVzYy5jbGFzc0xpc3QuYWRkKFwidG9kb2Rlc2NcIik7XG4gICAgICAgIHRvZG9kZXNjLnNldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiLCBcInRydWVcIik7XG4gICAgICAgIHRvZG9jYXJkLmFwcGVuZENoaWxkKHRvZG9kZXNjKTtcblxuICAgICAgICBjb25zdCByYWRpb2J1dHRvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICByYWRpb2J1dHRvbnMuY2xhc3NMaXN0LmFkZChcInJhZGlvYnV0dG9uc1wiKTtcbiAgICAgICAgdG9kb2NhcmQuYXBwZW5kQ2hpbGQocmFkaW9idXR0b25zKTtcbiAgICAgICAgY29uc3QgcHJpb3RpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICAgIHByaW90aXRsZS5jbGFzc0xpc3QuYWRkKFwicHJpb3RpdGxlXCIpO1xuICAgICAgICBwcmlvdGl0bGUudGV4dENvbnRlbnQgPSBcIlByaW9yaXR5OlwiO1xuICAgICAgICByYWRpb2J1dHRvbnMuYXBwZW5kQ2hpbGQocHJpb3RpdGxlKTtcbiAgICAgICAgY29uc3QgdG9kb3ByaW9sb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICAgIHRvZG9wcmlvbG93LmNsYXNzTGlzdC5hZGQoXCJ0b2RvcHJpb2xvd1wiKTtcbiAgICAgICAgdG9kb3ByaW9sb3cuc2V0QXR0cmlidXRlKFwiaWRcIixcInByaW9cIik7XG4gICAgICAgIHRvZG9wcmlvbG93LnNldEF0dHJpYnV0ZShcIm5hbWVcIixcInByaW9cIik7XG4gICAgICAgIHRvZG9wcmlvbG93LnNldEF0dHJpYnV0ZShcInR5cGVcIixcInJhZGlvXCIpO1xuICAgICAgICB0b2RvcHJpb2xvdy5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLFwibG93XCIpO1xuICAgICAgICByYWRpb2J1dHRvbnMuYXBwZW5kQ2hpbGQodG9kb3ByaW9sb3cpO1xuICAgICAgICBjb25zdCB0b2RvcHJpb2xvd2xhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgICAgICB0b2RvcHJpb2xvd2xhYmVsLnRleHRDb250ZW50ID0gXCJMb3dcIjtcbiAgICAgICAgdG9kb3ByaW9sb3dsYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJsb3dcIik7XG4gICAgICAgIHJhZGlvYnV0dG9ucy5hcHBlbmRDaGlsZCh0b2RvcHJpb2xvd2xhYmVsKTtcbiAgICAgICAgY29uc3QgdG9kb3ByaW9tZWRpdW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICAgIHRvZG9wcmlvbWVkaXVtLmNsYXNzTGlzdC5hZGQoXCJ0b2RvcHJpb21lZGl1bVwiKTtcbiAgICAgICAgdG9kb3ByaW9tZWRpdW0uc2V0QXR0cmlidXRlKFwiaWRcIixcInByaW9cIik7XG4gICAgICAgIHRvZG9wcmlvbWVkaXVtLnNldEF0dHJpYnV0ZShcIm5hbWVcIixcInByaW9cIik7XG4gICAgICAgIHRvZG9wcmlvbWVkaXVtLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInJhZGlvXCIpO1xuICAgICAgICB0b2RvcHJpb21lZGl1bS5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLFwibWVkaXVtXCIpO1xuICAgICAgICByYWRpb2J1dHRvbnMuYXBwZW5kQ2hpbGQodG9kb3ByaW9tZWRpdW0pO1xuICAgICAgICBjb25zdCB0b2RvcHJpb21lZGl1bWxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgICAgICB0b2RvcHJpb21lZGl1bWxhYmVsLnRleHRDb250ZW50ID0gXCJNZWRpdW1cIjtcbiAgICAgICAgdG9kb3ByaW9tZWRpdW1sYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJtZWRpdW1cIik7XG4gICAgICAgIHJhZGlvYnV0dG9ucy5hcHBlbmRDaGlsZCh0b2RvcHJpb21lZGl1bWxhYmVsKTtcbiAgICAgICAgY29uc3QgdG9kb3ByaW9oaWdoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICB0b2RvcHJpb2hpZ2guY2xhc3NMaXN0LmFkZChcInRvZG9wcmlvaGlnaFwiKTtcbiAgICAgICAgdG9kb3ByaW9oaWdoLnNldEF0dHJpYnV0ZShcImlkXCIsXCJwcmlvXCIpO1xuICAgICAgICB0b2RvcHJpb2hpZ2guc2V0QXR0cmlidXRlKFwibmFtZVwiLFwicHJpb1wiKTtcbiAgICAgICAgdG9kb3ByaW9oaWdoLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInJhZGlvXCIpO1xuICAgICAgICB0b2RvcHJpb2hpZ2guc2V0QXR0cmlidXRlKFwidmFsdWVcIixcImhpZ2hcIik7XG4gICAgICAgIHJhZGlvYnV0dG9ucy5hcHBlbmRDaGlsZCh0b2RvcHJpb2hpZ2gpO1xuICAgICAgICBjb25zdCB0b2RvcHJpb2hpZ2hsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICAgICAgdG9kb3ByaW9oaWdobGFiZWwudGV4dENvbnRlbnQgPSBcIkhpZ2hcIjtcbiAgICAgICAgdG9kb3ByaW9oaWdobGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwiaGlnaFwiKTtcbiAgICAgICAgcmFkaW9idXR0b25zLmFwcGVuZENoaWxkKHRvZG9wcmlvaGlnaGxhYmVsKTtcblxuICAgICAgICBjb25zdCBkYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgZGF0ZS5jbGFzc0xpc3QuYWRkKFwiZGF0ZVwiKTtcbiAgICAgICAgdG9kb2NhcmQuYXBwZW5kQ2hpbGQoZGF0ZSk7XG5cbiAgICAgICAgY29uc3QgZGF0ZWxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgICAgICBkYXRlbGFiZWwuY2xhc3NMaXN0LmFkZChcImRhdGVsYWJlbFwiKTtcbiAgICAgICAgZGF0ZWxhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcImR1ZWRhdGVcIik7XG4gICAgICAgIGRhdGVsYWJlbC50ZXh0Q29udGVudCA9IFwiRHVlOiBcIlxuICAgICAgICBkYXRlLmFwcGVuZENoaWxkKGRhdGVsYWJlbCk7XG5cbiAgICAgICAgY29uc3QgZHVlZGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICBkdWVkYXRlLmNsYXNzTGlzdC5hZGQoXCJkdWVkYXRlXCIpO1xuICAgICAgICBkdWVkYXRlLnNldEF0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiLCBcInRydWVcIik7XG4gICAgICAgIGRhdGUuYXBwZW5kQ2hpbGQoZHVlZGF0ZSk7XG5cbiAgICAgICAgLy8gdW5uZWVkZWQsIHVzaW5nIHRleHRib3hcbiAgICAgICAgLy8gY29uc3QgZHVlZGF0ZSA9ICBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAvLyBkdWVkYXRlLmNsYXNzTGlzdC5hZGQoXCJkYXRlXCIpO1xuICAgICAgICAvLyB0b2RvY2FyZC5hcHBlbmRDaGlsZChkdWVkYXRlKTtcbiAgICAgICAgLy8gY29uc3QgZGF0ZXRpdGxlbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgICAgIC8vIGRhdGV0aXRsZWxhYmVsLmNsYXNzTGlzdC5hZGQoXCJkYXRldGl0bGVcIik7XG4gICAgICAgIC8vIGRhdGV0aXRsZWxhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcImR1ZWRhdGVcIik7XG4gICAgICAgIC8vIGRhdGV0aXRsZWxhYmVsLnRleHRDb250ZW50ID0gXCJEdWUgRGF0ZTpcIjtcbiAgICAgICAgLy8gZHVlZGF0ZS5hcHBlbmRDaGlsZChkYXRldGl0bGVsYWJlbCk7XG4gICAgICAgIC8vIGNvbnN0IGRhdGV0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgLy8gZGF0ZXRpdGxlLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJkYXRlXCIpO1xuICAgICAgICAvLyBkYXRldGl0bGUuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJkdWVkYXRlXCIpO1xuICAgICAgICAvLyBkYXRldGl0bGUuY2xhc3NMaXN0LmFkZChcInRvZG9kdWVkYXRlXCIpO1xuICAgICAgICAvLyAvLyBkYXRldGl0bGUuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgXCJcIik7XG4gICAgICAgIC8vIGR1ZWRhdGUuYXBwZW5kQ2hpbGQoZGF0ZXRpdGxlKTtcblxuICAgICAgICBjb25zdCB0b2RvbGlzdCA9IGNyZWF0ZVByb2plY3QudG9kb0ZhY3RvcnkoXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgdHJ1ZSk7XG5cbiAgICAgICAgYWxsUHJvamVjdHMuZm9yRWFjaChwcm9qZWN0bnVtYmVyID0+IHtcbiAgICAgICAgICAgIGlmIChwcm9qZWN0bnVtYmVyLnNlbGVjdGVkID09PSB0cnVlKSB7XG5cbiAgICAgICAgICAgICAgICBwcm9qZWN0bnVtYmVyLnRvZG9saXN0cy5wdXNoKHRvZG9saXN0KTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0bnVtYmVyLnRvZG9saXN0cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgXG5cbiAgICAvLyBFVkVOVExJU1RFTkVSU1xuXG4gICAgcHJvamVjdExpc3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNlbGVjdFByb2plY3QpO1xuICAgIHRvZG9saXN0cy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2VsZWN0VG9kbyk7XG4gICAgc2F2ZWJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2F2ZVRvZG8pO1xuXG4gICAgcmV0dXJuIHsgYWRkUHJvamVjdCwgZGVzaWduRW1wdHlUb2RvLCBhbGxQcm9qZWN0c307XG5cbn0pKCk7XG5cbmV4cG9ydCB7ZGVzaWduUHJvamVjdH07IiwiaW1wb3J0IHtkZXNpZ25Qcm9qZWN0fSBmcm9tIFwiLi4vc3JjL2Rlc2lnblwiXG5cbmNvbnN0IGNyZWF0ZVByb2plY3QgPSAoKCkgPT4ge1xuXG4gICAgY29uc3QgUHJvamVjdHMgPSBbXTtcblxuICAgIFxuXG4gICAgY29uc3QgcHJvamVjdEZhY3RvcnkgPSAobmFtZSwgc2VsZWN0ZWQpID0+IHtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHRvZG9saXN0cyA9IFtdO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHsgbmFtZSwgc2VsZWN0ZWQsIHRvZG9saXN0c307XG4gICAgfVxuXG4gICAgY29uc3QgdG9kb0ZhY3RvcnkgPSAodGl0bGUsIGRlc2NyaXB0aW9uLCBwcmlvcml0eSwgZHVlZGF0ZSwgc2VsZWN0ZWQpID0+IHtcblxuICAgICAgICByZXR1cm4geyB0aXRsZSwgZGVzY3JpcHRpb24sIHByaW9yaXR5LCBkdWVkYXRlLCBzZWxlY3RlZCB9O1xuICAgIH1cblxuXG4gICAgLy8gY29uc3QgYWRkVG9kbyA9IChzZWxlY3RlZFByb2plY3QpID0+IHtcbiAgICAvLyAgICAgY29uc29sZS5sb2coXCJjcnlcIik7XG4gICAgLy8gfVxuXG5cbiAgICByZXR1cm4geyBwcm9qZWN0RmFjdG9yeSwgUHJvamVjdHMsIHRvZG9GYWN0b3J5IH07XG5cbn0pKCk7XG5cblxuXG5leHBvcnQge2NyZWF0ZVByb2plY3R9OyIsImltcG9ydCB7Y3JlYXRlUHJvamVjdH0gZnJvbSBcIi4uL3NyYy9sb2dpY1wiXG5pbXBvcnQge2Rlc2lnblByb2plY3R9IGZyb20gXCIuLi9zcmMvZGVzaWduXCJcblxuY29uc3QgYWRkUHJvamVjdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY3JlYXRlcHJvamVjdFwiKTtcbmFkZFByb2plY3RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGRlc2lnblByb2plY3QuYWRkUHJvamVjdCk7XG5cbmNvbnN0IGFkZHRvZG9idXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZHRvZG9cIik7XG5hZGR0b2RvYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBkZXNpZ25Qcm9qZWN0LmRlc2lnbkVtcHR5VG9kbyk7XG5cbmNvbnN0IHByb2plY3QgPSBjcmVhdGVQcm9qZWN0LnByb2plY3RGYWN0b3J5KFwicHJvamVjdFwiLCB0cnVlKTtcbmRlc2lnblByb2plY3QuYWxsUHJvamVjdHMucHVzaChwcm9qZWN0KTtcbi8vIGFkZFByb2plY3RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbi8vICAgICBjb25zb2xlLmxvZyhcInRlc3RpbmcyXCIpXG4vLyB9KTtcblxuIl0sIm5hbWVzIjpbImRlc2lnblByb2plY3QiLCJzZWxlY3RlZFByb2plY3QiLCJzZWxlY3RlZFRvZG8iLCJhbGxQcm9qZWN0cyIsIngiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwcm9qZWN0TGlzdCIsInRvZG9saXN0cyIsInNhdmVidXR0b24iLCJkaXNhYmxlZCIsImFkZHRvZG9idXR0b24iLCJkZWxldGVidXR0b24iLCJlZGl0YnV0dG9uIiwiY2xlYXJBbGxTZWxlY3RvcnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsInNlbGVjdG9yIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiY2xlYXJBbGxUb2RvU2VsZWN0b3JzIiwic2VsZWN0ZWR0b2RvIiwiYWRkRXZlbnRMaXN0ZW5lciIsInByb2plY3QiLCJjb25zb2xlIiwibG9nIiwidGFyZ2V0IiwidGV4dENvbnRlbnQiLCJhZGQiLCJ0b2RvIiwidGVzdCIsImdldEF0dHJpYnV0ZSIsInRlc3QzIiwicGFyZW50Tm9kZSIsInRlc3QyIiwicHJvamVjdG51bWJlciIsInNlbGVjdGVkIiwidG9kb251bWJlciIsInRlbXB0b2RvIiwidGl0bGUiLCJmaXJzdENoaWxkIiwiZGVzY3JpcHRpb24iLCJjaGlsZE5vZGVzIiwidGVtcHJhZGlvIiwiaSIsImxlbmd0aCIsImNoZWNrZWQiLCJwcmlvcml0eSIsInZhbHVlIiwiYWRkUHJvamVjdCIsImNyZWF0ZVByb2plY3QiLCJwcm9qZWN0RmFjdG9yeSIsInB1c2giLCJuZXdQcm9qZWN0TGFiZWwiLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJkZXNpZ25FbXB0eVRvZG8iLCJ0b2RvY2FyZCIsInRvZG90aXRsZSIsInNldEF0dHJpYnV0ZSIsInRvZG9kZXNjIiwicmFkaW9idXR0b25zIiwicHJpb3RpdGxlIiwidG9kb3ByaW9sb3ciLCJ0b2RvcHJpb2xvd2xhYmVsIiwidG9kb3ByaW9tZWRpdW0iLCJ0b2RvcHJpb21lZGl1bWxhYmVsIiwidG9kb3ByaW9oaWdoIiwidG9kb3ByaW9oaWdobGFiZWwiLCJkYXRlIiwiZGF0ZWxhYmVsIiwiZHVlZGF0ZSIsInRvZG9saXN0IiwidG9kb0ZhY3RvcnkiLCJuYW1lIiwiUHJvamVjdHMiXSwic291cmNlUm9vdCI6IiJ9